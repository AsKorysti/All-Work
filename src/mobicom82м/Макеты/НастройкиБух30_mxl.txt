													
													
Параметр	Значение												
Компания	---												
Дистрибьютор	МобиКом												
Версия	2016.06.10												
Конфигурация	БУХ30												
													
													
Имя раздела	Наименование	Выключено	Замещение	Таб.часть	Связка	Отбор	Тип объекта	LocalStorage	Комментарий				
ref_firms	Фирмы		false			Организации	С	+	Организации				
ref_stores	Склады		false			Склады	С	+	Склады				
ref_employees	Сотрудники		false			Пользователи	С	+	ФизическиеЛица				
ref_cashregisters	Кассы	Х	false				С	+	Кассы				
ref_pricetypes	Типы цен		false			*ТипыЦенНоменклатуры	С	+	ТипыЦенНоменклатуры				
ref_units	Единицы измерения (ОКЕИ)		false			*КлассификаторЕдиницИзмерения	С	+	КлассификаторЕдиницИзмерения				
ref_buyers	Владельцы / покупатели		false			Контрагенты	С	+	Контрагенты				
ref_counteragents	Контрагенты / юр.лица / плательщики		false			*Контрагенты	С	+	Контрагенты				
ref_agreements	Договора		false			*ДоговорыКонтрагентов	С	+	ДоговорыКонтрагентов				
ref_buypointtypes	Типы торговых точек		false			*Контрагенты	С	+					
ref_buypoints	Торговые точки		false			*Контрагенты	С	+	Контрагенты				
ref_agreementbuypoints	Обслуживаемые по договору ТТ		true				С						
ref_territories	Территории агентов	Х	true				С						
ref_skugroups	Товарные группы		false			Номенклатура	С	+	Номенклатура				
ref_skus	Товары		false			Номенклатура	С	+	Номенклатура				
ref_skuunits	Единицы измерения товаров		true			*ЕдиницыИзмерения	С	+	ЕдиницыИзмерения				
ref_skuimages	Изображения товаров	Х	false				С	+	ХранилищеДополнительнойИнформации				
ref_docstates	Статусы состояния документа	Х	false				С	+					
ref_paytypes	Типы оплаты	Х	false				С	+					
doc_invoices	(док) Продажи		false	doc_invoiceskus	invoice	*РеализацияТоваровУслуг	Д		РеализацияТоваровУслуг				
reg_rests	(рег) Остатки товаров		true				Р						
reg_debts	(рег) Задолженности		true				Р						
reg_prices	(рег) Цены товаров		true				Р		ЦеныНоменклатуры				
ref_discounts	(рег) Скидки	Х	true	ref_discountagreements,ref_discountbuyers,ref_discountbuypoints,ref_discountbuypointtypes	discount		Р						
													
Имя раздела	Наименование	Выключено	Замещение	Таб.часть	Связка	Отбор	Тип объекта		Комментарий				
doc_preorders	(док) Заявки		false	doc_preorderskus	preorder	РеализацияТоваровУслуг	Д		ЗаказПокупателя				
doc_receiptcashorders	(док) ПКО		false	doc_receiptcashorderitems	receiptcashorder	ПриходныйКассовыйОрдер	Д		ПриходныйКассовыйОрдер				
doc_goodsreturns	(док) Возвраты		false	doc_goodsreturnskus	goodsreturn	ВозвратТоваровОтПокупателя	Д		ВозвратТоваровОтПокупателя				
ref_buyercensus	Новые владельцы	Х	false			Контрагенты	С						
ref_buypointcensus	Новые торг.точки	Х	false			Контрагенты	С						
													
													
													
	Если в начале стоит * - реквизит не участвует в обмене	Если в начале стоит * - отбор по фильтру не используется											
													
Фирмы													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
name	Наименование		Наименование		"ВЫБРАТЬ
	Организации.Ссылка,
	Организации.Наименование,
	Организации.Код,
	Организации.ПометкаУдаления,
	ЕСТЬNULL(УчетнаяПолитикаОрганизацийСрезПоследних.ПлательщикНДС, ЛОЖЬ) КАК ПлательщикНДС,
	Организации.ИНН,
	Организации.КПП
ИЗ
	Справочник.Организации КАК Организации
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.УчетнаяПолитикаОрганизаций.СрезПоследних(&ДатаФормирования, ) КАК УчетнаяПолитикаОрганизацийСрезПоследних
		ПО Организации.Ссылка = УчетнаяПолитикаОрганизацийСрезПоследних.Организация"	0							
printcode	Код		Код объекта										
deleted	ПометкаУдаления		Пометка на удаление										
address	*Адрес		Адрес										
phone	*Телефон		Телефон										
vatstatus	ПлательщикНДС		Плательщик НДС										
inn	ИНН		ИНН										
kpp	КПП		КПП										
													
													
Склады													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
name	Наименование		Наименование		"ВЫБРАТЬ
	Склады.Ссылка,
	Склады.Наименование,
	Склады.Код,
	Склады.ПометкаУдаления
ИЗ
	Справочник.Склады КАК Склады
ГДЕ
	Склады.ЭтоГруппа = ЛОЖЬ"	1							
printcode	Код		Код объекта										
deleted	ПометкаУдаления		Пометка на удаление										
													
													
Сотрудники													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
name	Наименование		Наименование		"ВЫБРАТЬ
	Пользователи.Ссылка,
	Пользователи.Наименование,
	Пользователи.ПометкаУдаления
ИЗ
	Справочник.Пользователи КАК Пользователи"	0							
printcode	*Код		Код объекта										
deleted	ПометкаУдаления		Пометка на удаление										
store	*Склад	ref_stores	Ссылка на склад		ВложенныйЗапросСклады.СтруктурнаяЕдиница								
firstname	*Имя		Имя										
lastname	*Фамилия		Фамилия										
middlename	*Отчество		Отчество										
inn			ИНН										
post			Должность										
phone			Телефон										
route			Номер маршрута										
startlatitude			Отправная точка движения по маршруту: широта										
startlongitude			Отправная точка движения по маршруту: долгота										
finishlatitude			Конечная точка движения по маршруту: широта										
finishlongitude			Конечная точка движения по маршруту: долгота										
plannedtrackweekcount			Число недель планируемого маршрута										
													
													
Кассы													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
name	Наименование		Наименование		"ВЫБРАТЬ
	Кассы.Ссылка,
	Кассы.Наименование,
	Кассы.Код,
	Кассы.ПометкаУдаления,
	Кассы.Владелец КАК Организация
ИЗ
	Справочник.Кассы КАК Кассы"	0				"ВЫБРАТЬ
	Кассы.Ссылка,
	Кассы.Наименование,
	Кассы.Код,
	Кассы.ПометкаУдаления,
	Кассы.Владелец КАК Организация,
	ЕСТЬNULL(ВложенныйЗапросКассы.ФизическоеЛицо, НЕОПРЕДЕЛЕНО) КАК ФизическоеЛицо
ИЗ
	Справочник.Кассы КАК Кассы
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			ОтветственныеЛицаСрезПоследних.СтруктурнаяЕдиница КАК СтруктурнаяЕдиница,
			ОтветственныеЛицаСрезПоследних.ФизическоеЛицо КАК ФизическоеЛицо
		ИЗ
			РегистрСведений.ОтветственныеЛица.СрезПоследних(&ДатаФормирования, ) КАК ОтветственныеЛицаСрезПоследних
		ГДЕ
			ТИПЗНАЧЕНИЯ(ОтветственныеЛицаСрезПоследних.СтруктурнаяЕдиница) = ТИП(Справочник.Склады)) КАК ВложенныйЗапросКассы
		ПО Кассы.Ссылка = ВложенныйЗапросКассы.СтруктурнаяЕдиница"			
printcode	Код		Код объекта										
deleted	ПометкаУдаления		Пометка на удаление										
firm	Организация	ref_firms	Ссылка на собственную фирму		Кассы.Владелец								
employee	*ФизическоеЛицо	ref_employees	Ссылка на сотрудника		ВложенныйЗапросКассы.ФизическоеЛицо,								
store		*ref_stores	Ссылка на склад										
													
													
Типы цен													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
name	Наименование		Наименование		"ВЫБРАТЬ
	ТипыЦенНоменклатуры.Ссылка,
	ТипыЦенНоменклатуры.Наименование,
	ТипыЦенНоменклатуры.Код,
	ТипыЦенНоменклатуры.ПометкаУдаления
ИЗ
	Справочник.ТипыЦенНоменклатуры КАК ТипыЦенНоменклатуры"	0							
printcode	Код		Код объекта										
deleted	ПометкаУдаления		Пометка на удаление										
parentpricetype	*БазовыйТипЦен	*ref_pricetypes	Ссылка на базовый тип цены										
extrarate	*ПроцентСкидкиНаценки		Процент наценки на цену базового типа										
													
													
Единицы измерения (ОКЕИ)													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
name	Наименование		Наименование		"ВЫБРАТЬ
	КлассификаторЕдиницИзмерения.Ссылка,
	КлассификаторЕдиницИзмерения.Наименование,
	КлассификаторЕдиницИзмерения.Код,
	КлассификаторЕдиницИзмерения.ПометкаУдаления,
	КлассификаторЕдиницИзмерения.Наименование КАК КраткоеНаименование
ИЗ
	Справочник.КлассификаторЕдиницИзмерения КАК КлассификаторЕдиницИзмерения"	0							
printcode	Код		Код объекта										
deleted	ПометкаУдаления		Пометка на удаление										
shortname	КраткоеНаименование		Короткое наименование										
													
													
Владельцы / покупатели													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
name	Наименование		Наименование		"ВЫБРАТЬ
	Контрагенты.Ссылка,
	Контрагенты.Наименование,
	Контрагенты.Код,
	Контрагенты.ПометкаУдаления,
	ЕСТЬNULL(Контрагенты.ОсновноеКонтактноеЛицо.Наименование, """") КАК КонтактноеЛицо,
	ЕСТЬNULL(ВложенныйЗапросАдрес.Представление, """") КАК Адрес,
	ЕСТЬNULL(ВложенныйЗапросТелефон.Представление, """") КАК Телефон
ИЗ
	Справочник.Контрагенты КАК Контрагенты
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			КонтрагентыКонтактнаяИнформация.Представление КАК Представление,
			КонтрагентыКонтактнаяИнформация.Ссылка КАК Ссылка
		ИЗ
			Справочник.Контрагенты.КонтактнаяИнформация КАК КонтрагентыКонтактнаяИнформация
		ГДЕ
			КонтрагентыКонтактнаяИнформация.Тип = ЗНАЧЕНИЕ(Перечисление.ТипыКонтактнойИнформации.Адрес)
			И КонтрагентыКонтактнаяИнформация.Вид = ЗНАЧЕНИЕ(Справочник.ВидыКонтактнойИнформации.ЮрАдресКонтрагента)) КАК ВложенныйЗапросАдрес
		ПО Контрагенты.Ссылка = ВложенныйЗапросАдрес.Ссылка
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			КонтрагентыКонтактнаяИнформация.Представление КАК Представление,
			КонтрагентыКонтактнаяИнформация.Ссылка КАК Ссылка
		ИЗ
			Справочник.Контрагенты.КонтактнаяИнформация КАК КонтрагентыКонтактнаяИнформация
		ГДЕ
			КонтрагентыКонтактнаяИнформация.Тип = ЗНАЧЕНИЕ(Перечисление.ТипыКонтактнойИнформации.Телефон)
			И КонтрагентыКонтактнаяИнформация.Вид = ЗНАЧЕНИЕ(Справочник.ВидыКонтактнойИнформации.ТелефонКонтрагента)) КАК ВложенныйЗапросТелефон
		ПО Контрагенты.Ссылка = ВложенныйЗапросТелефон.Ссылка
ГДЕ
	Контрагенты.ЭтоГруппа = ЛОЖЬ"	1							
printcode	Код		Код объекта										
deleted	ПометкаУдаления		Пометка на удаление										
store		ref_stores	Ссылка на склад отгрузки										
pricetype	*ТипЦен	*ref_pricetypes	Ссылка на тип цен		Контрагенты.ОсновнойДоговорКонтрагента.ТипЦен								
address	Адрес		Адрес										
phone	Телефон		Телефон										
contact	КонтактноеЛицо		Контактное лицо										
canexceedlimit	*КонтролироватьЧислоДнейЗадолженности		Признак разрешения превышать срок кредита										
creditlimit	*ДопустимаяСуммаЗадолженности		Ограничение суммы кредита в основной валюте										
creditdeadline	*ДопустимоеЧислоДнейЗадолженности		Ограничение глубины кредита в днях										
maxorderamount			Ограничение максимальной сумма заказа										
minorderamount			Ограничение минимальной сумма заказа										
maxdiscount			Ограничение максимального процента скидки										
mindiscount			Ограничение минимального процента скидки										
													
													
Контрагенты / юр.лица / плательщики													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
name	Наименование		Наименование		"ВЫБРАТЬ
	Контрагенты.Ссылка,
	Контрагенты.Наименование,
	Контрагенты.Код,
	Контрагенты.ПометкаУдаления,
	Контрагенты.Ссылка КАК Покупатель,
	ЕСТЬNULL(ВложенныйЗапросАдрес.Представление, """") КАК Адрес,
	ЕСТЬNULL(ВложенныйЗапросТелефон.Представление, """") КАК Телефон,
	ВЫБОР
		КОГДА Контрагенты.ЮридическоеФизическоеЛицо = ЗНАЧЕНИЕ(Перечисление.ЮридическоеФизическоеЛицо.ЮридическоеЛицо)
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК ЮрЛицо,
	Контрагенты.ИНН,
	Контрагенты.КПП,
	""р/с "" + ЕСТЬNULL(Контрагенты.ОсновнойБанковскийСчет.НомерСчета, ""--"") + "", "" + ""в банке "" + ЕСТЬNULL(Контрагенты.ОсновнойБанковскийСчет.Банк.Наименование, ""--"") + "", "" + ""БИК "" + ЕСТЬNULL(Контрагенты.ОсновнойБанковскийСчет.Банк.Код, ""--"") + "", "" + ""к/с "" + ЕСТЬNULL(Контрагенты.ОсновнойБанковскийСчет.Банк.КоррСчет, ""--"") КАК БанкРеквизиты,
	Контрагенты.КодПоОКПО КАК ОКПО
ИЗ
	Справочник.Контрагенты КАК Контрагенты
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			КонтрагентыКонтактнаяИнформация.Представление КАК Представление,
			КонтрагентыКонтактнаяИнформация.Ссылка КАК Ссылка
		ИЗ
			Справочник.Контрагенты.КонтактнаяИнформация КАК КонтрагентыКонтактнаяИнформация
		ГДЕ
			КонтрагентыКонтактнаяИнформация.Тип = ЗНАЧЕНИЕ(Перечисление.ТипыКонтактнойИнформации.Адрес)
			И КонтрагентыКонтактнаяИнформация.Вид = ЗНАЧЕНИЕ(Справочник.ВидыКонтактнойИнформации.ЮрАдресКонтрагента)) КАК ВложенныйЗапросАдрес
		ПО Контрагенты.Ссылка = ВложенныйЗапросАдрес.Ссылка
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			КонтрагентыКонтактнаяИнформация.Представление КАК Представление,
			КонтрагентыКонтактнаяИнформация.Ссылка КАК Ссылка
		ИЗ
			Справочник.Контрагенты.КонтактнаяИнформация КАК КонтрагентыКонтактнаяИнформация
		ГДЕ
			КонтрагентыКонтактнаяИнформация.Тип = ЗНАЧЕНИЕ(Перечисление.ТипыКонтактнойИнформации.Телефон)
			И КонтрагентыКонтактнаяИнформация.Вид = ЗНАЧЕНИЕ(Справочник.ВидыКонтактнойИнформации.ТелефонКонтрагента)) КАК ВложенныйЗапросТелефон
		ПО Контрагенты.Ссылка = ВложенныйЗапросТелефон.Ссылка"	0							
printcode	Код		Код объекта										
deleted	ПометкаУдаления		Пометка на удаление										
buyer	Покупатель	ref_buyers	Ссылка на владельца / покупателя		Контрагенты.Ссылка								
address	Адрес		Адрес										
phone	Телефон		Телефон										
vatstatus			Плательщик НДС										
juridical	ЮрЛицо		Признак юридического лица										
inn	ИНН		ИНН										
kpp	КПП		КПП										
bank	БанкРеквизиты		Банковские реквизиты										
okpo	ОКПО		ОКПО										
													
													
Договора													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
name	Наименование		Наименование		"ВЫБРАТЬ
	ДоговорыКонтрагентов.Ссылка,
	ДоговорыКонтрагентов.Наименование,
	ДоговорыКонтрагентов.Код,
	ДоговорыКонтрагентов.ПометкаУдаления,
	ДоговорыКонтрагентов.Организация,
	ДоговорыКонтрагентов.Владелец,
	ДоговорыКонтрагентов.ТипЦен,
	ДоговорыКонтрагентов.Дата,
	ДоговорыКонтрагентов.СрокДействия
ИЗ
	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
ГДЕ
	ДоговорыКонтрагентов.ЭтоГруппа = ЛОЖЬ
	И ДоговорыКонтрагентов.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровКонтрагентов.СПокупателем)"	1							
printcode	Код		Код объекта										
deleted	ПометкаУдаления		Пометка на удаление										
firm	Организация	ref_firms	Ссылка на собственную фирму		ДоговорыКонтрагентов.Организация								
counteragent	Владелец	ref_counteragents	Ссылка на контрагента / юр. лицо / покупателя		ДоговорыКонтрагентов.Владелец								
pricetype	ТипЦен	*ref_pricetypes	Ссылка на тип цен		ДоговорыКонтрагентов.ТипЦен								
startdate	Дата		Дата начала действия договора										
enddate	СрокДействия		Дата окончания действия договора										
canexceedlimit	*КонтролироватьЧислоДнейЗадолженности		Признак разрешения превышать срок кредита										
creditlimit	*ДопустимаяСуммаЗадолженности		Ограничение суммы кредита в основной валюте										
creditdeadline	*ДопустимоеЧислоДнейЗадолженности		Ограничение глубины кредита в днях										
maxorderamount			Ограничение максимальной сумма заказа										
minorderamount			Ограничение минимальной сумма заказа										
maxdiscount			Ограничение максимального процента скидки										
mindiscount			Ограничение минимального процента скидки										
													
													
Типы торговых точек													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
name	ПолноеНаименование		Наименование		"ВЫБРАТЬ
	Контрагенты.Ссылка КАК Ссылка,
	Контрагенты.Код,
	Контрагенты.ЭтоГруппа,
	Контрагенты.ПометкаУдаления
ИЗ
	Справочник.Контрагенты КАК Контрагенты
<ГДЕ ?>
ИТОГИ ПО
	Ссылка ТОЛЬКО ИЕРАРХИЯ"	0	"//полные имена групп
лОбъекты.Колонки.Добавить(""ПолноеНаименование"");
колстр = лОбъекты.Количество();
Для Инд=1 По колстр Цикл
	стрДоп=лОбъекты.Получить(колстр-Инд);
	Если ЗначениеЗаполнено(стрДоп.Ссылка) Тогда
		Если стрДоп.ЭтоГруппа Тогда
			стрДоп.ПолноеНаименование = стрДоп.Ссылка.ПолноеНаименование();
		Иначе
			лОбъекты.Удалить(стрДоп);
		КонецЕсли;
	Иначе
		лОбъекты.Удалить(стрДоп);
	КонецЕсли;
КонецЦикла;
лОбъекты.Свернуть(""Ссылка,ПолноеНаименование,Код,ПометкаУдаления"");
лОбъекты.Сортировать(""ПолноеНаименование"");"						
printcode	Код		Код объекта										
deleted	ПометкаУдаления		Пометка на удаление										
	#	ref_buyers			Контрагенты.Ссылка								
													
													
Торговые точки													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
name	Наименование		Наименование		"ВЫБРАТЬ
	Контрагенты.Ссылка,
	Контрагенты.Наименование,
	Контрагенты.Код,
	Контрагенты.ПометкаУдаления,
	Контрагенты.Ссылка КАК Покупатель,
	Контрагенты.Родитель,
	Контрагенты.НаименованиеПолное,
	ЕСТЬNULL(ВложенныйЗапросАдрес.Представление, """") КАК Адрес,
	ЕСТЬNULL(ВложенныйЗапросТелефон.Представление, """") КАК Телефон,
	ЕСТЬNULL(Контрагенты.ОсновноеКонтактноеЛицо.Наименование, """") КАК КонтактноеЛицо
ИЗ
	Справочник.Контрагенты КАК Контрагенты
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			КонтрагентыКонтактнаяИнформация.Представление КАК Представление,
			КонтрагентыКонтактнаяИнформация.Ссылка КАК Ссылка
		ИЗ
			Справочник.Контрагенты.КонтактнаяИнформация КАК КонтрагентыКонтактнаяИнформация
		ГДЕ
			КонтрагентыКонтактнаяИнформация.Тип = ЗНАЧЕНИЕ(Перечисление.ТипыКонтактнойИнформации.Адрес)
			И КонтрагентыКонтактнаяИнформация.Вид = ЗНАЧЕНИЕ(Справочник.ВидыКонтактнойИнформации.ФактАдресКонтрагента)) КАК ВложенныйЗапросАдрес
		ПО Контрагенты.Ссылка = ВложенныйЗапросАдрес.Ссылка
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			КонтрагентыКонтактнаяИнформация.Представление КАК Представление,
			КонтрагентыКонтактнаяИнформация.Ссылка КАК Ссылка
		ИЗ
			Справочник.Контрагенты.КонтактнаяИнформация КАК КонтрагентыКонтактнаяИнформация
		ГДЕ
			КонтрагентыКонтактнаяИнформация.Тип = ЗНАЧЕНИЕ(Перечисление.ТипыКонтактнойИнформации.Телефон)
			И КонтрагентыКонтактнаяИнформация.Вид = ЗНАЧЕНИЕ(Справочник.ВидыКонтактнойИнформации.ТелефонКонтрагента)) КАК ВложенныйЗапросТелефон
		ПО Контрагенты.Ссылка = ВложенныйЗапросТелефон.Ссылка"	0							
printcode	Код		Код объекта										
deleted	ПометкаУдаления		Пометка на удаление										
buyer	Покупатель	ref_buyers	Ссылка на владельца / покупателя		Контрагенты.Ссылка								
store		ref_stores	Ссылка на склад отгрузки										
pricetype	*ТипЦен	*ref_pricetypes	Ссылка на тип цен		Контрагенты.ОсновнойДоговорКонтрагента.ТипЦен								
buypointtype	Родитель	*ref_buypointtypes	Ссылка на тип торговой точки										
fullname	НаименованиеПолное		Полное наименование										
address	Адрес		Адрес										
phone	Телефон		Телефон										
contact	КонтактноеЛицо		Контактное лицо										
vatstatus			Плательщик НДС										
canexceedlimit	*КонтролироватьЧислоДнейЗадолженности		Признак разрешения превышать срок кредита										
creditlimit	*ДопустимаяСуммаЗадолженности		Ограничение суммы кредита в основной валюте										
creditdeadline	*ДопустимоеЧислоДнейЗадолженности		Ограничение глубины кредита в днях										
maxorderamount			Ограничение максимальной сумма заказа										
minorderamount			Ограничение минимальной сумма заказа										
maxdiscount			Ограничение максимального процента скидки										
mindiscount			Ограничение минимального процента скидки										
extrarate			Процент наценки / скидки										
													
													
Обслуживаемые по договору ТТ													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
deleted	ПометкаУдаления		Пометка на удаление		"ВЫБРАТЬ
	ДоговорыКонтрагентов.Ссылка КАК Договор,
	ДоговорыКонтрагентов.Владелец,
	ВЫБОР
		КОГДА ДоговорыКонтрагентов.Владелец.ОсновнойДоговорКонтрагента = ДоговорыКонтрагентов.Ссылка
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК ОсновнойДоговор,
	ДоговорыКонтрагентов.ПометкаУдаления
ИЗ
	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов"	0							
agreement	Договор	ref_agreements	Ссылка на договор		ДоговорыКонтрагентов.Ссылка								
buypoint	Владелец	ref_buypoints	Ссылка на торговую точку		ДоговорыКонтрагентов.Владелец								
default	ОсновнойДоговор		Признак основного договора										
													
													
Территории агентов													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
deleted					"ВЫБРАТЬ
	КонтрагентыМенеджерыПокупателя.Ссылка КАК Контрагент,
	КонтрагентыМенеджерыПокупателя.МенеджерПокупателя КАК Сотрудник
ИЗ
	Справочник.Контрагенты.МенеджерыПокупателя КАК КонтрагентыМенеджерыПокупателя"	0	"// данные для формирования sid

лОбъекты.Колонки.Добавить(""Ссылка"");
Для Каждого стрДоп Из лОбъекты Цикл
	стрДоп.Ссылка = """"+XMLСтрока(стрДоп.Сотрудник)+""***""+XMLСтрока(стрДоп.Контрагент);
КонецЦикла;"						
employee	Сотрудник	ref_employees	Ссылка на сотрудника		КонтрагентыМенеджерыПокупателя.МенеджерПокупателя								
buypoint	Контрагент	ref_buypoints	Ссылка на торговую точку		КонтрагентыМенеджерыПокупателя.Ссылка								
													
													
Товарные группы													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
name	Наименование		Наименование		"ВЫБРАТЬ
	Номенклатура.Ссылка КАК Ссылка,
	Номенклатура.Наименование,
	Номенклатура.Код,
	Номенклатура.ПометкаУдаления,
	Номенклатура.ЭтоГруппа,
	Номенклатура.Родитель
ИЗ
	Справочник.Номенклатура КАК Номенклатура
<ГДЕ ?>
УПОРЯДОЧИТЬ ПО
	Ссылка
ИТОГИ ПО
	Ссылка ТОЛЬКО ИЕРАРХИЯ"	0	"// выборка до верхнего уровня и сортировка
лОбъекты.Колонки.Добавить(""Представление"");
колстр = лОбъекты.Количество();
Для Инд=1 По колстр Цикл
	стрДоп=лОбъекты.Получить(колстр-Инд);
	Если ЗначениеЗаполнено(стрДоп.Ссылка) Тогда
		Если стрДоп.ЭтоГруппа Тогда
			стрДоп.Представление = стрДоп.Ссылка.ПолноеНаименование();
		Иначе
			лОбъекты.Удалить(стрДоп);
		КонецЕсли;
	Иначе
		лОбъекты.Удалить(стрДоп);
	КонецЕсли;
КонецЦикла;
лОбъекты.Свернуть(""Ссылка,Представление,Наименование,Код,ПометкаУдаления,Родитель"");
лОбъекты.Сортировать(""Представление"");"				"// выборка до верхнего уровня и сортировка
лОбъекты.Колонки.Добавить(""Представление"");
Для Каждого стрДоп Из лОбъекты Цикл
	стрДоп.Представление = стрДоп.Ссылка.ПолноеНаименование();
КонецЦикла;
лОбъекты.Сортировать(""Представление"");"		
printcode	Код		Код объекта										
deleted	ПометкаУдаления		Пометка на удаление										
parentskugroup	Родитель	*ref_skugroups	Ссылка на родительскую группу										
sequence			Сортировка										
	*#	ref_skus			Номенклатура.Ссылка								
													
													
Товары													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
name	Наименование		Наименование		"ВЫБРАТЬ
	Номенклатура.Ссылка,
	Номенклатура.Наименование,
	Номенклатура.Код,
	ВЫБОР
		КОГДА (ВЫРАЗИТЬ(Номенклатура.Артикул КАК СТРОКА(25))) = """"
			ТОГДА ""--""
		ИНАЧЕ Номенклатура.Артикул
	КОНЕЦ КАК Артикул,
	Номенклатура.ПометкаУдаления,
	Номенклатура.Родитель,
	Номенклатура.ЕдиницаИзмерения,
	Номенклатура.НаименованиеПолное,
	ВЫБОР
		КОГДА Номенклатура.СтавкаНДС = ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.НДС18)
			ТОГДА 0.18
		КОГДА Номенклатура.СтавкаНДС = ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.НДС10)
			ТОГДА 0.1
		КОГДА Номенклатура.СтавкаНДС = ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.НДС20)
			ТОГДА 0.2
		ИНАЧЕ 0
	КОНЕЦ КАК СтавкаНДС,
	1 КАК merchandising,
	1 КАК countable
ИЗ
	Справочник.Номенклатура КАК Номенклатура
ГДЕ
	Номенклатура.ЭтоГруппа = ЛОЖЬ
	И Номенклатура.ЕдиницаИзмерения<>Значение(Справочник.КлассификаторЕдиницИзмерения.ПустаяСсылка)"	1							
printcode	Артикул		Код объекта										
deleted	ПометкаУдаления		Пометка на удаление										
skugroup	Родитель	ref_skugroups	Ссылка на товарную группу		Номенклатура.Родитель								
unit	ЕдиницаИзмерения	ref_units	Ссылка на единицу измерения		Номенклатура.ЕдиницаИзмерения								
fullname	НаименованиеПолное		Полное наименование										
weight			Вес единицы измерения										
canweight	*Весовой		Признак весового товара										
sequence			Сортировка										
vatrate	СтавкаНДС		Процент ставки НДС										
merchandising	merchandising		Отметка об инструменте мерчандайзинга										
countable	countable		Отметка о количественном учете наличия при мерчандайзинге										
													
													
Единицы измерения товаров													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
printcode			Штрих-код		"ВЫБРАТЬ
	Номенклатура.Ссылка КАК Номенклатура,
	Номенклатура.ЕдиницаИзмерения,
	Номенклатура.ПометкаУдаления,
	1 КАК Коэффициент
ИЗ
	Справочник.Номенклатура КАК Номенклатура"	0							
deleted	ПометкаУдаления		Пометка на удаление										
sku	Номенклатура	ref_skus	Ссылка на товар		Номенклатура.Ссылка								
unit	ЕдиницаИзмерения	ref_units	Ссылка на единицу измерения		Номенклатура.ЕдиницаИзмерения								
factor	Коэффициент		Коэффициент пересчета в базовую единицу измерения										
weight	*Вес		Вес единицы измерения										
													
													
Изображения товаров													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
deleted	ПометкаУдаления				"ВЫБРАТЬ
	ХранилищеДополнительнойИнформации.Ссылка КАК Идентификатор,
	ХранилищеДополнительнойИнформации.ПометкаУдаления,
	ВЫБОР
		КОГДА ХранилищеДополнительнойИнформации.Объект.ОсновноеИзображение = ХранилищеДополнительнойИнформации.Ссылка
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК ОсновноеИзображение,
	ХранилищеДополнительнойИнформации.Объект,
	ХранилищеДополнительнойИнформации.Хранилище
ИЗ
	Справочник.ХранилищеДополнительнойИнформации КАК ХранилищеДополнительнойИнформации
ГДЕ
	ХранилищеДополнительнойИнформации.ВидДанных = ЗНАЧЕНИЕ(Перечисление.ВидыДополнительнойИнформацииОбъектов.Изображение)"	1	"// айдишники фоток и выгрузка на фотохостинг

лОбщийРазмер = 0;

лОбъекты.Колонки.Добавить(""Ссылка"");
Для Каждого стрДоп Из лОбъекты Цикл
	стрДоп.Ссылка = ""DEFAULT-""+XMLСтрока(стрДоп.Идентификатор);
	
	лРазмер = ВыгрузитьФото(стрДоп.Хранилище, стрДоп.Ссылка);
	Если лРазмер=0 Тогда
		стрДоп.Ссылка=""--"";
	Иначе
		лОбщийРазмер = лОбщийРазмер+лРазмер;
	КонецЕсли;
КонецЦикла;

мстрТЗ = лОбъекты.НайтиСтроки(Новый Структура(""Ссылка"",""""));
Для Каждого стрТЗ Из мстрТЗ Цикл
	лОбъекты.Удалить(стрТЗ);
КонецЦикла;

Сообщить(""Всего отправлено ""+лОбщийРазмер+"" байт"");"						
sku	Объект	ref_skus	Ссылка на товар		ХранилищеДополнительнойИнформации.Объект								
isdefault	ОсновноеИзображение		Основное изображение										
image	Ссылка		Фотография товара										
													
													
Остатки товаров													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
deleted			Пометка на удаление		"ВЫБРАТЬ
	ХозрасчетныйОстатки.Субконто1 КАК Номенклатура,
	ХозрасчетныйОстатки.КоличествоОстаток КАК Количество
ИЗ
	РегистрБухгалтерии.Хозрасчетный.Остатки КАК ХозрасчетныйОстатки
ГДЕ
	ХозрасчетныйОстатки.Счет = ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.ТоварыНаСкладах)"	1							
sku	Номенклатура	ref_skus	Ссылка на товар		ХозрасчетныйОстатки.Субконто1								
store	*Склад	ref_stores	Ссылка на склад										
firm		ref_firms	Ссылка на собственную фирму										
quantity	Количество		Количество										
reserved			Х										
													
													
Задолженности													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
deleted			Пометка на удаление		"ВЫБРАТЬ
	ХозрасчетныйОстатки.Субконто1 КАК Контрагент,
	ХозрасчетныйОстатки.Субконто2 КАК Договор,
	ХозрасчетныйОстатки.Субконто3 КАК Документ,
	ХозрасчетныйОстатки.СуммаОстаток КАК Долг,
	ХозрасчетныйОстатки.Субконто3.Дата КАК Дата,
	ХозрасчетныйОстатки.Субконто3.Номер КАК Номер,
	ХозрасчетныйОстатки.Субконто3 КАК Документ1,
	ХозрасчетныйОстатки.Организация,
	ХозрасчетныйОстатки.Валюта
ИЗ
	РегистрБухгалтерии.Хозрасчетный.Остатки(
			&КонецПериода,
			Счет В ИЕРАРХИИ (ЗНАЧЕНИЕ(ПланСчетов.Хозрасчетный.РасчетыСПокупателямиИЗаказчиками)),
			,
			Организация В (&Отбор_ref_firms)
				И Субконто1 В (&Отбор_ref_buyers)
				И Субконто2 В (&Отбор_ref_agreements)) КАК ХозрасчетныйОстатки"	0	"// обработка документов в ссылках
лОбъекты.Колонки.Добавить(""ДокументПредставление"");
Для Каждого стрДоп Из лОбъекты Цикл
	Если ЗначениеЗаполнено(стрДоп.Документ1) Тогда
		стрДоп.ДокументПредставление = стрДоп.Документ1.Метаданные().Имя + "" №"" +  стрДоп.Номер + "" от "" +стрДоп.Дата;
	КонецЕсли;
КонецЦикла;"			"// обработка документов в ссылках
стрСФ = лСписокФильтров.Найти(""doc_invoices"",""ИмяРаздела"");
лОбъекты.Колонки.Добавить(""ДокументПредставление"");
Если стрСФ=Неопределено Тогда
	лОбъекты.ЗаполнитьЗначения(Неопределено,""Документ"");
	Для Каждого стрДоп Из лОбъекты Цикл
		стрДоп.ДокументПредставление = стрДоп.Документ1.Метаданные().Имя + "" №"" +  стрДоп.Документ1.Номер + "" от "" +стрДоп.Документ1.Дата;
	КонецЦикла;
Иначе
	doc_invoices = стрСФ.Отбор;
	Для Каждого стрДоп Из лОбъекты Цикл
		стрДоп.ДокументПредставление = стрДоп.Документ1.Метаданные().Имя + "" №"" +  стрДоп.Документ1.Номер + "" от "" +стрДоп.Документ1.Дата;
		Если стрДоп.Документ=Неопределено Тогда Продолжить; КонецЕсли;
		Если doc_invoices.Найти(стрДоп.Документ)=Неопределено Тогда
			стрДоп.Документ = Неопределено;
		КонецЕсли;
	КонецЦикла;
КонецЕсли;"			
buyer	Контрагент	ref_buyers	Ссылка на владельца / покупателя		ПАРАМЕТР								
counteragent	Контрагент	*ref_counteragents	Ссылка на контрагента / юр. лицо										
buypoint	Контрагент	*ref_buypoints	Ссылка на торговую точку										
agreement	Договор	ref_agreements	Ссылка на договор		ПАРАМЕТР								
firm	Организация	ref_firms	Ссылка на собственную фирму		ПАРАМЕТР								
invoice	*Документ	*doc_invoices	Ссылка на документ отгрузки товара										
date	Дата		Дата возникновения задолженности										
amount	Долг		Сумма задолженности										
docinfo	ДокументПредставление		Описание документа задолженности										
													
													
Цены товаров													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
deleted			Пометка на удаление		"ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЦеныНоменклатурыСрезПоследних.Цена * КурсыВалютСрезПоследних.Курс КАК Цена,
	ЦеныНоменклатурыСрезПоследних.Номенклатура,
	ЦеныНоменклатурыСрезПоследних.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаПоКлассификатору,
	ЦеныНоменклатурыСрезПоследних.ТипЦен
ИЗ
	РегистрСведений.ЦеныНоменклатуры.СрезПоследних(&КонецПериода, ) КАК ЦеныНоменклатурыСрезПоследних
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&КонецПериода, ) КАК КурсыВалютСрезПоследних
		ПО ЦеныНоменклатурыСрезПоследних.Валюта = КурсыВалютСрезПоследних.Валюта
ГДЕ
	ЦеныНоменклатурыСрезПоследних.Цена <> 0
	И КурсыВалютСрезПоследних.Курс <> 0"	1							
sku	Номенклатура	ref_skus	Ссылка на товар		ЦеныНоменклатурыСрезПоследних.Номенклатура								
pricetype	ТипЦен	*ref_pricetypes	Ссылка на тип цены		ЦеныНоменклатурыСрезПоследних.ТипЦен								
unit	ЕдиницаПоКлассификатору	*ref_units	Ссылка на единицу измерения		ЦеныНоменклатурыСрезПоследних.ЕдиницаИзмерения.ЕдиницаПоКлассификатору								
price	Цена		Цена										
													
													
Статусы состояния документа													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
name	Наименование		Наименование		*	0							
printcode	Код		Код объекта										
deleted	ПометкаУдаления		Пометка на удаление										
													
													
Типы оплаты													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
name	Наименование		Наименование		*	0							
printcode	Код		Код объекта										
deleted	ПометкаУдаления		Пометка на удаление										
													
													
Продажи													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
datetime	Дата		Дата и время документа		"ВЫБРАТЬ
	РеализацияТоваровУслуг.Ссылка,
	РеализацияТоваровУслуг.ТипЦен,
	РеализацияТоваровУслуг.Ответственный,
	РеализацияТоваровУслуг.Организация,
	РеализацияТоваровУслуг.Склад,
	РеализацияТоваровУслуг.Контрагент,
	РеализацияТоваровУслуг.ДоговорКонтрагента,
	РеализацияТоваровУслуг.ПометкаУдаления,
	РеализацияТоваровУслуг.Проведен,
	РеализацияТоваровУслуг.Дата,
	РеализацияТоваровУслуг.Номер,
	РеализацияТоваровУслуг.Комментарий,
	РеализацияТоваровУслуг.СуммаВключаетНДС,
	РеализацияТоваровУслуг.СуммаДокумента,
	РеализацияТоваровУслуг.Товары.(
		Номенклатура,
		ЕдиницаИзмерения,
		Коэффициент,
		Количество,
		ВЫБОР
			КОГДА РеализацияТоваровУслуг.Товары.СтавкаНДС = ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.НДС18)
				ТОГДА 0.18
			КОГДА РеализацияТоваровУслуг.Товары.СтавкаНДС = ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.НДС10)
				ТОГДА 0.1
			КОГДА РеализацияТоваровУслуг.Товары.СтавкаНДС = ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.НДС20)
				ТОГДА 0.2
			ИНАЧЕ 0
		КОНЕЦ КАК СтавкаНДС,
		Цена
	) КАК Товары
ИЗ
	Документ.РеализацияТоваровУслуг КАК РеализацияТоваровУслуг
ГДЕ
	РеализацияТоваровУслуг.Дата МЕЖДУ &НачалоПериода И &КонецПериода"	1							
printcode	Номер		Код объекта										
deleted	ПометкаУдаления		Пометка на удаление										
docstate		*ref_docstates	Ссылка на статус состояния документа										
pricetype	ТипЦен	*ref_pricetypes	Ссылка на тип цены		РеализацияТоваровУслуг.ТипЦен								
employee		ref_employees	Ссылка на сотрудника										
firm	Организация	ref_firms	Ссылка на собственную фирму		РеализацияТоваровУслуг.Организация								
store	Склад	ref_stores	Ссылка на склад		РеализацияТоваровУслуг.Склад								
buyer	Контрагент	ref_buyers	Ссылка на владельца / покупателя		РеализацияТоваровУслуг.Контрагент								
buypoint	Контрагент	*ref_buypoints	Ссылка на торговую точку										
counteragent	Контрагент	*ref_counteragents	Ссылка на контрагента / юр. лицо / плательщика										
agreement	ДоговорКонтрагента	ref_agreements	Ссылка на договор		РеализацияТоваровУслуг.ДоговорКонтрагента								
paytype		*ref_paytypes	Ссылка на тип оплаты										
shipping			Фактическая дата и время отгрузки товара										
comment	Комментарий		Произвольный комментарий										
extrarate			Процент общей наценки / скидки на документ										
includevat	СуммаВключаетНДС		НДС включен в сумму										
usevat	*УчитыватьНДС		Учитывать НДС										
amount	СуммаДокумента		Сумма										
processed	Проведен		Признак проведения документа										
													
Продажи (ТЧ)													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
deleted			Пометка на удаление		Товары	Х							
sku	Номенклатура	ref_skus	Ссылка на товар		РеализацияТоваровУслуг.Товары.Номенклатура								
unit	ЕдиницаИзмерения	ref_units	Ссылка на единицу измерения		РеализацияТоваровУслуг.Товары.ЕдиницаИзмерения								
pricetype		*ref_pricetypes	Ссылка на тип цены										
factor	Коэффициент		Коэффициент пересчета в базовую единицу измерения										
quantity	Количество		Количество в выбранной единице измерения										
extrarate			Процент наценки / скидки										
vatrate	СтавкаНДС		Процент ставки НДС										
price	Цена		Цена за выбранную единицу измерения без учета скидок / наценок										
													
													
Заявки													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке	Доп. после загрузки				
					Х	Х		"// шапка
лОбъект.ВидОперации = Перечисления.ВидыОперацийРеализацияТоваров.Товары;
лОбъект.СпособЗачетаАвансов = Перечисления.СпособыЗачетаАвансов.Автоматически;

//лОбъект.УчитыватьНДС = Истина;
лОбъект.СуммаВключаетНДС = лОбъект.ТипЦен.ЦенаВключаетНДС;

лОбъект.ВалютаДокумента = Константы.ВалютаРегламентированногоУчета.Получить();
СтруктураКурсаВзаиморасчетов = РаботаСКурсамиВалют.ПолучитьКурсВалюты(лОбъект.ВалютаДокумента, лОбъект.Дата);
лОбъект.КурсВзаиморасчетов = СтруктураКурсаВзаиморасчетов.Курс;
лОбъект.КратностьВзаиморасчетов = СтруктураКурсаВзаиморасчетов.Кратность;

лОбъект.БанковскийСчетОрганизации = лОбъект.Организация.ОсновнойБанковскийСчет;

//лОбъект.ОтражатьВУправленческомУчете = Истина;
//лОбъект.ОтражатьВБухгалтерскомУчете = Истина;
//лОбъект.ОтражатьВНалоговомУчете = Истина;

лОбъект.Комментарий = ""#Mobicom# "" + лОбъект.Комментарий;

лОбъект.УстановитьВремя(РежимАвтоВремя.ТекущееИлиПоследним);
//лОбъект.УстановитьНовыйНомер(лОбъект.Организация.Префикс);

лДанныеОбъекта = Новый Структура(
		""Дата, ВидОперации, Организация, Склад, Дата, ТипЦен, СуммаВключаетНДС,
		|ВалютаДокумента, КурсВзаиморасчетов, КратностьВзаиморасчетов,
		|ДеятельностьНаПатенте"");
ЗаполнитьЗначенияСвойств(лДанныеОбъекта, лОбъект);
лКонстанты.Вставить(""ДанныеОбъекта"", лДанныеОбъекта);"	"// заполняем счета учета
лОтборСчета = Новый Структура;
лОтборСчета.Вставить(""Реквизиты"",Новый Структура(""СчетУчетаРасчетовСКонтрагентом,СчетУчетаРасчетовПоАвансам,СчетУчетаРасчетовПоТаре,СчетУчета,СчетДоходов,Субконто,СчетУчетаНДСПоРеализации,СчетРасходов""));
СчетаУчетаВДокументах.Заполнить(лОбъект, лОтборСчета);"				
datetime	*Дата		Дата и время документа										
printcode			Код объекта									"// расчет авт.скидок
лОбъект.ПересчитатьАвтоматическиеСкидки();

// пересчитываем ручн.скидки с учетом автоматических
Для Каждого стрДоп Из лОбъект.Товары Цикл
	стрДоп.ПроцентСкидкиНаценки = стрДоп.ПроцентСкидкиНаценки-стрДоп.ПроцентАвтоматическихСкидок;
КонецЦикла;

лКонстанты.СкидкаПоДокументу = 0; // на всякий случай"	
deleted	ПометкаУдаления		Пометка на удаление										
docstate		ref_docstates	Ссылка на статус состояния документа										
pricetype	ТипЦен	ref_pricetypes	Ссылка на тип цены										
employee	Ответственный	ref_employees	Ссылка на сотрудника										
firm	Организация	ref_firms	Ссылка на собственную фирму										
store	Склад	ref_stores	Ссылка на склад										
buyer		ref_buyers	Ссылка на владельца / покупателя										
buypoint	Контрагент	ref_buypoints	Ссылка на торговую точку										
counteragent		ref_counteragents	Ссылка на контрагента / юр. лицо / плательщика										
agreement	ДоговорКонтрагента	ref_agreements	Ссылка на договор										
paytype		ref_paytypes	Ссылка на тип оплаты										
deliverydate	Дата		Планируемая дата доставки										
deliverytimefrom			Временной интервал доставки, от										
deliverytimetill			Временной интервал доставки, до										
comment	Комментарий		Произвольный комментарий										
extrarate	*Комментарий		Процент общей наценки / скидки на документ					лКонстанты.Вставить("СкидкаПоДокументу",лЗначение);					
includevat	*СуммаВключаетНДС		НДС включен в сумму										
usevat	*УчитыватьНДС		Учитывать НДС										
amount	СуммаДокумента		Сумма										
processed			Признак проведения документа										
status			Х										
													
Заявки (ТЧ)													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
deleted			Пометка на удаление		Товары	Х		"// строка ТЧ
//стрТЧ.СтавкаНДС = стрТЧ.Номенклатура.СтавкаНДС;
//стрТЧ.Размещение = лОбъект.СкладГруппа;
//стрТЧ.ЕдиницаИзмерения = ПолучитьЕдиницуТовара_10(стрТЧ, лПеременные.ЕдиницаПоКлассификатору);
стрТЧ.Количество = стрТЧ.Количество/стрТЧ.Коэффициент;

//стрТЧ.ПроцентСкидкиНаценки = -(стрТЧ.ПроцентСкидкиНаценки + лКонстанты.СкидкаПоДокументу)*100;

//ОбработкаТабличныхЧастей.ПриИзмененииНоменклатурыТабЧасти(стрТЧ, лОбъект);
//ОбработкаТабличныхЧастей.ЗаполнитьСтавкуНДСТабЧасти(стрТЧ, лОбъект);
//ОбработкаТабличныхЧастей.ЗаполнитьЕдиницуЦенуПродажиТабЧасти(стрТЧ, лОбъект, Константы.ВалютаРегламентированногоУчета);
//ОбработкаТабличныхЧастей.РассчитатьПлановуюСебестоимостьВСтрокеТабЧасти(стрТЧ, лОбъект, Константы.ВалютаРегламентированногоУчета);

СведенияОНоменклатуре = БухгалтерскийУчетПереопределяемый.ПолучитьСведенияОНоменклатуре(
	стрТЧ.Номенклатура, лКонстанты.ДанныеОбъекта, Ложь);
		
Если СведенияОНоменклатуре <> Неопределено Тогда
	стрТЧ.Цена					= СведенияОНоменклатуре.Цена;
	стрТЧ.СтавкаНДС		= СведенияОНоменклатуре.СтавкаНДС;
	стрТЧ.НомерГТД		= СведенияОНоменклатуре.НомерГТД;
	стрТЧ.СтранаПроисхождения	= СведенияОНоменклатуре.СтранаПроисхождения;
	
	ОбработкаТабличныхЧастейКлиентСервер.РассчитатьСуммуТабЧасти(стрТЧ);
	ОбработкаТабличныхЧастейКлиентСервер.РассчитатьСуммуНДСТабЧасти(стрТЧ, лОбъект.СуммаВключаетНДС);
КонецЕсли;"					
sku	Номенклатура	ref_skus	Ссылка на товар										
unit	ЕдиницаИзмерения	ref_units	Ссылка на единицу измерения									лПеременные.Вставить("ЕдиницаПоКлассификатору",XMLЗначение(Тип(элТЗЭ.Представление),лЗначение));	
pricetype		ref_pricetypes	Ссылка на тип цены										
factor	Коэффициент		Коэффициент пересчета в базовую единицу измерения										
quantity	Количество		Количество в выбранной единице измерения										
extrarate	*ПроцентСкидкиНаценки		Процент наценки / скидки										
vatrate	*СтавкаНДС		Процент ставки НДС										
price	Цена		Цена за выбранную единицу измерения без учета скидок / наценок										
													
													
ПКО													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
					Х	Х		"// шапка
лОбъект.Контрагент = лПеременные.Контрагент;

лОбъект.ВалютаДокумента = Константы.ВалютаРегламентированногоУчета.Получить();
лОбъект.ВидОперации = Перечисления.ВидыОперацийПКО.ОплатаПокупателя;
лОбъект.СтатьяДвиженияДенежныхСредств = ДП01_Значение; //Справочники.СтатьиДвиженияДенежныхСредств.ОплатаПокупателя;
//лОбъект.Касса = ПолучитьКассу(лОбъект.Организация);
лОбъект.ПринятоОт = ?(лОбъект.Контрагент=Неопределено,"""",?(ПустаяСтрока(лОбъект.Контрагент.НаименованиеПолное), лОбъект.Контрагент.Наименование, лОбъект.Контрагент.НаименованиеПолное));
//лОбъект.СтавкаНДС = Перечисления.СтавкиНДС.НДС18;
лОбъект.СтавкаНДС = Перечисления.СтавкиНДС.БезНДС;

//лОбъект.ОтражатьВУправленческомУчете = Истина;
//лОбъект.ОтражатьВБухгалтерскомУчете = Истина;
//лОбъект.ОтражатьВНалоговомУчете = Истина;
//лОбъект.ОтраженоВОперУчете = Истина;

лОбъект.Комментарий = ""#Mobicom# "" + лОбъект.Комментарий;

лОбъект.УстановитьВремя(РежимАвтоВремя.ТекущееИлиПоследним);
//лОбъект.УстановитьНовыйНомер(лОбъект.Организация.Префикс);"	"// заполняем счета учета
лОтборСчета = Новый Структура;
лОтборСчета.Вставить(""Реквизиты"",Новый Структура(""СчетКасса,СчетУчетаРасчетовСКонтрагентом,СчетУчетаРасчетовПоАвансам""));
СчетаУчетаВДокументах.Заполнить(лОбъект, лОтборСчета);"				
datetime	Дата		Дата и время документа										
printcode			Код объекта										
deleted	ПометкаУдаления		Пометка на удаление										
docstate		ref_docstates	Ссылка на статус состояния документа										
employee	Ответственный	ref_employees	Ссылка на сотрудника										
firm	Организация	ref_firms	Ссылка на собственную фирму										
cashregister	*Касса	ref_cashregisters	Ссылка на кассу										
buyer		ref_buyers	Ссылка на владельца / покупателя										
buypoint	Контрагент	ref_buypoints	Ссылка на торговую точку					лПеременные.Вставить("Контрагент",XMLЗначение(Тип(элТЗЭ.Представление),лЗначение));					
counteragent		ref_counteragents	Ссылка на контрагента / юр. лицо / плательщика										
agreement	ДоговорКонтрагента	ref_agreements	Ссылка на договор										
comment	Комментарий		Произвольный комментарий										
amount	СуммаДокумента		Сумма										
processed			Признак проведения документа										
													
ПКО (ТЧ)													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
deleted			Пометка на удаление		РасшифровкаПлатежа	Х		"// строка ТЧ
СтруктураКурсаВзаиморасчетов = РаботаСКурсамиВалют.ПолучитьКурсВалюты(лОбъект.ВалютаДокумента, лОбъект.Дата);
стрТЧ.КурсВзаиморасчетов = СтруктураКурсаВзаиморасчетов.Курс;
стрТЧ.КратностьВзаиморасчетов = СтруктураКурсаВзаиморасчетов.Кратность;

стрТЧ.СпособПогашенияЗадолженности = Перечисления.СпособыПогашенияЗадолженности.Автоматически;
стрТЧ.ПорядокОтраженияАванса = Перечисления.ПорядокОтраженияАвансов.ДоходУСН;

стрТЧ.СтатьяДвиженияДенежныхСредств = лОбъект.СтатьяДвиженияДенежныхСредств;
стрТЧ.СуммаВзаиморасчетов = стрТЧ.СуммаПлатежа; 
стрТЧ.ДоговорКонтрагента = лОбъект.ДоговорКонтрагента; 
//стрТЧ.СтавкаНДС	= Перечисления.СтавкиНДС.НДС18;
стрТЧ.СтавкаНДС	= Перечисления.СтавкиНДС.БезНДС;

//стрТЧ.ДокументРасчетовСКонтрагентом = ПолучитьОснованиеДляПКО(лПеременные.docinfo);

//УправлениеДенежнымиСредствами.ПересчитатьСуммуНДС(стрТЧ);"					
buypoint		ref_buypoints	Ссылка на торговую точку										
firm		ref_firms	Ссылка на собственную фирму										
counteragent		ref_counteragents	Ссылка на контрагента / юр. лицо / плательщика										
agreement		ref_agreements	Ссылка на договор										
docinfo	*ДокументРасчетовСКонтрагентом		Описание документа задолженности					лПеременные.Вставить("docinfo",лЗначение);					
amount	СуммаПлатежа		Сумма задолженности										
													
													
Возвраты													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
					Х	Х		"// шапка
//лОбъект.ВидПоступления = Перечисления.ВидыПоступленияТоваров.НаСклад;
лОбъект.ТипЦен = лОбъект.ДоговорКонтрагента.ТипЦен;

лОбъект.ВидОперации = Перечисления.ВидыОперацийВозвратТоваровОтПокупателя.ПродажаКомиссия;
//лОбъект.УчитыватьНДС = Истина;
лОбъект.СуммаВключаетНДС = лОбъект.ТипЦен.ЦенаВключаетНДС;

лОбъект.ВалютаДокумента = Константы.ВалютаРегламентированногоУчета.Получить();
СтруктураКурсаВзаиморасчетов = РаботаСКурсамиВалют.ПолучитьКурсВалюты(лОбъект.ВалютаДокумента, лОбъект.Дата);
лОбъект.КурсВзаиморасчетов = СтруктураКурсаВзаиморасчетов.Курс;
лОбъект.КратностьВзаиморасчетов = СтруктураКурсаВзаиморасчетов.Кратность;

//лОбъект.ОтражатьВУправленческомУчете = Истина;
//лОбъект.ОтражатьВБухгалтерскомУчете = Истина;
//лОбъект.ОтражатьВНалоговомУчете = Истина;

лОбъект.Комментарий = ""#Mobicom# "" + лОбъект.Комментарий;

лОбъект.УстановитьВремя(РежимАвтоВремя.ТекущееИлиПоследним);
//лОбъект.УстановитьНовыйНомер(лОбъект.Организация.Префикс);

лДанныеОбъекта = Новый Структура(
		""Дата, ВидОперации, Организация, Склад, Дата, ТипЦен, СуммаВключаетНДС,
		|ВалютаДокумента, КурсВзаиморасчетов, КратностьВзаиморасчетов,
		|ДеятельностьНаПатенте"");
ЗаполнитьЗначенияСвойств(лДанныеОбъекта, лОбъект);
лКонстанты.Вставить(""ДанныеОбъекта"", лДанныеОбъекта);"	"// заполняем счета учета
лОтборСчета = Новый Структура;
лОтборСчета.Вставить(""Реквизиты"",Новый Структура(""СчетУчетаРасчетовСКонтрагентом,СчетУчетаРасчетовПоАвансам,СчетУчетаРасчетовПоТаре,СчетУчета,СчетДоходов,Субконто,СчетУчетаНДСПоРеализации,СчетРасходов""));
СчетаУчетаВДокументах.Заполнить(лОбъект, лОтборСчета);"				
datetime	Дата		Дата и время документа										
printcode			Код объекта										
deleted	ПометкаУдаления		Пометка на удаление										
docstate		ref_docstates	Ссылка на статус состояния документа										
pricetype	*ТипЦен	ref_pricetypes	Ссылка на тип цены										
employee	Ответственный	ref_employees	Ссылка на сотрудника										
firm	Организация	ref_firms	Ссылка на собственную фирму										
store	Склад	ref_stores	Ссылка на склад										
buyer		ref_buyers	Ссылка на владельца / покупателя										
buypoint	Контрагент	ref_buypoints	Ссылка на торговую точку										
counteragent		ref_counteragents	Ссылка на контрагента / юр. лицо / плательщика										
agreement	ДоговорКонтрагента	ref_agreements	Ссылка на договор										
paytype		ref_paytypes	Ссылка на тип оплаты										
deliverydate			Планируемая дата доставки										
deliverytimefrom			Временной интервал доставки, от										
deliverytimetill			Временной интервал доставки, до										
comment	Комментарий		Произвольный комментарий										
extrarate			Процент общей наценки / скидки на документ										
includevat	*СуммаВключаетНДС		НДС включен в сумму										
usevat	*УчитыватьНДС		Учитывать НДС										
amount	СуммаДокумента		Сумма										
processed			Признак проведения документа										
													
Возвраты (ТЧ)													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
deleted			Пометка на удаление		Товары	Х		"// строка ТЧ
//стрТЧ.СтавкаНДС = стрТЧ.Номенклатура.СтавкаНДС;
//стрТЧ.ЕдиницаИзмерения = ПолучитьЕдиницуТовара_10(стрТЧ, лПеременные.ЕдиницаПоКлассификатору);
//стрТЧ.Количество = стрТЧ.Количество/стрТЧ.Коэффициент;

//ОбработкаТабличныхЧастей.ПриИзмененииНоменклатурыТабЧасти(стрТЧ, лОбъект);
//ОбработкаТабличныхЧастей.ЗаполнитьСтавкуНДСТабЧасти(стрТЧ, лОбъект); 
//ОбработкаТабличныхЧастей.ЗаполнитьЕдиницуЦенуПродажиТабЧасти(стрТЧ, лОбъект, Константы.ВалютаРегламентированногоУчета); 

СведенияОНоменклатуре = БухгалтерскийУчетПереопределяемый.ПолучитьСведенияОНоменклатуре(
	стрТЧ.Номенклатура, лКонстанты.ДанныеОбъекта, Ложь);
		
Если СведенияОНоменклатуре <> Неопределено Тогда
	стрТЧ.Цена					= СведенияОНоменклатуре.Цена;
	стрТЧ.СтавкаНДС		= СведенияОНоменклатуре.СтавкаНДС;
	стрТЧ.НомерГТД		= СведенияОНоменклатуре.НомерГТД;
	стрТЧ.СтранаПроисхождения	= СведенияОНоменклатуре.СтранаПроисхождения;
	
	ОбработкаТабличныхЧастейКлиентСервер.РассчитатьСуммуТабЧасти(стрТЧ);
	ОбработкаТабличныхЧастейКлиентСервер.РассчитатьСуммуНДСТабЧасти(стрТЧ, лОбъект.СуммаВключаетНДС);
КонецЕсли;"					
sku	Номенклатура	ref_skus	Ссылка на товар										
unit	*ЕдиницаИзмерения	ref_units	Ссылка на единицу измерения										
pricetype		ref_pricetypes	Ссылка на тип цены										
factor	*Коэффициент		Коэффициент пересчета в базовую единицу измерения										
quantity	Количество		Количество в выбранной единице измерения										
extrarate			Процент наценки / скидки										
vatrate	*СтавкаНДС		Процент ставки НДС										
price	Цена		Цена за выбранную единицу измерения без учета скидок / наценок										
overdue			Товар просрочен										
													
													
Перепись (сенсус) владельцев торговых точек													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
					Х	Х		"// заполнение данных
лОбъект.Комментарий = """"+ лПеременные.employee +"" # ""+ лПеременные.comment;

лСенсус = Неопределено;
лКонстанты.Свойство(""Сенсус"",лСенсус);
Если лСенсус=Неопределено Тогда
	лСенсус = Новый ТаблицаЗначений;
	лСенсус.Колонки.Добавить(""buyer"");
	лСенсус.Колонки.Добавить(""Ссылка"");
КонецЕсли;

элТЗЭ = ТипыЗначенийЭлементов.НайтиПоЗначению(""ref_buyers"");
Если ЗначениеЗаполнено(лПеременные.buyer_did) Тогда
	лОбъектСсылка = XMLЗначение(Тип(элТЗЭ.Представление),лПеременные.buyer_did);
	лОбъект = лОбъектСсылка.ПолучитьОбъект();
	СообщитьПодробно(""Обновляем объект ""+лОбъект+"" (""+лПеременные.buyer+"")"", СтатусСообщения.Обычное, Истина, ЗаписьВЖурнал);
Иначе
	стрТПО = ТаблицаПринятыхОбъектов.Найти(лПеременные.buyer, ""did"");
	Если стрТПО=Неопределено Тогда
		лОбъектСсылка = Справочники.Контрагенты.ПолучитьСсылку();
		лОбъект.УстановитьСсылкуНового(лОбъектСсылка);
	Иначе
		лОбъектСсылка = XMLЗначение(Тип(элТЗЭ.Представление), стрТПО.sid);
		лОбъект = лОбъектСсылка.ПолучитьОбъект();
		СообщитьПодробно(""Обновляем объект ""+лОбъект+"" (""+стрТПО.sid+"")"", СтатусСообщения.Обычное, Истина, ЗаписьВЖурнал);
	КонецЕсли;
КонецЕсли;

лОбъект.Наименование = ""#""+лПеременные.name;

лСтрСенсус = лСенсус.Добавить();
лСтрСенсус.buyer = лПеременные.buyer;
лСтрСенсус.Ссылка =лОбъектСсылка;

лКонстанты.Вставить(""Сенсус"",лСенсус);

ДополнительноеПодтверждение(лКонстанты, ""ref_buyers"", лОбъектСсылка, лПеременные.buyer, ТаблицаПринятыхОбъектов);"					
name	Наименование		Наименование					лПеременные.Вставить("name",лЗначение);					
printcode	*Код		Код объекта										
deleted	*ПометкаУдаления		Пометка на удаление										
store		ref_stores	Ссылка на склад отгрузки										
pricetype	*ТипЦен	ref_pricetypes	Ссылка на тип цен										
address	Комментарий		Адрес					лПеременные.Вставить("address",лЗначение);					
phone	Комментарий		Телефон					лПеременные.Вставить("phone",лЗначение);					
contact	Комментарий		Контактное лицо					лПеременные.Вставить("contact",лЗначение);					
canexceedlimit	*КонтролироватьЧислоДнейЗадолженности		Признак разрешения превышать срок кредита										
creditlimit	*ДопустимаяСуммаЗадолженности		Ограничение суммы кредита в основной валюте										
creditdeadline	*ДопустимоеЧислоДнейЗадолженности		Ограничение глубины кредита в днях										
maxorderamount			Ограничение максимальной сумма заказа										
minorderamount			Ограничение минимальной сумма заказа										
maxdiscount			Ограничение максимального процента скидки										
mindiscount			Ограничение минимального процента скидки										
censusapproved													
buyer	Комментарий	ref_buyers						лПеременные.Вставить("buyer",tag.firstChild.getAttribute("sid")); лПеременные.Вставить("buyer_did",tag.firstChild.getAttribute("did"));					
comment	Комментарий							лПеременные.Вставить("comment",лЗначение);					
employee	Комментарий	ref_employees						лПеременные.Вставить("employee",XMLЗначение(Тип(элТЗЭ.Представление),лЗначение));					
													
													
Сенсус (перепись) торговых точек													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
					Х	Х		"// заполнение данных
лСенсус = Неопределено;
лКонстанты.Свойство(""Сенсус"",лСенсус);
Если лСенсус=Неопределено Тогда
	лСенсус = Новый ТаблицаЗначений;
	лСенсус.Колонки.Добавить(""buyer"");
	лСенсус.Колонки.Добавить(""Ссылка"");
КонецЕсли;

лСенсусОК = Истина;
Если лПеременные.Свойство(""buyer"") Тогда
	стрСенсус = лСенсус.Найти(лПеременные.buyer,""buyer"");
Иначе
	стрСенсус = Неопределено;
КонецЕсли;
Если стрСенсус<>Неопределено Тогда
	лОбъект1=стрСенсус.Ссылка.ПолучитьОбъект();
	ЗаполнитьЗначенияСвойств(лОбъект1,лОбъект,,""Ссылка,Владелец"");
	лОбъект = лОбъект1;
	лОбъектСсылка = лОбъект.Ссылка;
	//лСенсус.Удалить(стрСенсус); // иначе если несколько новых точек заведены на одного нового владельца - они перезапишутся на одну точку
Иначе
	Попытка
		элТЗЭ = ТипыЗначенийЭлементов.НайтиПоЗначению(""ref_buypoints"");
		Если ЗначениеЗаполнено(лПеременные.buypoint_did) Тогда
			лОбъектСсылка = XMLЗначение(Тип(элТЗЭ.Представление),лПеременные.buypoint_did);
			лОбъект = лОбъектСсылка.ПолучитьОбъект();
			СообщитьПодробно(""Обновляем объект ""+лОбъект+"" (""+лПеременные.buypoint+"")"", СтатусСообщения.Обычное, Истина, ЗаписьВЖурнал);
		Иначе
			стрТПО = ТаблицаПринятыхОбъектов.Найти(лПеременные.buypoint, ""did"");
			Если стрТПО=Неопределено Тогда
				лОбъектСсылка = Справочники.Контрагенты.ПолучитьСсылку();
				лОбъект.УстановитьСсылкуНового(лОбъектСсылка);
				// вообще не красиво, но иначе никак. или КонтактныеЛицаКонтрагентов не заполнять
				лОбъект.Записать();
			Иначе
				лОбъектСсылка = XMLЗначение(Тип(элТЗЭ.Представление), стрТПО.sid);
				лОбъект = лОбъектСсылка.ПолучитьОбъект();
				СообщитьПодробно(""Обновляем объект ""+лОбъект+"" (""+стрТПО.sid+"")"", СтатусСообщения.Обычное, Истина, ЗаписьВЖурнал);
			КонецЕсли;
		КонецЕсли;
	Исключение
		СообщитьПодробно(""Не удалась промежуточная запись объекта ""+sid, СтатусСообщения.Важное, Истина, ЗаписьВЖурнал);
		СообщитьПодробно(ОписаниеОшибки(), СтатусСообщения.Важное, Истина, ЗаписьВЖурнал);
		лСенсусОК = Ложь;
	КонецПопытки;
	лОбъектСсылка = лОбъект.Ссылка; // норм или нет?
КонецЕсли;

лОбъект.Наименование = ""#""+лПеременные.name;
лОбъект.НаименованиеПолное = лПеременные.fullname;
лОбъект.Комментарий = """"+ лПеременные.employee +"" # ""+ лПеременные.comment;

Если лСенсусОК Тогда
	Если ЗначениеЗаполнено(лПеременные.address) Тогда
		лМенеджерЗаписи = РегистрыСведений.КонтактнаяИнформация.СоздатьМенеджерЗаписи();
		лМенеджерЗаписи.Объект = лОбъектСсылка;
		лМенеджерЗаписи.Тип = Перечисления.ТипыКонтактнойИнформации.Адрес;
		лМенеджерЗаписи.Вид = Справочники.ВидыКонтактнойИнформации.ФактАдресКонтрагента;
		лМенеджерЗаписи.Представление = лПеременные.address;
		лМенеджерЗаписи.Записать();
	КонецЕсли;

	Если ЗначениеЗаполнено(лПеременные.phone) Тогда
		лМенеджерЗаписи = РегистрыСведений.КонтактнаяИнформация.СоздатьМенеджерЗаписи();
		лМенеджерЗаписи.Объект = лОбъектСсылка;
		лМенеджерЗаписи.Тип = Перечисления.ТипыКонтактнойИнформации.Телефон;
		лМенеджерЗаписи.Вид = Справочники.ВидыКонтактнойИнформации.ТелефонКонтрагента;
		лМенеджерЗаписи.Представление = лПеременные.phone;
		лМенеджерЗаписи.Записать();
	КонецЕсли;

	Если ЗначениеЗаполнено(лПеременные.contact) Тогда
		лКонтакт = Справочники.КонтактныеЛица.СоздатьЭлемент();
		лКонтакт.Наименование = лПеременные.contact;
		лКонтакт.Записать();
		
		лКонтактКонтрагента = Справочники.КонтактныеЛицаКонтрагентов.СоздатьЭлемент();
		лКонтактКонтрагента.Владелец = лОбъектСсылка;
		лКонтактКонтрагента.КонтактноеЛицо = лКонтакт.Ссылка;
		лКонтактКонтрагента.Наименование = лКонтакт.Наименование;
		лКонтактКонтрагента.Записать();

		лОбъект.ОсновноеКонтактноеЛицо = лКонтактКонтрагента.Ссылка;
	КонецЕсли;
КонецЕсли;

лОбъект.Покупатель = Истина;
лОбъект.ЮрФизЛицо = Перечисления.ЮрФизЛицо.ЮрЛицо;

ДополнительноеПодтверждение(лКонстанты, ""ref_buypoints"", лОбъектСсылка, лПеременные.buypoint, ТаблицаПринятыхОбъектов);"					
name	Наименование		Наименование					лПеременные.Вставить("name",лЗначение);					
printcode	*Код		Код объекта										
deleted	*ПометкаУдаления		Пометка на удаление										
buyer	Комментарий	ref_buyers	Ссылка на владельца / покупателя					лПеременные.Вставить("buyer",tag.firstChild.getAttribute("sid"));					
store		ref_stores	Ссылка на склад отгрузки										
pricetype	*ТипЦен	ref_pricetypes	Ссылка на тип цен										
buypointtype	Родитель	ref_buypointtypes	Ссылка на тип торговой точки										
fullname	НаименованиеПолное		Полное наименование					лПеременные.Вставить("fullname",лЗначение);					
address	Комментарий		Адрес					лПеременные.Вставить("address",лЗначение);					
phone	Комментарий		Телефон					лПеременные.Вставить("phone",лЗначение);					
contact	Комментарий		Контактное лицо					лПеременные.Вставить("contact",лЗначение);					
vatstatus			Плательщик НДС										
canexceedlimit	*КонтролироватьЧислоДнейЗадолженности		Признак разрешения превышать срок кредита										
creditlimit	*ДопустимаяСуммаЗадолженности		Ограничение суммы кредита в основной валюте										
creditdeadline	*ДопустимоеЧислоДнейЗадолженности		Ограничение глубины кредита в днях										
maxorderamount			Ограничение максимальной сумма заказа										
minorderamount			Ограничение минимальной сумма заказа										
maxdiscount			Ограничение максимального процента скидки										
mindiscount			Ограничение минимального процента скидки										
extrarate			Процент наценки / скидки										
censusapproved													
buypoint	Комментарий	ref_buypoints						лПеременные.Вставить("buypoint",tag.firstChild.getAttribute("sid")); лПеременные.Вставить("buypoint_did",tag.firstChild.getAttribute("did"));					
comment	Комментарий							лПеременные.Вставить("comment",лЗначение);					
employee	Комментарий	ref_employees						лПеременные.Вставить("employee",XMLЗначение(Тип(элТЗЭ.Представление),лЗначение));					
													
													
Скидки													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
deleted			Пометка на удаление		"ВЫБРАТЬ
	СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки,
	СкидкиНаценкиНоменклатурыСрезПоследних.Номенклатура,
	ВЫБОР
		КОГДА СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки ССЫЛКА Справочник.ДоговорыКонтрагентов
			ТОГДА 2
		КОГДА СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки ССЫЛКА Справочник.Контрагенты
			ТОГДА 3
		ИНАЧЕ 9
	КОНЕЦ КАК ТипСкидки,
	СкидкиНаценкиНоменклатурыСрезПоследних.Период КАК ДатаНачала,
	СкидкиНаценкиНоменклатурыСрезПоследних.ДатаОкончания,
	ВЫБОР
		КОГДА СкидкиНаценкиНоменклатурыСрезПоследних.Условие = ЗНАЧЕНИЕ(Перечисление.УсловияСкидкиНаценки.ПоСуммеДокумента)
			ТОГДА 1
		КОГДА СкидкиНаценкиНоменклатурыСрезПоследних.Условие = ЗНАЧЕНИЕ(Перечисление.УсловияСкидкиНаценки.ПоКоличествуТовара)
			ТОГДА 0
		ИНАЧЕ 2
	КОНЕЦ КАК Условие,
	СкидкиНаценкиНоменклатурыСрезПоследних.ЗначениеУсловия,
	СкидкиНаценкиНоменклатурыСрезПоследних.ПроцентСкидкиНаценки КАК ПроцентСкидки,
	СкидкиНаценкиНоменклатурыСрезПоследних.ОграничениеСкидкиНаценки,
	СкидкиНаценкиНоменклатурыСрезПоследних.Валюта
ИЗ
	РегистрСведений.СкидкиНаценкиНоменклатуры.СрезПоследних(&ДатаФормирования, ) КАК СкидкиНаценкиНоменклатурыСрезПоследних
ГДЕ
	(СкидкиНаценкиНоменклатурыСрезПоследних.Условие = ЗНАЧЕНИЕ(Перечисление.УсловияСкидкиНаценки.ПоСуммеДокумента)
			ИЛИ СкидкиНаценкиНоменклатурыСрезПоследних.Условие = ЗНАЧЕНИЕ(Перечисление.УсловияСкидкиНаценки.ПоКоличествуТовара))
	И (СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки ССЫЛКА Справочник.ДоговорыКонтрагентов
			ИЛИ СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки ССЫЛКА Справочник.Контрагенты)
	И (СкидкиНаценкиНоменклатурыСрезПоследних.Номенклатура В (&Отбор_ref_skus)
			ИЛИ СкидкиНаценкиНоменклатурыСрезПоследних.Номенклатура = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка))
	И (СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки В (&Отбор_ref_buyers)
			ИЛИ СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки В (&Отбор_ref_agreements)
			ИЛИ СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки = ЗНАЧЕНИЕ(Справочник.Контрагенты.ПустаяСсылка)
			ИЛИ СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки = ЗНАЧЕНИЕ(Справочник.ДоговорыКонтрагентов.ПустаяСсылка))"	1	"// заполняем подборы
лОбъекты.Колонки.Добавить(""ПоДоговорам"");
лОбъекты.Колонки.Добавить(""ПоВладельцам"");
лОбъекты.Колонки.Добавить(""ПоТочкам"");
лОбъекты.Колонки.Добавить(""ПоТипамТочек"");
лОбъекты.Колонки.Добавить(""Ссылка"");

лТЗ_ПоДоговорам=Новый ТаблицаЗначений;
лТЗ_ПоДоговорам.Колонки.Добавить(""Сотрудник""); // employee
лТЗ_ПоДоговорам.Колонки.Добавить(""Элемент""); // item
лТЗ_ПоДоговорам.Колонки.Добавить(""Номенклатура""); // sku

лТЗ_ПоВладельцам = лТЗ_ПоДоговорам.Скопировать();
лТЗ_ПоТочкам = лТЗ_ПоДоговорам.Скопировать();
лТЗ_ПоТипамТочек = лТЗ_ПоДоговорам.Скопировать();

Для Каждого стрДоп Из лОбъекты Цикл
	лТЗ_ПоДоговорам.Очистить();
	лТЗ_ПоВладельцам.Очистить();
	//лТЗ_ПоТочкам.Очистить();
	//лТЗ_ПоТипамТочек.Очистить();
	
	Если НЕ ЗначениеЗаполнено(стрДоп.ПолучательСкидки) Тогда
		стрТЗ = лТЗ_ПоВладельцам.Добавить();
		стрТЗ.Номенклатура = стрДоп.Номенклатура;
		стрДоп.ТипСкидки = 3;
	ИначеЕсли стрДоп.ТипСкидки=2 Тогда // ПоДоговорам
		стрТЗ = лТЗ_ПоДоговорам.Добавить();
		стрТЗ.Элемент = стрДоп.ПолучательСкидки;
		стрТЗ.Номенклатура = стрДоп.Номенклатура;
	ИначеЕсли стрДоп.ТипСкидки=3 Тогда // ПоВладельцам
		стрТЗ = лТЗ_ПоВладельцам.Добавить();
		стрТЗ.Элемент = стрДоп.ПолучательСкидки;
		стрТЗ.Номенклатура = стрДоп.Номенклатура;
	КонецЕсли;
	
	стрДоп.ПоДоговорам = лТЗ_ПоДоговорам.Скопировать();
	стрДоп.ПоВладельцам = лТЗ_ПоВладельцам.Скопировать();
	стрДоп.ПоТочкам = лТЗ_ПоТочкам.Скопировать();
	стрДоп.ПоТипамТочек = лТЗ_ПоТипамТочек.Скопировать();

	стрДоп.Ссылка = XMLСтрока(стрДоп.Номенклатура)+""*""+стрДоп.Условие+""*""+стрДоп.ЗначениеУсловия+""*""+XMLСтрока(стрДоп.ПолучательСкидки);
КонецЦикла;"						
itemtype	ТипСкидки		Тип объекта скидки (0 - ТТ, 1 - тип ТТ, 2 - Договор, 3 - Владелец)										
datestart	ДатаНачала		Дата начала действия скидки										
dateend	ДатаОкончания		Дата окончания действия скидки										
conditiontype	Условие		Тип условия скидки (0 - количество, 1 - сумма, 2 - не определено)										
conditionvalue	ЗначениеУсловия		Значение условия скидки										
discountrate	ПроцентСкидки		Процент скидки										
extrarate			Процент наценки										
discountlimit	ОграничениеСкидкиНаценки		Максимальное ограничение суммы скидки										
currencytype			Тип валюты										
priority			Приоритет										
	#	ref_skus			ПАРАМЕТР								
	#	ref_agreements			ПАРАМЕТР								
	#	ref_buyers			ПАРАМЕТР								
	*#	ref_buypoints			ПАРАМЕТР								
	*#	ref_buypointtypes			ПАРАМЕТР								
													
													
Подбор договоров под скидку													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
deleted			Пометка на удаление		ПоДоговорам	Х							
discount	*ставится от родителя	ref_discounts	Ссылка на скидку										
employee	*Сотрудник	*ref_employees	Ссылка на сотрудника										
item	Элемент	*ref_agreements	Ссылка на договор										
sku	Номенклатура	*ref_skus	Ссылка на товар										
skuclassifier			Ссылка на классификатор										
													
													
Подбор владельцев под скидку													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
deleted			Пометка на удаление		ПоВладельцам	Х							
discount	*ставится от родителя	ref_discounts	Ссылка на скидку										
employee	*Сотрудник	*ref_employees	Ссылка на сотрудника										
item	Элемент	*ref_buyers	Ссылка на владельца										
classifier			Ссылка на классификатор										
sku	Номенклатура	*ref_skus	Ссылка на товар										
skuclassifier			Ссылка на классификатор										
													
													
Подбор торговых точек под скидку													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
deleted			Пометка на удаление		ПоТочкам	Х							
discount	*ставится от родителя	ref_discounts	Ссылка на скидку										
employee	*Сотрудник	*ref_employees	Ссылка на сотрудника										
item	Элемент	*ref_buypoints	Ссылка на ТТ										
classifier			Ссылка на классификатор										
sku	Номенклатура	*ref_skus	Ссылка на товар										
skuclassifier			Ссылка на классификатор										
													
													
Подбор типов торговых точек под скидку													
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке					
deleted			Пометка на удаление		ПоТипамТочек	Х							
discount	*ставится от родителя	ref_discounts	Ссылка на скидку										
employee	*Сотрудник	*ref_employees	Ссылка на сотрудника										
item	Элемент	*ref_buypointtypes	Ссылка на тип ТТ										
classifier			Ссылка на классификатор										
sku	Номенклатура	*ref_skus	Ссылка на товар										
skuclassifier			Ссылка на классификатор										