																					
																					
Параметр	Значение																				
Компания	---																				
Дистрибьютор	МобиКом																				
Версия	2016.06.10																				
Конфигурация	УТ103																				
																					
																					
Имя раздела	Наименование	Выключено	Замещение	Таб.часть	Связка	Отбор	Тип объекта	LocalStorage	Комментарий				УТ103_ТТ_Договора			УТ103_ТТ_КИ			УТ103_ЗаявкиВРеализацию		
ref_firms	Фирмы		false			Организации	С	+	Организации												
ref_stores	Склады		false			Склады	С	+	Склады												
ref_employees	Сотрудники		false			Пользователи	С	+	ФизическиеЛица												
ref_cashregisters	Кассы	Х	false				С	+	Кассы												
ref_pricetypes	Типы цен		false			*ТипыЦенНоменклатуры	С	+	ТипыЦенНоменклатуры												
ref_units	Единицы измерения (ОКЕИ)		false			*КлассификаторЕдиницИзмерения	С	+	КлассификаторЕдиницИзмерения												
ref_buyers	Владельцы / покупатели		false			Контрагенты	С	+	Контрагенты												
ref_counteragents	Контрагенты / юр.лица / плательщики		false			*Контрагенты	С	+	Контрагенты												
ref_buypointtypes	Типы торговых точек		false			*Контрагенты	С	+													
ref_buypoints	Торговые точки		false			*Контрагенты	С	+	Контрагенты				*ДоговорыКонтрагентов			ВидыКонтактнойИнформации					
ref_agreements	Договора		false			*ДоговорыКонтрагентов	С	+	ДоговорыКонтрагентов												
ref_agreementbuypoints	Обслуживаемые по договору ТТ		true				С														
ref_territories	Территории агентов		true				С														
ref_skugroups	Товарные группы		false			Номенклатура	С	+	Номенклатура												
ref_skus	Товары		false			Номенклатура	С	+	Номенклатура												
ref_skuunits	Единицы измерения товаров		true			*ЕдиницыИзмерения	С	+	ЕдиницыИзмерения												
ref_skuimages	Изображения товаров	Х	false				С	+	ХранилищеДополнительнойИнформации												
ref_docstates	Статусы состояния документа	Х	false				С	+													
ref_paytypes	Типы оплаты	Х	false			*НЕОПРЕДЕЛЕНО	С	+													
ref_attributes	Дополнительные атрибуты	Х	false			*СвойстваОбъектов	Х														
ref_attributeranges	Варианты значений доп.атрибутов	Х	false			*НЕОПРЕДЕЛЕНО	С														
ref_attributedefaults	Значения по умолчанию для доп.атрибутов	Х	true			*НЕОПРЕДЕЛЕНО	Р														
ref_classifiers	Классификаторы	Х	false				С														
ref_classifiervalues	Классификаторы (значения)	Х	false				С														
ref_skuclassifiers	Классификаторы товаров	Х	true				Р														
doc_invoices	(док) Продажи		false	doc_invoiceskus	invoice	*РеализацияТоваровУслуг	Д		РеализацияТоваровУслуг												
reg_rests	(рег) Остатки товаров		true				Р														
reg_debts	(рег) Задолженности		true				Р														
reg_mutual_payment	(рег) Взаиморасчеты	Х	true				Р														
reg_prices	(рег) Цены товаров		true				Р		ЦеныНоменклатуры												
ref_discounts	(рег) Скидки	Х	true	ref_discountagreements,ref_discountbuyers,ref_discountbuypoints,ref_discountbuypointtypes	discount		Р														
																					
Имя раздела	Наименование	Выключено	Замещение	Таб.часть	Связка	Отбор	Тип объекта		Комментарий												
doc_preorders	(док) Заявки		false	doc_preorderskus	preorder	ЗаказПокупателя	Д		ЗаказПокупателя										РеализацияТоваровУслуг		
doc_receiptcashorders	(док) ПКО		false	doc_receiptcashorderitems	receiptcashorder	ПриходныйКассовыйОрдер	Д		ПриходныйКассовыйОрдер												
doc_goodsreturns	(док) Возвраты		false	doc_goodsreturnskus	goodsreturn	ВозвратТоваровОтПокупателя	Д		ВозвратТоваровОтПокупателя												
ref_buyercensus	Новые владельцы	Х	false			Контрагенты	С														
ref_buypointcensus	Новые торг.точки	Х	false			Контрагенты	С														
ref_attributevalues	Значения дополнительных атрибутов	Х	false			ЗначенияСвойствОбъектов	Р														
																					
																					
																					
	Если в начале стоит * - реквизит не участвует в обмене	Если в начале стоит * - отбор по фильтру не используется																			
																					
Фирмы																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
name	Наименование		Наименование		"ВЫБРАТЬ
	Организации.Ссылка,
	Организации.Наименование,
	Организации.Код,
	Организации.ПометкаУдаления,
	ЕСТЬNULL(ВложенныйЗапросАдрес.Представление, """") КАК Адрес,
	ЕСТЬNULL(ВложенныйЗапросТелефон.Представление, """") КАК Телефон,
	НЕ ЕСТЬNULL(УчетнаяПолитикаНалоговыйУчетСрезПоследних.ОрганизацияНеЯвляетсяПлательщикомНДС, ЛОЖЬ) КАК ПлательщикНДС,
	Организации.ИНН,
	Организации.КПП
ИЗ
	Справочник.Организации КАК Организации
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			КонтактнаяИнформация.Представление КАК Представление,
			КонтактнаяИнформация.Объект КАК Объект
		ИЗ
			РегистрСведений.КонтактнаяИнформация КАК КонтактнаяИнформация
		ГДЕ
			КонтактнаяИнформация.Тип = ЗНАЧЕНИЕ(Перечисление.ТипыКонтактнойИнформации.Адрес)
			И КонтактнаяИнформация.Вид = ЗНАЧЕНИЕ(Справочник.ВидыКонтактнойИнформации.ФактАдресОрганизации)) КАК ВложенныйЗапросАдрес
		ПО Организации.Ссылка = ВложенныйЗапросАдрес.Объект

		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			КонтактнаяИнформация.Представление КАК Представление,
			КонтактнаяИнформация.Объект КАК Объект
		ИЗ
			РегистрСведений.КонтактнаяИнформация КАК КонтактнаяИнформация
		ГДЕ
			КонтактнаяИнформация.Тип = ЗНАЧЕНИЕ(Перечисление.ТипыКонтактнойИнформации.Телефон)
			И КонтактнаяИнформация.Вид = ЗНАЧЕНИЕ(Справочник.ВидыКонтактнойИнформации.ТелефонОрганизации)) КАК ВложенныйЗапросТелефон
		ПО Организации.Ссылка = ВложенныйЗапросТелефон.Объект

		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.УчетнаяПолитикаНалоговыйУчет.СрезПоследних(&ДатаФормирования, ) КАК УчетнаяПолитикаНалоговыйУчетСрезПоследних
		ПО Организации.Ссылка = УчетнаяПолитикаНалоговыйУчетСрезПоследних.Организация"	0															
printcode	Код		Код объекта																		
deleted	ПометкаУдаления		Пометка на удаление																		
address	Адрес		Адрес																		
phone	Телефон		Телефон																		
vatstatus	ПлательщикНДС		Плательщик НДС																		
inn	ИНН		ИНН																		
kpp	КПП		КПП																		
																					
																					
Склады																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
name	Наименование		Наименование		"ВЫБРАТЬ
	Склады.Ссылка,
	Склады.Наименование,
	Склады.Код,
	Склады.ПометкаУдаления
ИЗ
	Справочник.Склады КАК Склады
ГДЕ
	Склады.ЭтоГруппа = ЛОЖЬ"	1															
printcode	Код		Код объекта																		
deleted	ПометкаУдаления		Пометка на удаление																		
																					
																					
Сотрудники																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
name	Наименование		Наименование		"ВЫБРАТЬ
	Пользователи.Ссылка,
	Пользователи.Наименование,
	Пользователи.Код,
	Пользователи.ПометкаУдаления,
	ЕСТЬNULL(ФИОФизЛицСрезПоследних.Имя,"""") КАК Имя,
	ЕСТЬNULL(ФИОФизЛицСрезПоследних.Фамилия,"""") КАК Фамилия,
	ЕСТЬNULL(ФИОФизЛицСрезПоследних.Отчество,"""") КАК Отчество,
	ЕСТЬNULL(ВложенныйЗапросСклады.СтруктурнаяЕдиница,НЕОПРЕДЕЛЕНО) КАК Склад
ИЗ
	Справочник.Пользователи КАК Пользователи
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ФИОФизЛиц.СрезПоследних КАК ФИОФизЛицСрезПоследних
		ПО Пользователи.ФизЛицо = ФИОФизЛицСрезПоследних.ФизЛицо
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			ОтветственныеЛицаСрезПоследних.СтруктурнаяЕдиница КАК СтруктурнаяЕдиница,
			ОтветственныеЛицаСрезПоследних.ФизическоеЛицо КАК ФизическоеЛицо
		ИЗ
			РегистрСведений.ОтветственныеЛица.СрезПоследних(&ДатаФормирования, ) КАК ОтветственныеЛицаСрезПоследних
		ГДЕ
			ТИПЗНАЧЕНИЯ(ОтветственныеЛицаСрезПоследних.СтруктурнаяЕдиница) = ТИП(Справочник.Склады)) КАК ВложенныйЗапросСклады
		ПО Пользователи.ФизЛицо = ВложенныйЗапросСклады.ФизическоеЛицо
ГДЕ
	Пользователи.ЭтоГруппа = ЛОЖЬ"	1															
printcode	Код		Код объекта																		
deleted	ПометкаУдаления		Пометка на удаление																		
store	*Склад	ref_stores	Ссылка на склад		ВложенныйЗапросСклады.СтруктурнаяЕдиница																
firstname	Имя		Имя																		
lastname	Фамилия		Фамилия																		
middlename	Отчество		Отчество																		
inn			ИНН																		
post			Должность																		
phone			Телефон																		
route			Номер маршрута																		
startlatitude			Отправная точка движения по маршруту: широта																		
startlongitude			Отправная точка движения по маршруту: долгота																		
finishlatitude			Конечная точка движения по маршруту: широта																		
finishlongitude			Конечная точка движения по маршруту: долгота																		
plannedtrackweekcount			Число недель планируемого маршрута																		
																					
																					
Кассы																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
name	Наименование		Наименование		"ВЫБРАТЬ
	Кассы.Ссылка,
	Кассы.Наименование,
	Кассы.Код,
	Кассы.ПометкаУдаления,
	Кассы.Владелец КАК Организация
ИЗ
	Справочник.Кассы КАК Кассы"	0				"ВЫБРАТЬ
	Кассы.Ссылка,
	Кассы.Наименование,
	Кассы.Код,
	Кассы.ПометкаУдаления,
	Кассы.Владелец КАК Организация,
	ЕСТЬNULL(ВложенныйЗапросКассы.ФизическоеЛицо, НЕОПРЕДЕЛЕНО) КАК ФизическоеЛицо
ИЗ
	Справочник.Кассы КАК Кассы
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			ОтветственныеЛицаСрезПоследних.СтруктурнаяЕдиница КАК СтруктурнаяЕдиница,
			ОтветственныеЛицаСрезПоследних.ФизическоеЛицо КАК ФизическоеЛицо
		ИЗ
			РегистрСведений.ОтветственныеЛица.СрезПоследних(&ДатаФормирования, ) КАК ОтветственныеЛицаСрезПоследних
		ГДЕ
			ТИПЗНАЧЕНИЯ(ОтветственныеЛицаСрезПоследних.СтруктурнаяЕдиница) = ТИП(Справочник.Склады)) КАК ВложенныйЗапросКассы
		ПО Кассы.Ссылка = ВложенныйЗапросКассы.СтруктурнаяЕдиница"											
printcode	Код		Код объекта																		
deleted	ПометкаУдаления		Пометка на удаление																		
firm	Организация	ref_firms	Ссылка на собственную фирму		Кассы.Владелец																
employee	*ФизическоеЛицо	ref_employees	Ссылка на сотрудника		ВложенныйЗапросКассы.ФизическоеЛицо,																
store		*ref_stores	Ссылка на склад																		
																					
																					
Типы цен																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
name	Наименование		Наименование		"ВЫБРАТЬ
	ТипыЦенНоменклатуры.Ссылка,
	ТипыЦенНоменклатуры.Наименование,
	ТипыЦенНоменклатуры.Код,
	ТипыЦенНоменклатуры.ПометкаУдаления,
	ВЫБОР
		КОГДА ТипыЦенНоменклатуры.Рассчитывается
			ТОГДА ТипыЦенНоменклатуры.БазовыйТипЦен
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК БазовыйТипЦен,
	ВЫБОР
		КОГДА ТипыЦенНоменклатуры.Рассчитывается
			ТОГДА ТипыЦенНоменклатуры.ПроцентСкидкиНаценки
		ИНАЧЕ 0
	КОНЕЦ КАК ПроцентСкидкиНаценки
ИЗ
	Справочник.ТипыЦенНоменклатуры КАК ТипыЦенНоменклатуры"	0	"// сортируем типы цен
лОбъекты.Колонки.Добавить(""Представление"");
Для Каждого стрДоп Из лОбъекты Цикл
	лТЦ = стрДоп;
	лПредставление = """";
	Пока ЗначениеЗаполнено(лТЦ.БазовыйТипЦен) Цикл
		лТЦ = лТЦ.БазовыйТипЦен;
		Если НЕ лТЦ=Неопределено Тогда
			лПредставление = лТЦ.Наименование+""\""+лПредставление;
		Иначе
			лПредставление = ""---\""+лПредставление;
			Прервать;
		КонецЕсли;
	КонецЦикла;
	стрДоп.Представление = лПредставление + стрДоп.Наименование;
КонецЦикла;
лОбъекты.Сортировать(""Представление"");"														
printcode	Код		Код объекта																		
deleted	ПометкаУдаления		Пометка на удаление																		
parentpricetype	БазовыйТипЦен	*ref_pricetypes	Ссылка на базовый тип цены																		
extrarate	ПроцентСкидкиНаценки		Процент наценки на цену базового типа																		
																					
																					
Единицы измерения (ОКЕИ)																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
name	Наименование		Наименование		"ВЫБРАТЬ
	КлассификаторЕдиницИзмерения.Ссылка,
	КлассификаторЕдиницИзмерения.Наименование,
	КлассификаторЕдиницИзмерения.Код,
	КлассификаторЕдиницИзмерения.ПометкаУдаления,
	КлассификаторЕдиницИзмерения.Наименование КАК КраткоеНаименование
ИЗ
	Справочник.КлассификаторЕдиницИзмерения КАК КлассификаторЕдиницИзмерения"	0															
printcode	Код		Код объекта																		
deleted	ПометкаУдаления		Пометка на удаление																		
shortname	КраткоеНаименование		Короткое наименование																		
																					
																					
Владельцы / покупатели																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
name	Наименование		Наименование		"ВЫБРАТЬ
	Контрагенты.Ссылка,
	Контрагенты.Наименование,
	Контрагенты.Код,
	Контрагенты.ПометкаУдаления,
	ВЫБОР
		КОГДА Контрагенты.ОсновнойДоговорКонтрагента.ТипЦен ССЫЛКА Справочник.ТипыЦенНоменклатуры
			ТОГДА Контрагенты.ОсновнойДоговорКонтрагента.ТипЦен
		КОГДА Контрагенты.ОсновнойДоговорКонтрагента.ТипЦен ССЫЛКА Справочник.ТипыЦенНоменклатурыКонтрагентов
			ТОГДА Контрагенты.ОсновнойДоговорКонтрагента.ТипЦен.ТипЦеныНоменклатуры
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК ТипЦен,
	ЕСТЬNULL(ВложенныйЗапросАдрес.Представление, """") КАК Адрес,
	ЕСТЬNULL(ВложенныйЗапросТелефон.Представление, """") КАК Телефон,
	ЕСТЬNULL(Контрагенты.ОсновноеКонтактноеЛицо.Наименование, """") КАК КонтактноеЛицо,
	ЕСТЬNULL(Контрагенты.ОсновнойДоговорКонтрагента.КонтролироватьЧислоДнейЗадолженности, ЛОЖЬ) КАК КонтролироватьЧислоДнейЗадолженности,
	ЕСТЬNULL(Контрагенты.ОсновнойДоговорКонтрагента.ВалютаВзаиморасчетов, НЕОПРЕДЕЛЕНО) КАК ВалютаВзаиморасчетов,
	ЕСТЬNULL(Контрагенты.ОсновнойДоговорКонтрагента.ДопустимаяСуммаЗадолженности, 0) КАК ДопустимаяСуммаЗадолженности,
	ЕСТЬNULL(Контрагенты.ОсновнойДоговорКонтрагента.ДопустимоеЧислоДнейЗадолженности, 0) КАК ДопустимоеЧислоДнейЗадолженности
ИЗ
	Справочник.Контрагенты КАК Контрагенты
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			КонтактнаяИнформация.Представление КАК Представление,
			КонтактнаяИнформация.Объект КАК Объект
		ИЗ
			РегистрСведений.КонтактнаяИнформация КАК КонтактнаяИнформация
		ГДЕ
			КонтактнаяИнформация.Тип = ЗНАЧЕНИЕ(Перечисление.ТипыКонтактнойИнформации.Адрес)
			И КонтактнаяИнформация.Вид = ЗНАЧЕНИЕ(Справочник.ВидыКонтактнойИнформации.ФактАдресКонтрагента)) КАК ВложенныйЗапросАдрес
		ПО Контрагенты.Ссылка = ВложенныйЗапросАдрес.Объект
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			КонтактнаяИнформация.Представление КАК Представление,
			КонтактнаяИнформация.Объект КАК Объект
		ИЗ
			РегистрСведений.КонтактнаяИнформация КАК КонтактнаяИнформация
		ГДЕ
			КонтактнаяИнформация.Тип = ЗНАЧЕНИЕ(Перечисление.ТипыКонтактнойИнформации.Телефон)
			И КонтактнаяИнформация.Вид = ЗНАЧЕНИЕ(Справочник.ВидыКонтактнойИнформации.ТелефонКонтрагента)) КАК ВложенныйЗапросТелефон
		ПО Контрагенты.Ссылка = ВложенныйЗапросТелефон.Объект
ГДЕ
	Контрагенты.ЭтоГруппа = ЛОЖЬ
	И Контрагенты.Покупатель = ИСТИНА"	1															
printcode	Код		Код объекта																		
deleted	ПометкаУдаления		Пометка на удаление																		
store		ref_stores	Ссылка на склад отгрузки																		
pricetype	*ТипЦен	*ref_pricetypes	Ссылка на тип цен		Контрагенты.ОсновнойДоговорКонтрагента.ТипЦен																
address	Адрес		Адрес																		
phone	Телефон		Телефон																		
contact	КонтактноеЛицо		Контактное лицо																		
canexceedlimit	*КонтролироватьЧислоДнейЗадолженности		Признак разрешения превышать срок кредита																		
creditlimit	*ДопустимаяСуммаЗадолженности		Ограничение суммы кредита в основной валюте																		
creditdeadline	*ДопустимоеЧислоДнейЗадолженности		Ограничение глубины кредита в днях																		
maxorderamount			Ограничение максимальной сумма заказа																		
minorderamount			Ограничение минимальной сумма заказа																		
maxdiscount			Ограничение максимального процента скидки																		
mindiscount			Ограничение минимального процента скидки																		
																					
																					
Контрагенты / юр.лица / плательщики																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
name	Наименование		Наименование		"ВЫБРАТЬ
	Контрагенты.Ссылка,
	Контрагенты.Наименование,
	Контрагенты.Код,
	Контрагенты.ПометкаУдаления,
	Контрагенты.Ссылка КАК Покупатель,
	ЕСТЬNULL(ВложенныйЗапросАдрес.Представление, """") КАК Адрес,
	ЕСТЬNULL(ВложенныйЗапросТелефон.Представление, """") КАК Телефон,
	ВЫБОР
		КОГДА Контрагенты.ЮрФизЛицо = ЗНАЧЕНИЕ(Перечисление.ЮрФизЛицо.ЮрЛицо)
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК ЮрЛицо,
	Контрагенты.ИНН,
	Контрагенты.КПП,
	""р/с "" + ЕСТЬNULL(Контрагенты.ОсновнойБанковскийСчет.НомерСчета, ""--"") + "", "" + ""в банке "" + ЕСТЬNULL(Контрагенты.ОсновнойБанковскийСчет.Банк.Наименование, ""--"") + "", "" + ""БИК "" + ЕСТЬNULL(Контрагенты.ОсновнойБанковскийСчет.Банк.Код, ""--"") + "", "" + ""к/с "" + ЕСТЬNULL(Контрагенты.ОсновнойБанковскийСчет.Банк.КоррСчет, ""--"") КАК БанкРеквизиты,
	Контрагенты.КодПоОКПО КАК ОКПО
ИЗ
	Справочник.Контрагенты КАК Контрагенты
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			КонтактнаяИнформация.Представление КАК Представление,
			КонтактнаяИнформация.Объект КАК Объект
		ИЗ
			РегистрСведений.КонтактнаяИнформация КАК КонтактнаяИнформация
		ГДЕ
			КонтактнаяИнформация.Тип = ЗНАЧЕНИЕ(Перечисление.ТипыКонтактнойИнформации.Адрес)
			И КонтактнаяИнформация.Вид = ЗНАЧЕНИЕ(Справочник.ВидыКонтактнойИнформации.ФактАдресКонтрагента)) КАК ВложенныйЗапросАдрес
		ПО Контрагенты.Ссылка = ВложенныйЗапросАдрес.Объект
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			КонтактнаяИнформация.Представление КАК Представление,
			КонтактнаяИнформация.Объект КАК Объект
		ИЗ
			РегистрСведений.КонтактнаяИнформация КАК КонтактнаяИнформация
		ГДЕ
			КонтактнаяИнформация.Тип = ЗНАЧЕНИЕ(Перечисление.ТипыКонтактнойИнформации.Телефон)
			И КонтактнаяИнформация.Вид = ЗНАЧЕНИЕ(Справочник.ВидыКонтактнойИнформации.ТелефонКонтрагента)) КАК ВложенныйЗапросТелефон
		ПО Контрагенты.Ссылка = ВложенныйЗапросТелефон.Объект"	0															
printcode	Код		Код объекта																		
deleted	ПометкаУдаления		Пометка на удаление																		
buyer	Покупатель	ref_buyers	Ссылка на владельца / покупателя		Контрагенты.Ссылка																
address	Адрес		Адрес																		
phone	Телефон		Телефон																		
vatstatus			Плательщик НДС																		
juridical	ЮрЛицо		Признак юридического лица																		
inn	ИНН		ИНН																		
kpp	КПП		КПП																		
bank	БанкРеквизиты		Банковские реквизиты																		
okpo	ОКПО		ОКПО																		
																					
																					
Типы торговых точек																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
name	ПолноеНаименование		Наименование		"ВЫБРАТЬ
	Контрагенты.Ссылка КАК Ссылка,
	Контрагенты.Код,
	Контрагенты.ЭтоГруппа,
	Контрагенты.ПометкаУдаления
ИЗ
	Справочник.Контрагенты КАК Контрагенты
<ГДЕ ?>
ИТОГИ ПО
	Ссылка ТОЛЬКО ИЕРАРХИЯ"	0	"//полные имена групп
лОбъекты.Колонки.Добавить(""ПолноеНаименование"");
колстр = лОбъекты.Количество();
Для Инд=1 По колстр Цикл
	стрДоп=лОбъекты.Получить(колстр-Инд);
	Если ЗначениеЗаполнено(стрДоп.Ссылка) Тогда
		Если стрДоп.ЭтоГруппа Тогда
			стрДоп.ПолноеНаименование = стрДоп.Ссылка.ПолноеНаименование();
		Иначе
			лОбъекты.Удалить(стрДоп);
		КонецЕсли;
	Иначе
		лОбъекты.Удалить(стрДоп);
	КонецЕсли;
КонецЦикла;
лОбъекты.Свернуть(""Ссылка,ПолноеНаименование,Код,ПометкаУдаления"");
лОбъекты.Сортировать(""ПолноеНаименование"");"														
printcode	Код		Код объекта																		
deleted	ПометкаУдаления		Пометка на удаление																		
	#	ref_buyers			Контрагенты.Ссылка																
																					
																					
Торговые точки																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
name	Наименование		Наименование		"ВЫБРАТЬ
	Контрагенты.Ссылка,
	Контрагенты.Наименование,
	Контрагенты.Код,
	Контрагенты.ПометкаУдаления,
	Контрагенты.Ссылка КАК Покупатель,
	ВЫБОР
		КОГДА Контрагенты.ОсновнойДоговорКонтрагента.ТипЦен ССЫЛКА Справочник.ТипыЦенНоменклатуры
			ТОГДА Контрагенты.ОсновнойДоговорКонтрагента.ТипЦен
		КОГДА Контрагенты.ОсновнойДоговорКонтрагента.ТипЦен ССЫЛКА Справочник.ТипыЦенНоменклатурыКонтрагентов
			ТОГДА Контрагенты.ОсновнойДоговорКонтрагента.ТипЦен.ТипЦеныНоменклатуры
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК ТипЦен,
	Контрагенты.Родитель,
	Контрагенты.НаименованиеПолное,
	ЕСТЬNULL(ВложенныйЗапросАдрес.Представление, """") КАК Адрес,
	ЕСТЬNULL(ВложенныйЗапросТелефон.Представление, """") КАК Телефон,
	ЕСТЬNULL(Контрагенты.ОсновноеКонтактноеЛицо.Наименование, """") КАК КонтактноеЛицо,
	ЕСТЬNULL(Контрагенты.ОсновнойДоговорКонтрагента.КонтролироватьЧислоДнейЗадолженности, ЛОЖЬ) КАК КонтролироватьЧислоДнейЗадолженности,
	ЕСТЬNULL(Контрагенты.ОсновнойДоговорКонтрагента.ВалютаВзаиморасчетов, НЕОПРЕДЕЛЕНО) КАК ВалютаВзаиморасчетов,
	ЕСТЬNULL(Контрагенты.ОсновнойДоговорКонтрагента.ДопустимаяСуммаЗадолженности, 0) КАК ДопустимаяСуммаЗадолженности,
	ЕСТЬNULL(Контрагенты.ОсновнойДоговорКонтрагента.ДопустимоеЧислоДнейЗадолженности, 0) КАК ДопустимоеЧислоДнейЗадолженности
ИЗ
	Справочник.Контрагенты КАК Контрагенты
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			КонтактнаяИнформация.Представление КАК Представление,
			КонтактнаяИнформация.Объект КАК Объект
		ИЗ
			РегистрСведений.КонтактнаяИнформация КАК КонтактнаяИнформация
		ГДЕ
			КонтактнаяИнформация.Тип = ЗНАЧЕНИЕ(Перечисление.ТипыКонтактнойИнформации.Адрес)
			И КонтактнаяИнформация.Вид = ЗНАЧЕНИЕ(Справочник.ВидыКонтактнойИнформации.ФактАдресКонтрагента)) КАК ВложенныйЗапросАдрес
		ПО Контрагенты.Ссылка = ВложенныйЗапросАдрес.Объект
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			КонтактнаяИнформация.Представление КАК Представление,
			КонтактнаяИнформация.Объект КАК Объект
		ИЗ
			РегистрСведений.КонтактнаяИнформация КАК КонтактнаяИнформация
		ГДЕ
			КонтактнаяИнформация.Тип = ЗНАЧЕНИЕ(Перечисление.ТипыКонтактнойИнформации.Телефон)
			И КонтактнаяИнформация.Вид = ЗНАЧЕНИЕ(Справочник.ВидыКонтактнойИнформации.ТелефонКонтрагента)) КАК ВложенныйЗапросТелефон
		ПО Контрагенты.Ссылка = ВложенныйЗапросТелефон.Объект"	0							НаименованиеТТ	"ВЫБРАТЬ
	ДоговорыКонтрагентов.Ссылка,
	ДоговорыКонтрагентов.Наименование,
	ДоговорыКонтрагентов.Наименование КАК Адрес,
	ДоговорыКонтрагентов.Владелец.Наименование КАК НаименованиеТТ,
	ДоговорыКонтрагентов.Владелец.НаименованиеПолное КАК НаименованиеПолное,
	ДоговорыКонтрагентов.Код,
	ДоговорыКонтрагентов.ПометкаУдаления,
	ДоговорыКонтрагентов.Организация,
	ДоговорыКонтрагентов.Владелец,
	ДоговорыКонтрагентов.Владелец.Родитель КАК Родитель,
	ВЫБОР
		КОГДА ДоговорыКонтрагентов.ТипЦен ССЫЛКА Справочник.ТипыЦенНоменклатуры
			ТОГДА ДоговорыКонтрагентов.ТипЦен
		КОГДА ДоговорыКонтрагентов.ТипЦен ССЫЛКА Справочник.ТипыЦенНоменклатурыКонтрагентов
			ТОГДА ДоговорыКонтрагентов.ТипЦен.ТипЦеныНоменклатуры
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК ТипЦен,
	ДоговорыКонтрагентов.Дата,
	ДоговорыКонтрагентов.СрокДействия,
	ДоговорыКонтрагентов.КонтролироватьЧислоДнейЗадолженности,
	ДоговорыКонтрагентов.ДопустимаяСуммаЗадолженности,
	ДоговорыКонтрагентов.ДопустимоеЧислоДнейЗадолженности
ИЗ
	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
ГДЕ
	ДоговорыКонтрагентов.ЭтоГруппа = ЛОЖЬ
	И ДоговорыКонтрагентов.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровКонтрагентов.СПокупателем)"	1		"ВЫБРАТЬ
	КонтактнаяИнформация.Объект КАК Владелец,
	КонтактнаяИнформация.Вид,
	КонтактнаяИнформация.Представление КАК Адрес,
	КонтактнаяИнформация.Объект.Наименование КАК Наименование,
	КонтактнаяИнформация.Объект.Код КАК Код,
	КонтактнаяИнформация.Объект.Родитель КАК Родитель,
	КонтактнаяИнформация.Объект.НаименованиеПолное КАК НаименованиеПолное
ИЗ
	РегистрСведений.КонтактнаяИнформация КАК КонтактнаяИнформация
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ВидыКонтактнойИнформации КАК ВидыКонтактнойИнформации
		ПО КонтактнаяИнформация.Вид = ВидыКонтактнойИнформации.Ссылка"	0			
printcode	Код		Код объекта												лКонстанты.Вставить("Договора", лОбъекты.Скопировать());			"// генерация sid
лОбъекты.Колонки.Добавить(""Ссылка"");
Для Каждого стрДоп Из лОбъекты Цикл
	стрДоп.Ссылка = XMLСтрока(стрДоп.Владелец)+""***""+XMLСтрока(стрДоп.Вид);
КонецЦикла;

лАвтоИдентификатор = Ложь;"			
deleted	ПометкаУдаления		Пометка на удаление													*ПометкаУдаления					
buyer	Покупатель	ref_buyers	Ссылка на владельца / покупателя		Контрагенты.Ссылка								Владелец	ДоговорыКонтрагентов.Владелец		Владелец	КонтактнаяИнформация.Объект				
store		ref_stores	Ссылка на склад отгрузки											*							
pricetype	*ТипЦен	*ref_pricetypes	Ссылка на тип цен		Контрагенты.ОсновнойДоговорКонтрагента.ТипЦен									*							
buypointtype	Родитель	*ref_buypointtypes	Ссылка на тип торговой точки											*							
fullname	НаименованиеПолное		Полное наименование																		
address	Адрес		Адрес										Адрес								
phone	Телефон		Телефон										*Телефон			*Телефон					
contact	КонтактноеЛицо		Контактное лицо										*КонтактноеЛицо			*КонтактноеЛицо					
vatstatus			Плательщик НДС																		
canexceedlimit	*КонтролироватьЧислоДнейЗадолженности		Признак разрешения превышать срок кредита																		
creditlimit	*ДопустимаяСуммаЗадолженности		Ограничение суммы кредита в основной валюте																		
creditdeadline	*ДопустимоеЧислоДнейЗадолженности		Ограничение глубины кредита в днях																		
maxorderamount			Ограничение максимальной сумма заказа																		
minorderamount			Ограничение минимальной сумма заказа																		
maxdiscount			Ограничение максимального процента скидки																		
mindiscount			Ограничение минимального процента скидки																		
extrarate			Процент наценки / скидки																		
																					
																					
Договора																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
name	Наименование		Наименование		"ВЫБРАТЬ
	ДоговорыКонтрагентов.Ссылка,
	ДоговорыКонтрагентов.Наименование,
	ДоговорыКонтрагентов.Код,
	ДоговорыКонтрагентов.ПометкаУдаления,
	ДоговорыКонтрагентов.Организация,
	ДоговорыКонтрагентов.Владелец,
	ВЫБОР
		КОГДА ДоговорыКонтрагентов.ТипЦен ССЫЛКА Справочник.ТипыЦенНоменклатуры
			ТОГДА ДоговорыКонтрагентов.ТипЦен
		КОГДА ДоговорыКонтрагентов.ТипЦен ССЫЛКА Справочник.ТипыЦенНоменклатурыКонтрагентов
			ТОГДА ДоговорыКонтрагентов.ТипЦен.ТипЦеныНоменклатуры
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК ТипЦен,
	ВЫБОР
		КОГДА ДоговорыКонтрагентов.Дата = ДАТАВРЕМЯ(1, 1, 1)
			ТОГДА ДАТАВРЕМЯ(1900, 1, 1)
		ИНАЧЕ ДоговорыКонтрагентов.Дата
	КОНЕЦ КАК Дата,
	ВЫБОР
		КОГДА ДоговорыКонтрагентов.СрокДействия = ДАТАВРЕМЯ(1, 1, 1)
			ТОГДА ДАТАВРЕМЯ(2100, 1, 1)
		ИНАЧЕ ДоговорыКонтрагентов.СрокДействия
	КОНЕЦ КАК СрокДействия,
	ДоговорыКонтрагентов.КонтролироватьЧислоДнейЗадолженности,
	ДоговорыКонтрагентов.ДопустимаяСуммаЗадолженности,
	ДоговорыКонтрагентов.ДопустимоеЧислоДнейЗадолженности
ИЗ
	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
ГДЕ
	ДоговорыКонтрагентов.ЭтоГруппа = ЛОЖЬ
	И ДоговорыКонтрагентов.ВидДоговора = ЗНАЧЕНИЕ(Перечисление.ВидыДоговоровКонтрагентов.СПокупателем)"	1								ВЫБРАТЬ 1 КАК Поле1	0						
printcode	Код		Код объекта												лОбъекты = лКонстанты.Договора;						
deleted	ПометкаУдаления		Пометка на удаление																		
firm	Организация	ref_firms	Ссылка на собственную фирму		ДоговорыКонтрагентов.Организация									*							
counteragent	Владелец	ref_counteragents	Ссылка на контрагента / юр. лицо / покупателя		ДоговорыКонтрагентов.Владелец									*							
pricetype	ТипЦен	*ref_pricetypes	Ссылка на тип цен		ДоговорыКонтрагентов.ТипЦен									*							
startdate	Дата		Дата начала действия договора																		
enddate	СрокДействия		Дата окончания действия договора																		
canexceedlimit	КонтролироватьЧислоДнейЗадолженности		Признак разрешения превышать срок кредита																		
creditlimit	ДопустимаяСуммаЗадолженности		Ограничение суммы кредита в основной валюте																		
creditdeadline	ДопустимоеЧислоДнейЗадолженности		Ограничение глубины кредита в днях																		
maxorderamount			Ограничение максимальной сумма заказа																		
minorderamount			Ограничение минимальной сумма заказа																		
maxdiscount			Ограничение максимального процента скидки																		
mindiscount			Ограничение минимального процента скидки																		
													#	НЕОПРЕДЕЛЕНО	ref_buypoints						
																					
																					
Обслуживаемые по договору ТТ																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted	*ПометкаУдаления		Пометка на удаление		"ВЫБРАТЬ
	ДоговорыКонтрагентов.Ссылка КАК Договор,
	ДоговорыКонтрагентов.Владелец,
	ВЫБОР
		КОГДА ДоговорыКонтрагентов.Владелец.ОсновнойДоговорКонтрагента = ДоговорыКонтрагентов.Ссылка
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК ОсновнойДоговор,
	ДоговорыКонтрагентов.ПометкаУдаления
ИЗ
	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов"	0								"ВЫБРАТЬ
	ДоговорыКонтрагентов.Ссылка КАК Договор,
	ДоговорыКонтрагентов.Ссылка КАК ТорговаяТочка,
	ИСТИНА КАК ОсновнойДоговор
ИЗ
	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов"	0		"ВЫБРАТЬ
	ДоговорыКонтрагентов.Ссылка КАК Договор,
//	ДоговорыКонтрагентов.ПометкаУдаления,
	ВЫБОР
		КОГДА ДоговорыКонтрагентов.Владелец.ОсновнойДоговорКонтрагента = ДоговорыКонтрагентов.Ссылка
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК ОсновнойДоговор,
	КонтактнаяИнформация.Вид,
	КонтактнаяИнформация.Объект
ИЗ
	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.КонтактнаяИнформация КАК КонтактнаяИнформация
			ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ВидыКонтактнойИнформации КАК ВидыКонтактнойИнформации
			ПО КонтактнаяИнформация.Вид = ВидыКонтактнойИнформации.Ссылка
		ПО ДоговорыКонтрагентов.Владелец = КонтактнаяИнформация.Объект"	0			
agreement	Договор	ref_agreements	Ссылка на договор		ДоговорыКонтрагентов.Ссылка													"// генерация sid
лОбъекты.Колонки.Добавить(""ТорговаяТочка"");
Для Каждого стрДоп Из лОбъекты Цикл
	стрДоп.ТорговаяТочка = XMLСтрока(стрДоп.Объект)+""***""+XMLСтрока(стрДоп.Вид);
КонецЦикла;"			
buypoint	Владелец	ref_buypoints	Ссылка на торговую точку		ДоговорыКонтрагентов.Владелец								ТорговаяТочка	*ДоговорыКонтрагентов.Ссылка		ТорговаяТочка	ВидыКонтактнойИнформации.Ссылка				
default	ОсновнойДоговор		Признак основного договора																		
																#	ДоговорыКонтрагентов.Владелец	ref_buyers			
																					
																					
Территории агентов																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted					"ВЫБРАТЬ
	КонтрагентыМенеджерыПокупателя.Ссылка КАК Контрагент,
	КонтрагентыМенеджерыПокупателя.МенеджерПокупателя КАК Сотрудник
ИЗ
	Справочник.Контрагенты.МенеджерыПокупателя КАК КонтрагентыМенеджерыПокупателя"	0	"// данные для формирования sid

лОбъекты.Колонки.Добавить(""Ссылка"");
Для Каждого стрДоп Из лОбъекты Цикл
	стрДоп.Ссылка = """"+XMLСтрока(стрДоп.Сотрудник)+""***""+XMLСтрока(стрДоп.Контрагент);
КонецЦикла;"							"ВЫБРАТЬ
	ДоговорыКонтрагентов.Ссылка КАК ТорговаяТочка,
	КонтрагентыМенеджерыПокупателя.МенеджерПокупателя КАК Сотрудник
ИЗ
	Справочник.Контрагенты.МенеджерыПокупателя КАК КонтрагентыМенеджерыПокупателя
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
		ПО КонтрагентыМенеджерыПокупателя.Ссылка = ДоговорыКонтрагентов.Владелец"	0		"ВЫБРАТЬ
	КонтрагентыМенеджерыПокупателя.МенеджерПокупателя КАК Сотрудник,
	КонтактнаяИнформация.Вид,
	КонтактнаяИнформация.Объект
ИЗ
	Справочник.Контрагенты.МенеджерыПокупателя КАК КонтрагентыМенеджерыПокупателя
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.КонтактнаяИнформация КАК КонтактнаяИнформация
			ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ВидыКонтактнойИнформации КАК ВидыКонтактнойИнформации
			ПО КонтактнаяИнформация.Вид = ВидыКонтактнойИнформации.Ссылка
		ПО КонтрагентыМенеджерыПокупателя.Ссылка = КонтактнаяИнформация.Объект"	0			
employee	Сотрудник	ref_employees	Ссылка на сотрудника		КонтрагентыМенеджерыПокупателя.МенеджерПокупателя													"// генерация sid
лОбъекты.Колонки.Добавить(""ТорговаяТочка"");
Для Каждого стрДоп Из лОбъекты Цикл
	стрДоп.ТорговаяТочка = XMLСтрока(стрДоп.Объект)+""***""+XMLСтрока(стрДоп.Вид);
КонецЦикла;"			
buypoint	Контрагент	ref_buypoints	Ссылка на торговую точку		КонтрагентыМенеджерыПокупателя.Ссылка								ТорговаяТочка	ДоговорыКонтрагентов.Ссылка		ТорговаяТочка	ВидыКонтактнойИнформации.Ссылка				
																#	КонтрагентыМенеджерыПокупателя.Ссылка	ref_buyers			
																					
																					
Товарные группы																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
name	Наименование		Наименование		"ВЫБРАТЬ
	Номенклатура.Ссылка КАК Ссылка,
	Номенклатура.Наименование,
	Номенклатура.Код,
	Номенклатура.ПометкаУдаления,
	Номенклатура.ЭтоГруппа,
	Номенклатура.Родитель
ИЗ
	Справочник.Номенклатура КАК Номенклатура
<ГДЕ ?>
УПОРЯДОЧИТЬ ПО
	Ссылка
ИТОГИ ПО
	Ссылка ТОЛЬКО ИЕРАРХИЯ"	0	"// выборка до верхнего уровня и сортировка
лОбъекты.Колонки.Добавить(""Представление"");
колстр = лОбъекты.Количество();
Для Инд=1 По колстр Цикл
	стрДоп=лОбъекты.Получить(колстр-Инд);
	Если ЗначениеЗаполнено(стрДоп.Ссылка) Тогда
		Если стрДоп.ЭтоГруппа Тогда
			стрДоп.Представление = стрДоп.Ссылка.ПолноеНаименование();
		Иначе
			лОбъекты.Удалить(стрДоп);
		КонецЕсли;
	Иначе
		лОбъекты.Удалить(стрДоп);
	КонецЕсли;
КонецЦикла;
лОбъекты.Свернуть(""Ссылка,Представление,Наименование,Код,ПометкаУдаления,Родитель"");
лОбъекты.Сортировать(""Представление"");"			"ВЫБРАТЬ
	Номенклатура.Ссылка КАК Ссылка,
	Номенклатура.Наименование,
	Номенклатура.Код,
	Номенклатура.ПометкаУдаления,
	Номенклатура.ЭтоГруппа,
	Номенклатура.Родитель
ИЗ
	Справочник.Номенклатура КАК Номенклатура
ГДЕ
	Номенклатура.ЭтоГруппа = ИСТИНА
<ГДЕ ?>
УПОРЯДОЧИТЬ ПО
	Ссылка
ИТОГИ ПО
	Ссылка ТОЛЬКО ИЕРАРХИЯ"	"// выборка до верхнего уровня и сортировка
лОбъекты.Колонки.Добавить(""Представление"");
Для Каждого стрДоп Из лОбъекты Цикл
	стрДоп.Представление = стрДоп.Ссылка.ПолноеНаименование();
КонецЦикла;
лОбъекты.Сортировать(""Представление"");"										
printcode	Код		Код объекта							"ВЫБРАТЬ
	Номенклатура.Ссылка КАК Ссылка,
	Номенклатура.Наименование,
	Номенклатура.Код,
	Номенклатура.ПометкаУдаления,
	Номенклатура.ЭтоГруппа,
	Номенклатура.Родитель
ИЗ
	Справочник.Номенклатура КАК Номенклатура
ГДЕ
	Номенклатура.ЭтоГруппа = ИСТИНА
<ГДЕ ?>
УПОРЯДОЧИТЬ ПО
	Ссылка
ИТОГИ ПО
	Ссылка ТОЛЬКО ИЕРАРХИЯ"											
deleted	ПометкаУдаления		Пометка на удаление																		
parentskugroup	Родитель	*ref_skugroups	Ссылка на родительскую группу																		
sequence			Сортировка																		
	*#	ref_skus			Номенклатура.Ссылка																
																					
																					
Товары																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
name	Наименование		Наименование		"ВЫБРАТЬ
	Номенклатура.Ссылка,
	Номенклатура.Наименование,
	Номенклатура.Код,
	ВЫБОР
		КОГДА (ВЫРАЗИТЬ(Номенклатура.Артикул КАК СТРОКА(25))) = """"
			ТОГДА ""--""
		ИНАЧЕ Номенклатура.Артикул
	КОНЕЦ КАК Артикул,
	Номенклатура.ПометкаУдаления,
	Номенклатура.Родитель,
	Номенклатура.БазоваяЕдиницаИзмерения,
	Номенклатура.НаименованиеПолное,
	Номенклатура.Весовой,
	ВЫБОР
		КОГДА Номенклатура.СтавкаНДС = ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.НДС18)
			ТОГДА 0.18
		КОГДА Номенклатура.СтавкаНДС = ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.НДС10)
			ТОГДА 0.1
		КОГДА Номенклатура.СтавкаНДС = ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.НДС20)
			ТОГДА 0.2
		ИНАЧЕ 0
	КОНЕЦ КАК СтавкаНДС,
	1 КАК merchandising,
	1 КАК countable,
	ЕдиницыИзмерения.Вес
ИЗ
	Справочник.Номенклатура КАК Номенклатура
		ЛЕВОЕ СОЕДИНЕНИЕ Справочник.ЕдиницыИзмерения КАК ЕдиницыИзмерения
		ПО Номенклатура.БазоваяЕдиницаИзмерения = ЕдиницыИзмерения.ЕдиницаПоКлассификатору
			И Номенклатура.Ссылка = ЕдиницыИзмерения.Владелец
ГДЕ
	Номенклатура.ЭтоГруппа = ЛОЖЬ
	И Номенклатура.БазоваяЕдиницаИзмерения<>Значение(Справочник.КлассификаторЕдиницИзмерения.ПустаяСсылка)"	1															
printcode	Артикул		Код объекта																		
deleted	ПометкаУдаления		Пометка на удаление																		
skugroup	Родитель	ref_skugroups	Ссылка на товарную группу		Номенклатура.Родитель																
unit	БазоваяЕдиницаИзмерения	*ref_units	Ссылка на единицу измерения																		
fullname	НаименованиеПолное		Полное наименование																		
weight	Вес		Вес единицы измерения																		
canweight	Весовой		Признак весового товара																		
sequence			Сортировка																		
vatrate	СтавкаНДС		Процент ставки НДС																		
merchandising	merchandising		Отметка об инструменте мерчандайзинга																		
countable	countable		Отметка о количественном учете наличия при мерчандайзинге																		
description			Описание																		
type			Тип товара (0 - товар, 1 - POSM, 2 - оборудование, 3 - POSM конкурентов)																		
																					
																					
Единицы измерения товаров																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
printcode			Штрих-код		"ВЫБРАТЬ
	ЕдиницыИзмерения.ПометкаУдаления,
	ЕдиницыИзмерения.Владелец,
	ЕдиницыИзмерения.ЕдиницаПоКлассификатору,
	ЕдиницыИзмерения.Коэффициент,
	ЕдиницыИзмерения.Вес,
	Штрихкоды.Штрихкод
ИЗ
	Справочник.ЕдиницыИзмерения КАК ЕдиницыИзмерения
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.Штрихкоды КАК Штрихкоды
		ПО (Штрихкоды.ЕдиницаИзмерения = ЕдиницыИзмерения.Ссылка)
			И (Штрихкоды.ТипШтрихкода = ЗНАЧЕНИЕ(ПланВидовХарактеристик.ТипыШтрихкодов.EAN13))
ГДЕ
	ЕдиницыИзмерения.ПометкаУдаления = ЛОЖЬ
	И ЕдиницыИзмерения.ЕдиницаПоКлассификатору <> ЗНАЧЕНИЕ(Справочник.КлассификаторЕдиницИзмерения.ПустаяСсылка)"	1															
deleted	ПометкаУдаления		Пометка на удаление																		
sku	Владелец	ref_skus	Ссылка на товар		ЕдиницыИзмерения.Владелец																
unit	ЕдиницаПоКлассификатору	ref_units	Ссылка на единицу измерения		ЕдиницыИзмерения.ЕдиницаПоКлассификатору																
factor	Коэффициент		Коэффициент пересчета в базовую единицу измерения																		
weight	*Вес		Вес единицы измерения (не используется)																		
barcode	Штрихкод		Штрихкод																		
is_default	*Основная		Единица по умолчанию																		
																					
																					
Изображения товаров																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted	ПометкаУдаления				"ВЫБРАТЬ
	ХранилищеДополнительнойИнформации.Ссылка КАК Идентификатор,
	ХранилищеДополнительнойИнформации.ПометкаУдаления,
	ВЫБОР
		КОГДА ХранилищеДополнительнойИнформации.Объект.ОсновноеИзображение = ХранилищеДополнительнойИнформации.Ссылка
			ТОГДА ИСТИНА
		ИНАЧЕ ЛОЖЬ
	КОНЕЦ КАК ОсновноеИзображение,
	ХранилищеДополнительнойИнформации.Объект,
	ХранилищеДополнительнойИнформации.Хранилище
ИЗ
	Справочник.ХранилищеДополнительнойИнформации КАК ХранилищеДополнительнойИнформации
ГДЕ
	ХранилищеДополнительнойИнформации.ВидДанных = ЗНАЧЕНИЕ(Перечисление.ВидыДополнительнойИнформацииОбъектов.Изображение)"	1	"// айдишники фоток и выгрузка на фотохостинг

лОбщийРазмер = 0;

лОбъекты.Колонки.Добавить(""Ссылка"");
Для Каждого стрДоп Из лОбъекты Цикл
	стрДоп.Ссылка = ""DEFAULT-""+XMLСтрока(стрДоп.Идентификатор);
	
	лРазмер = ВыгрузитьФото(стрДоп.Хранилище, стрДоп.Ссылка);
	Если лРазмер=0 Тогда
		стрДоп.Ссылка=""--"";
	Иначе
		лОбщийРазмер = лОбщийРазмер+лРазмер;
	КонецЕсли;
КонецЦикла;

мстрТЗ = лОбъекты.НайтиСтроки(Новый Структура(""Ссылка"",""""));
Для Каждого стрТЗ Из мстрТЗ Цикл
	лОбъекты.Удалить(стрТЗ);
КонецЦикла;

Сообщить(""Всего отправлено ""+лОбщийРазмер+"" байт"");"														
sku	Объект	ref_skus	Ссылка на товар		ХранилищеДополнительнойИнформации.Объект																
isdefault	ОсновноеИзображение		Основное изображение																		
image	Ссылка		Фотография товара																		
																					
																					
Остатки товаров																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted			Пометка на удаление		"ВЫБРАТЬ
	ВложенныйЗапрос.Склад КАК Склад,
	ВложенныйЗапрос.Номенклатура КАК Товар,
	ВложенныйЗапрос.КоличествоОстаток - ВложенныйЗапрос.КоличествоВРезерве - ВложенныйЗапрос.КоличествоКПередаче КАК СвободныйОстаток
ИЗ
	(ВЫБРАТЬ
		ВложенныйЗапрос.Склад КАК Склад,
		ВложенныйЗапрос.Номенклатура КАК Номенклатура,
		СУММА(ВложенныйЗапрос.КоличествоОстаток) КАК КоличествоОстаток,
		СУММА(ВложенныйЗапрос.КоличествоВРезерве) КАК КоличествоВРезерве,
		СУММА(ВложенныйЗапрос.КоличествоКПолучению) КАК КоличествоКПолучению,
		СУММА(ВложенныйЗапрос.КоличествоКПередаче) КАК КоличествоКПередаче,
		СУММА(ВложенныйЗапрос.КоличествоЗаказаноУПоставщиков) КАК КоличествоЗаказаноУПоставщиков
	ИЗ
		(ВЫБРАТЬ
			ТоварыНаСкладахОстатки.Склад КАК Склад,
			ТоварыНаСкладахОстатки.Номенклатура КАК Номенклатура,
			ТоварыНаСкладахОстатки.КоличествоОстаток КАК КоличествоОстаток,
			0 КАК КоличествоВРезерве,
			0 КАК КоличествоКПолучению,
			0 КАК КоличествоКПередаче,
			0 КАК КоличествоЗаказаноУПоставщиков
		ИЗ
			РегистрНакопления.ТоварыНаСкладах.Остатки(&КонецПериода, {(Склад).* КАК Склад, (Номенклатура).* КАК Номенклатура, (ХарактеристикаНоменклатуры).* КАК ХарактеристикаНоменклатуры, (СерияНоменклатуры).* КАК СерияНоменклатуры}) КАК ТоварыНаСкладахОстатки
		
		ОБЪЕДИНИТЬ ВСЕ
		
		ВЫБРАТЬ
			ТоварыВРозницеОстатки.Склад,
			ТоварыВРозницеОстатки.Номенклатура,
			ТоварыВРозницеОстатки.КоличествоОстаток,
			0,
			0,
			0,
			0
		ИЗ
			РегистрНакопления.ТоварыВРознице.Остатки(&КонецПериода, {(Склад).* КАК Склад, (Номенклатура).* КАК Номенклатура, (ХарактеристикаНоменклатуры).* КАК ХарактеристикаНоменклатуры, (СерияНоменклатуры).* КАК СерияНоменклатуры, (Качество).* КАК Качество}) КАК ТоварыВРозницеОстатки
		
		ОБЪЕДИНИТЬ ВСЕ
		
		ВЫБРАТЬ
			ТоварыВРезервеНаСкладахОстатки.Склад,
			ТоварыВРезервеНаСкладахОстатки.Номенклатура,
			0,
			ТоварыВРезервеНаСкладахОстатки.КоличествоОстаток,
			0,
			0,
			0
		ИЗ
			РегистрНакопления.ТоварыВРезервеНаСкладах.Остатки(&КонецПериода, {(Склад).* КАК Склад, (Номенклатура).* КАК Номенклатура, (ХарактеристикаНоменклатуры).* КАК ХарактеристикаНоменклатуры, (СерияНоменклатуры).* КАК СерияНоменклатуры, (ДокументРезерва).* КАК ДокументОснование}) КАК ТоварыВРезервеНаСкладахОстатки
		
		ОБЪЕДИНИТЬ ВСЕ
		
		ВЫБРАТЬ
			ТоварыКПолучениюНаСкладыОстатки.Склад,
			ТоварыКПолучениюНаСкладыОстатки.Номенклатура,
			0,
			0,
			ТоварыКПолучениюНаСкладыОстатки.КоличествоОстаток,
			0,
			0
		ИЗ
			РегистрНакопления.ТоварыКПолучениюНаСклады.Остатки(&КонецПериода, {(Склад).* КАК Склад, (Номенклатура).* КАК Номенклатура, (ХарактеристикаНоменклатуры).* КАК ХарактеристикаНоменклатуры, (СерияНоменклатуры).* КАК СерияНоменклатуры, (Качество).* КАК Качество, (ДокументПолучения).* КАК ДокументОснование}) КАК ТоварыКПолучениюНаСкладыОстатки
		
		ОБЪЕДИНИТЬ ВСЕ
		
		ВЫБРАТЬ
			ТоварыКПередачеСоСкладовОстатки.Склад,
			ТоварыКПередачеСоСкладовОстатки.Номенклатура,
			0,
			0,
			0,
			ТоварыКПередачеСоСкладовОстатки.КоличествоОстаток,
			0
		ИЗ
			РегистрНакопления.ТоварыКПередачеСоСкладов.Остатки(&КонецПериода, {(Склад).* КАК Склад, (Номенклатура).* КАК Номенклатура, (ХарактеристикаНоменклатуры).* КАК ХарактеристикаНоменклатуры, (СерияНоменклатуры).* КАК СерияНоменклатуры, (Качество).* КАК Качество, (ДокументПередачи).* КАК ДокументОснование}) КАК ТоварыКПередачеСоСкладовОстатки
		
		ОБЪЕДИНИТЬ ВСЕ
		
		ВЫБРАТЬ
			ЗаказыПоставщикамОстатки.ЗаказПоставщику.Склад,
			ЗаказыПоставщикамОстатки.Номенклатура,
			0,
			0,
			0,
			0,
			ЗаказыПоставщикамОстатки.КоличествоОстаток
		ИЗ
			РегистрНакопления.ЗаказыПоставщикам.Остатки(&КонецПериода, {(ЗаказПоставщику.Склад).* КАК Склад, (Номенклатура).* КАК Номенклатура, (ХарактеристикаНоменклатуры).* КАК ХарактеристикаНоменклатуры, (ЗаказПоставщику).* КАК ДокументОснование}) КАК ЗаказыПоставщикамОстатки) КАК ВложенныйЗапрос
	
	СГРУППИРОВАТЬ ПО
		ВложенныйЗапрос.Склад,
		ВложенныйЗапрос.Номенклатура) КАК ВложенныйЗапрос"	0															
sku	Товар	ref_skus	Ссылка на товар		ВложенныйЗапрос.Номенклатура																
store	Склад	ref_stores	Ссылка на склад		ВложенныйЗапрос.Склад																
firm		ref_firms	Ссылка на собственную фирму																		
quantity	СвободныйОстаток		Количество																		
reserved			Х																		
																					
																					
Задолженности																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted			Пометка на удаление		"ВЫБРАТЬ
	ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.Организация,
	ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.Контрагент,
	ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.СуммаВзаиморасчетовОстаток * ЕСТЬNULL(КурсыВалютСрезПоследних.Курс,1) КАК Долг,
	ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.ДоговорКонтрагента,
	ВЫБОР
		КОГДА ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.ДокументРасчетовСКонтрагентом ССЫЛКА Документ.РеализацияТоваровУслуг
			ТОГДА ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.ДокументРасчетовСКонтрагентом
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК Документ,
	ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.ДокументРасчетовСКонтрагентом КАК Документ1,
	ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.ДокументРасчетовСКонтрагентом.Дата КАК Дата,
	ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.ДокументРасчетовСКонтрагентом.Номер КАК Номер
ИЗ
	РегистрНакопления.ВзаиморасчетыСКонтрагентамиПоДокументамРасчетов.Остатки(
			&КонецПериода,
			ДоговорКонтрагента В (&Отбор_ref_agreements)
				) КАК ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&КонецПериода, ) КАК КурсыВалютСрезПоследних
		ПО ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.ДоговорКонтрагента.ВалютаВзаиморасчетов = КурсыВалютСрезПоследних.Валюта
ГДЕ
	ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.ДоговорКонтрагента.ВестиПоДокументамРасчетовСКонтрагентом = ИСТИНА

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВзаиморасчетыСКонтрагентамиОстатки.Организация,
	ВзаиморасчетыСКонтрагентамиОстатки.Контрагент,
	ВзаиморасчетыСКонтрагентамиОстатки.СуммаВзаиморасчетовОстаток * ЕСТЬNULL(КурсыВалютСрезПоследних.Курс,1),
	ВзаиморасчетыСКонтрагентамиОстатки.ДоговорКонтрагента,
	NULL,
	NULL,
	&КонецПериода,
	NULL
ИЗ
	РегистрНакопления.ВзаиморасчетыСКонтрагентами.Остатки(
			&КонецПериода,
			ДоговорКонтрагента В (&Отбор_ref_agreements)
				) КАК ВзаиморасчетыСКонтрагентамиОстатки
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&КонецПериода, ) КАК КурсыВалютСрезПоследних
		ПО ВзаиморасчетыСКонтрагентамиОстатки.ДоговорКонтрагента.ВалютаВзаиморасчетов = КурсыВалютСрезПоследних.Валюта
ГДЕ
	ВзаиморасчетыСКонтрагентамиОстатки.ДоговорКонтрагента.ВестиПоДокументамРасчетовСКонтрагентом = ЛОЖЬ"	0	"// обработка документов в ссылках
лОбъекты.Колонки.Добавить(""ДокументПредставление"");
Для Каждого стрДоп Из лОбъекты Цикл
Если ЗначениеЗаполнено(стрДоп.Документ1) Тогда
	стрДоп.ДокументПредставление = стрДоп.Документ1.Метаданные().Имя + "" №"" +  стрДоп.Номер + "" от "" +стрДоп.Дата;
КонецЕсли;
КонецЦикла;"				"ВЫБРАТЬ
	ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.Организация,
	ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.Контрагент,
	ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.СуммаВзаиморасчетовОстаток * КурсыВалютСрезПоследних.Курс КАК Долг,
	ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.ДоговорКонтрагента,
	ВЫБОР
		КОГДА ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.ДокументРасчетовСКонтрагентом ССЫЛКА Документ.РеализацияТоваровУслуг
			ТОГДА ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.ДокументРасчетовСКонтрагентом
		ИНАЧЕ НЕОПРЕДЕЛЕНО
	КОНЕЦ КАК Документ,
	ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.ДокументРасчетовСКонтрагентом КАК Документ1,
	ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.ДокументРасчетовСКонтрагентом.Дата КАК Дата,
	ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.ДокументРасчетовСКонтрагентом.Номер КАК Номер
//	ПРЕДСТАВЛЕНИЕ(ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.ДокументРасчетовСКонтрагентом) КАК ДокументПредставление
ИЗ
	РегистрНакопления.ВзаиморасчетыСКонтрагентамиПоДокументамРасчетов.Остатки(&КонецПериода, ) КАК ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&КонецПериода, ) КАК КурсыВалютСрезПоследних
		ПО ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.ДоговорКонтрагента.ВалютаВзаиморасчетов = КурсыВалютСрезПоследних.Валюта"	"// обработка документов в ссылках
стрСФ = лСписокФильтров.Найти(""doc_invoices"",""ИмяРаздела"");
лОбъекты.Колонки.Добавить(""ДокументПредставление"");
Если стрСФ=Неопределено Тогда
	лОбъекты.ЗаполнитьЗначения(Неопределено,""Документ"");
	Для Каждого стрДоп Из лОбъекты Цикл
		стрДоп.ДокументПредставление = стрДоп.Документ1.Метаданные().Имя + "" №"" +  стрДоп.Документ1.Номер + "" от "" +стрДоп.Документ1.Дата;
	КонецЦикла;
Иначе
	doc_invoices = стрСФ.Отбор;
	Для Каждого стрДоп Из лОбъекты Цикл
		стрДоп.ДокументПредставление = стрДоп.Документ1.Метаданные().Имя + "" №"" +  стрДоп.Документ1.Номер + "" от "" +стрДоп.Документ1.Дата;
		Если стрДоп.Документ=Неопределено Тогда Продолжить; КонецЕсли;
		Если doc_invoices.Найти(стрДоп.Документ)=Неопределено Тогда
			стрДоп.Документ = Неопределено;
		КонецЕсли;
	КонецЦикла;
КонецЕсли;"									
buyer	Контрагент	*ref_buyers	Ссылка на владельца / покупателя		ПАРАМЕТР						ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.Контрагент			*							
counteragent	Контрагент	*ref_counteragents	Ссылка на контрагента / юр. лицо																		
buypoint	Контрагент	*ref_buypoints	Ссылка на торговую точку										ДоговорКонтрагента	*		*	*				
agreement	ДоговорКонтрагента	ref_agreements	Ссылка на договор		ПАРАМЕТР						ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.ДоговорКонтрагента										
firm	Организация	*ref_firms	Ссылка на собственную фирму		ПАРАМЕТР						ВзаиморасчетыСКонтрагентамиПоДокументамРасчетовОстатки.Организация										
invoice	*Документ	*doc_invoices	Ссылка на документ отгрузки товара																		
date	Дата		Дата возникновения задолженности																		
amount	Долг		Сумма задолженности																		
docinfo	ДокументПредставление		Описание документа задолженности																		
																					
																					
Взаиморасчеты																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted			Пометка на удаление		"ВЫБРАТЬ
	ДоговорыКонтрагентов.Организация,
	ДоговорыКонтрагентов.Владелец КАК Контрагент,
	СУММА(ЕСТЬNULL(ВзаиморасчетыСКонтрагентамиОстатки.СуммаВзаиморасчетовОстаток, 0) * ЕСТЬNULL(КурсыВалютСрезПоследних.Курс, 1)) КАК Долг,
	ДоговорыКонтрагентов.Ссылка КАК ДоговорКонтрагента,
	""Сальдо"" КАК Документ,
	НАЧАЛОПЕРИОДА(ДОБАВИТЬКДАТЕ(&КонецПериода, МЕСЯЦ, -3), ДЕНЬ) КАК Дата,
	""Начальное сальдо"" КАК Номер
ИЗ
	Справочник.ДоговорыКонтрагентов КАК ДоговорыКонтрагентов
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрНакопления.ВзаиморасчетыСКонтрагентами.Остатки(НАЧАЛОПЕРИОДА(ДОБАВИТЬКДАТЕ(&КонецПериода, МЕСЯЦ, -3), ДЕНЬ), ДоговорКонтрагента В (&Отбор_ref_agreements)) КАК ВзаиморасчетыСКонтрагентамиОстатки
		ПО (ВзаиморасчетыСКонтрагентамиОстатки.ДоговорКонтрагента = ДоговорыКонтрагентов.Ссылка)
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&КонецПериода, ) КАК КурсыВалютСрезПоследних
		ПО (ВзаиморасчетыСКонтрагентамиОстатки.ДоговорКонтрагента.ВалютаВзаиморасчетов = КурсыВалютСрезПоследних.Валюта)

СГРУППИРОВАТЬ ПО
	ДоговорыКонтрагентов.Организация,
	ВзаиморасчетыСКонтрагентамиОстатки.ДоговорКонтрагента.Владелец,
	ДоговорыКонтрагентов.Ссылка

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВзаиморасчетыСКонтрагентамиОбороты.Организация,
	ВзаиморасчетыСКонтрагентамиОбороты.Контрагент,
	ВзаиморасчетыСКонтрагентамиОбороты.СуммаВзаиморасчетовОборот * ЕСТЬNULL(КурсыВалютСрезПоследних.Курс, 1),
	ВзаиморасчетыСКонтрагентамиОбороты.ДоговорКонтрагента,
	ВзаиморасчетыСКонтрагентамиОбороты.Регистратор,
	ВзаиморасчетыСКонтрагентамиОбороты.Регистратор.Дата,
	ВзаиморасчетыСКонтрагентамиОбороты.Регистратор.Номер
ИЗ
	РегистрНакопления.ВзаиморасчетыСКонтрагентами.Обороты(НАЧАЛОПЕРИОДА(ДОБАВИТЬКДАТЕ(&КонецПериода, МЕСЯЦ, -3), ДЕНЬ), &КонецПериода, Регистратор, ДоговорКонтрагента В (&Отбор_ref_agreements)) КАК ВзаиморасчетыСКонтрагентамиОбороты
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&КонецПериода, ) КАК КурсыВалютСрезПоследних
		ПО ВзаиморасчетыСКонтрагентамиОбороты.ДоговорКонтрагента.ВалютаВзаиморасчетов = КурсыВалютСрезПоследних.Валюта"	0	"// обработка документов в ссылках
лОбъекты.Колонки.Добавить(""ДокументПредставление"");
Для Каждого стрДоп Из лОбъекты Цикл
	Если ЗначениеЗаполнено(стрДоп.Документ) Тогда
		Если стрДоп.Документ=""Сальдо"" Тогда
			стрДоп.ДокументПредставление =  """" +  стрДоп.Номер + "" от "" +стрДоп.Дата;
		Иначе
			стрДоп.ДокументПредставление = стрДоп.Документ.Метаданные().Имя + "" №"" +  стрДоп.Номер + "" от "" +стрДоп.Дата;
		КонецЕсли;
	КонецЕсли;
КонецЦикла;"														
buyer	Контрагент	ref_buyers	Ссылка на владельца / покупателя		ПАРАМЕТР																
counteragent	Контрагент	*ref_counteragents	Ссылка на контрагента / юр. лицо																		
buypoint	Контрагент	*ref_buypoints	Ссылка на торговую точку																		
agreement	ДоговорКонтрагента	ref_agreements	Ссылка на договор		ПАРАМЕТР																
firm	Организация	ref_firms	Ссылка на собственную фирму		ПАРАМЕТР																
invoice	*Документ	*doc_invoices	Ссылка на документ отгрузки товара																		
date	Дата		Дата возникновения задолженности																		
amount	Долг		Сумма задолженности																		
docinfo	ДокументПредставление		Описание документа задолженности																		
																					
																					
Цены товаров																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted			Пометка на удаление		"ВЫБРАТЬ РАЗЛИЧНЫЕ
	ЦеныНоменклатурыСрезПоследних.Цена * КурсыВалютСрезПоследних.Курс КАК Цена,
	ЦеныНоменклатурыСрезПоследних.Номенклатура,
	ЕСТЬNULL(ЦеныНоменклатурыСрезПоследних.ЕдиницаИзмерения.ЕдиницаПоКлассификатору, ЦеныНоменклатурыСрезПоследних.Номенклатура.БазоваяЕдиницаИзмерения) КАК ЕдиницаПоКлассификатору,
	ЦеныНоменклатурыСрезПоследних.ТипЦен
ИЗ
	РегистрСведений.ЦеныНоменклатуры.СрезПоследних(&КонецПериода, ) КАК ЦеныНоменклатурыСрезПоследних
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.КурсыВалют.СрезПоследних(&КонецПериода, ) КАК КурсыВалютСрезПоследних
		ПО ЦеныНоменклатурыСрезПоследних.Валюта = КурсыВалютСрезПоследних.Валюта
ГДЕ
	ЦеныНоменклатурыСрезПоследних.Цена <> 0
	И КурсыВалютСрезПоследних.Курс <> 0
	И ЦеныНоменклатурыСрезПоследних.ТипЦен.Рассчитывается = ЛОЖЬ
	И ЦеныНоменклатурыСрезПоследних.ЕдиницаИзмерения.ЕдиницаПоКлассификатору <> ЗНАЧЕНИЕ(Справочник.КлассификаторЕдиницИзмерения.ПустаяСсылка)"	1															
sku	Номенклатура	ref_skus	Ссылка на товар		ЦеныНоменклатурыСрезПоследних.Номенклатура																
pricetype	ТипЦен	*ref_pricetypes	Ссылка на тип цены		ЦеныНоменклатурыСрезПоследних.ТипЦен																
unit	ЕдиницаПоКлассификатору	*ref_units	Ссылка на единицу измерения		ЦеныНоменклатурыСрезПоследних.ЕдиницаИзмерения.ЕдиницаПоКлассификатору																
price	Цена		Цена																		
	*#	ref_skuunits			ЦеныНоменклатурыСрезПоследних.ЕдиницаИзмерения																
																					
																					
Статусы состояния документа																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
name	Наименование		Наименование		*	0															
printcode	Код		Код объекта																		
deleted	ПометкаУдаления		Пометка на удаление																		
																					
																					
Типы оплаты																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
name	Наименование		Наименование		ВЫБРАТЬ 1 КАК Поле1	0	"// ручное заполнение
лОбъекты = Новый ТаблицаЗначений;
лОбъекты.Колонки.Добавить(""Ссылка"");
лОбъекты.Колонки.Добавить(""Наименование"");

стрДоп = лОбъекты.Добавить();
стрДоп.Ссылка = ""Безнал"";
стрДоп.Наименование = ""Безналичный"";
стрДоп = лОбъекты.Добавить();
стрДоп.Ссылка = ""Нал"";
стрДоп.Наименование = ""Наличный"";"														
printcode	*Код		Код объекта																		
deleted	*ПометкаУдаления		Пометка на удаление																		
																					
																					
Дополнительные атрибуты																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
name	Наименование		Наименование		"ВЫБРАТЬ
	СвойстваОбъектов.Ссылка,
	СвойстваОбъектов.ПометкаУдаления,
	СвойстваОбъектов.Код,
	СвойстваОбъектов.Наименование,
	""STRING"" КАК valuetype,
	""REF_BUYPOINTS"" КАК objecttype,
	30 КАК sequence,
	ИСТИНА КАК available,
	ЛОЖЬ КАК editable
ИЗ
	ПланВидовХарактеристик.СвойстваОбъектов КАК СвойстваОбъектов
ГДЕ
	СвойстваОбъектов.НазначениеСвойства = ЗНАЧЕНИЕ(ПланВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Справочник_Контрагенты)

// 2015-12-10 доп.атрибуты на товары не работают
//ОБЪЕДИНИТЬ ВСЕ
//
//ВЫБРАТЬ
//	СвойстваОбъектов.Ссылка,
//	СвойстваОбъектов.ПометкаУдаления,
//	СвойстваОбъектов.Код,
//	СвойстваОбъектов.Наименование,
//	""STRING"",
//	""REF_SKUS"",
//	30,
//	ИСТИНА,
//	ЛОЖЬ
//ИЗ
//	ПланВидовХарактеристик.СвойстваОбъектов КАК СвойстваОбъектов
//ГДЕ
//	СвойстваОбъектов.НазначениеСвойства = ЗНАЧЕНИЕ(ПланВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Справочник_Номенклатура)

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	СвойстваОбъектов.Ссылка,
	СвойстваОбъектов.ПометкаУдаления,
	СвойстваОбъектов.Код,
	СвойстваОбъектов.Наименование,
	""REFERENCE"" КАК valuetype,
	""DOC_PREORDERS"" КАК objecttype,
	30 КАК sequence,
	ИСТИНА КАК available,
	ИСТИНА КАК editable
ИЗ
	ПланВидовХарактеристик.СвойстваОбъектов КАК СвойстваОбъектов
ГДЕ
	СвойстваОбъектов.НазначениеСвойства = ЗНАЧЕНИЕ(ПланВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Документ_ЗаказПокупателя)

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	""DOC_PREORDERS#ДокументыСразу"",
	ЛОЖЬ,
	""DOC_PREORDERS#ДокументыСразу"",
	""Предоставить документы сразу"",
	""BOOLEAN"" КАК valuetype,
	""DOC_PREORDERS"" КАК objecttype,
	35 КАК sequence,
	ИСТИНА КАК available,
	ИСТИНА КАК editable"	1				"ниже возможные значения objecttype
2015-12-09

DOC_PREORDERS
DOC_PREORDERSKUS
DOC_MERCHANDISES
DOC_MERCHANDISESKUS
DOC_INVOICES
DOC_INVOICESKUS
DOC_RECEIPTCASHORDERS
REF_BUYPOINTS"											
printcode	Код		Код объекта																		
deleted	ПометкаУдаления		Пометка на удаление																		
valuetype	valuetype		Тип значения 'STRING','DATE','DATETIME','FLOAT','BOOLEAN','INTEGER','REFERENCE','MULTIREFERENCE'																		
objecttype	objecttype		Объект принадлежности атрибута																		
sequence	sequence		Порядок следования при просмотре или редактировании																		
available	available		Предоставлен для просмотра																		
editable	editable		Доступен для редактирования																		
																					
																					
Варианты значений доп.атрибутов			сейчас не работают должным образом если нужно передать ref_attributedefaults для атрибутов имеющих ref_attributeranges																		
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted	ПометкаУдаления		Пометка на удаление		"ВЫБРАТЬ
	ЗначенияСвойствОбъектов.Ссылка,
	ЗначенияСвойствОбъектов.ПометкаУдаления,
	ЗначенияСвойствОбъектов.Владелец КАК attribute,
	ЗначенияСвойствОбъектов.Наименование КАК value
ИЗ
	Справочник.ЗначенияСвойствОбъектов КАК ЗначенияСвойствОбъектов
ГДЕ
	ЗначенияСвойствОбъектов.Владелец.НазначениеСвойства = ЗНАЧЕНИЕ(ПланВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Документ_ЗаказПокупателя)"	1															
attribute	attribute	ref_attributes	Ссылка на дополнительный атрибут		ЗначенияСвойствОбъектов.Владелец																
value	value		Вариант значения																		
default			Признак значения по умолчанию																		
																					
																					
Значения по умолчанию для доп.атрибутов																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted	*ПометкаУдаления		Пометка на удаление		"ВЫБРАТЬ
	ЗначенияСвойствОбъектов.Свойство КАК attribute,
	ПРЕДСТАВЛЕНИЕ(ЗначенияСвойствОбъектов.Значение) КАК value,
	ЗначенияСвойствОбъектов.Объект КАК buypoint,
	NULL КАК sku
ИЗ
	РегистрСведений.ЗначенияСвойствОбъектов КАК ЗначенияСвойствОбъектов
ГДЕ
	ЗначенияСвойствОбъектов.Свойство.НазначениеСвойства = ЗНАЧЕНИЕ(ПланВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Справочник_Контрагенты)
	И ЗначенияСвойствОбъектов.Объект В(&Отбор_ref_buypoints)

//ОБЪЕДИНИТЬ ВСЕ
//
//ВЫБРАТЬ
//	ЗначенияСвойствОбъектов.Свойство,
//	ПРЕДСТАВЛЕНИЕ(ЗначенияСвойствОбъектов.Значение),
//	NULL,
//	ЗначенияСвойствОбъектов.Объект
//ИЗ
//	РегистрСведений.ЗначенияСвойствОбъектов КАК ЗначенияСвойствОбъектов
//ГДЕ
//	ЗначенияСвойствОбъектов.Свойство.НазначениеСвойства = ЗНАЧЕНИЕ(ПланВидовХарактеристик.НазначенияСвойствКатегорийОбъектов.Справочник_Номенклатура)
//	И ЗначенияСвойствОбъектов.Объект В(&Отбор_ref_skus)"	1															
attribute	attribute	*ref_attributes	Ссылка на дополнительный атрибут		ПАРАМЕТР																
value	value		Значение по умолчанию																		
buypoint	buypoint	ref_buypoints	Ссылка на торговую точку		ПАРАМЕТР																
sku	sku	ref_skus	Ссылка на товар		ПАРАМЕТР																
																					
																					
Классификаторы																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted	ПометкаУдаления		Пометка на удаление		"ВЫБРАТЬ
	""НоменклатурнаяГруппа"" КАК Ссылка,
	ЛОЖЬ КАК ПометкаУдаления,
	""Номенклатурная группа"" КАК Наименование,
	""Номенклатурная группа"" КАК Описание,
	""SKU"" КАК Класс,
	1 КАК Номер"	0															
name	Наименование		Наименование																		
description	Описание		Описание																		
owner	Класс		Класс объекта назначения классификатора ('SKU','BUYPOINT')																		
number	Номер		Порядковый номер (от 1 до 10 включительно)																		
																					
																					
Классификаторы (значения)																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted	ПометкаУдаления		Пометка на удаление		"ВЫБРАТЬ РАЗЛИЧНЫЕ
	Номенклатура.НоменклатурнаяГруппа.Ссылка КАК Ссылка,
	""НоменклатурнаяГруппа"" КАК Классификатор,
	Номенклатура.НоменклатурнаяГруппа.Наименование КАК Значение,
	Номенклатура.НоменклатурнаяГруппа.ПометкаУдаления КАК ПометкаУдаления
ИЗ
	Справочник.Номенклатура КАК Номенклатура
ГДЕ
	Номенклатура.НоменклатурнаяГруппа <> ЗНАЧЕНИЕ(Справочник.НоменклатурныеГруппы.ПустаяСсылка)
	И Номенклатура.Ссылка В(&Отбор_ref_skus)"	1															
classifier	Классификатор	*ref_classifiers	Идентификатор классификатора																		
value	Значение		Значение классификатора																		
	#	ref_skus			ПАРАМЕТР																
																					
																					
Классификаторы товаров																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted	*ПометкаУдаления				"ВЫБРАТЬ
	Номенклатура.Ссылка КАК Номенклатура,
	Номенклатура.НоменклатурнаяГруппа КАК Значение
ИЗ
	Справочник.Номенклатура КАК Номенклатура
ГДЕ
	Номенклатура.НоменклатурнаяГруппа <> ЗНАЧЕНИЕ(Справочник.НоменклатурныеГруппы.ПустаяСсылка)
	И Номенклатура.Ссылка В(&Отбор_ref_skus)"	1															
sku	Номенклатура	ref_skus			ПАРАМЕТР																
classifiervalue	Значение	*ref_classifiervalues																			
																					
																					
Продажи																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
datetime	Дата		Дата и время документа		"ВЫБРАТЬ
	РеализацияТоваровУслуг.Ссылка,
	РеализацияТоваровУслуг.ТипЦен,
	РеализацияТоваровУслуг.Ответственный,
	РеализацияТоваровУслуг.Организация,
	РеализацияТоваровУслуг.Склад,
	РеализацияТоваровУслуг.Контрагент,
	РеализацияТоваровУслуг.ДоговорКонтрагента,
	РеализацияТоваровУслуг.ПометкаУдаления,
	РеализацияТоваровУслуг.Проведен,
	РеализацияТоваровУслуг.Дата,
	РеализацияТоваровУслуг.Номер,
	РеализацияТоваровУслуг.Комментарий,
	РеализацияТоваровУслуг.УчитыватьНДС,
	РеализацияТоваровУслуг.СуммаВключаетНДС,
	РеализацияТоваровУслуг.СуммаДокумента,
	РеализацияТоваровУслуг.Товары.(
		Номенклатура,
		ЕдиницаИзмерения.ЕдиницаПоКлассификатору КАК ЕдиницаПоКлассификатору,
		Коэффициент,
		Количество,
		ВЫБОР
			КОГДА РеализацияТоваровУслуг.Товары.СтавкаНДС = ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.НДС18)
				ТОГДА 0.18
			КОГДА РеализацияТоваровУслуг.Товары.СтавкаНДС = ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.НДС10)
				ТОГДА 0.1
			КОГДА РеализацияТоваровУслуг.Товары.СтавкаНДС = ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.НДС20)
				ТОГДА 0.2
			ИНАЧЕ 0
		КОНЕЦ КАК СтавкаНДС,
		Цена
	) КАК Товары
ИЗ
	Документ.РеализацияТоваровУслуг КАК РеализацияТоваровУслуг
ГДЕ
	РеализацияТоваровУслуг.Дата МЕЖДУ &НачалоПериода И &КонецПериода"	1											"ВЫБРАТЬ
	РеализацияТоваровУслуг.Ссылка,
	РеализацияТоваровУслуг.ТипЦен,
	РеализацияТоваровУслуг.Ответственный,
	РеализацияТоваровУслуг.Организация,
	РеализацияТоваровУслуг.Склад,
	РеализацияТоваровУслуг.Контрагент,
	КонтактнаяИнформация.Вид,
	РеализацияТоваровУслуг.ДоговорКонтрагента,
	РеализацияТоваровУслуг.ПометкаУдаления,
	РеализацияТоваровУслуг.Проведен,
	РеализацияТоваровУслуг.Дата,
	РеализацияТоваровУслуг.Номер,
	РеализацияТоваровУслуг.Комментарий,
	РеализацияТоваровУслуг.УчитыватьНДС,
	РеализацияТоваровУслуг.СуммаВключаетНДС,
	РеализацияТоваровУслуг.СуммаДокумента,
	РеализацияТоваровУслуг.Товары.(
		Номенклатура,
		ЕдиницаИзмерения.ЕдиницаПоКлассификатору КАК ЕдиницаПоКлассификатору,
		Коэффициент,
		Количество,
		ВЫБОР
			КОГДА РеализацияТоваровУслуг.Товары.СтавкаНДС = ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.НДС18)
				ТОГДА 0.18
			КОГДА РеализацияТоваровУслуг.Товары.СтавкаНДС = ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.НДС10)
				ТОГДА 0.1
			КОГДА РеализацияТоваровУслуг.Товары.СтавкаНДС = ЗНАЧЕНИЕ(Перечисление.СтавкиНДС.НДС20)
				ТОГДА 0.2
			ИНАЧЕ 0
		КОНЕЦ КАК СтавкаНДС,
		Цена
	) КАК Товары
ИЗ
	РегистрСведений.КонтактнаяИнформация КАК КонтактнаяИнформация
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.ВидыКонтактнойИнформации КАК ВидыКонтактнойИнформации
		ПО КонтактнаяИнформация.Вид = ВидыКонтактнойИнформации.Ссылка
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.РеализацияТоваровУслуг КАК РеализацияТоваровУслуг
		ПО (КонтактнаяИнформация.Объект = РеализацияТоваровУслуг.Контрагент
				И (ВЫРАЗИТЬ(РеализацияТоваровУслуг.АдресДоставки КАК СТРОКА(200))) = (ВЫРАЗИТЬ(КонтактнаяИнформация.Представление КАК СТРОКА(200))))
ГДЕ
	РеализацияТоваровУслуг.Дата МЕЖДУ &НачалоПериода И &КонецПериода"	1			
printcode	Номер		Код объекта															"// генерация sid
лОбъекты.Колонки.Добавить(""ТорговаяТочка"");
Для Каждого стрДоп Из лОбъекты Цикл
	стрДоп.ТорговаяТочка = XMLСтрока(стрДоп.Контрагент)+""***""+XMLСтрока(стрДоп.Вид);
КонецЦикла;"			
deleted	ПометкаУдаления		Пометка на удаление																		
docstate		*ref_docstates	Ссылка на статус состояния документа																		
pricetype	ТипЦен	*ref_pricetypes	Ссылка на тип цены		РеализацияТоваровУслуг.ТипЦен																
employee		ref_employees	Ссылка на сотрудника																		
firm	Организация	ref_firms	Ссылка на собственную фирму		РеализацияТоваровУслуг.Организация																
store	Склад	ref_stores	Ссылка на склад		РеализацияТоваровУслуг.Склад																
buyer	Контрагент	ref_buyers	Ссылка на владельца / покупателя		РеализацияТоваровУслуг.Контрагент																
buypoint	Контрагент	*ref_buypoints	Ссылка на торговую точку										ДоговорКонтрагента	*		ТорговаяТочка	ВидыКонтактнойИнформации.Ссылка				
counteragent	Контрагент	*ref_counteragents	Ссылка на контрагента / юр. лицо / плательщика																		
agreement	ДоговорКонтрагента	ref_agreements	Ссылка на договор		РеализацияТоваровУслуг.ДоговорКонтрагента																
paytype	*paytype	*ref_paytypes	Ссылка на тип оплаты																		
shipping			Фактическая дата и время отгрузки товара																		
comment	Комментарий		Произвольный комментарий																		
extrarate			Процент общей наценки / скидки на документ																		
includevat	СуммаВключаетНДС		НДС включен в сумму																		
usevat	УчитыватьНДС		Учитывать НДС																		
amount	СуммаДокумента		Сумма																		
processed	Проведен		Признак проведения документа																		
																					
Продажи (ТЧ)																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted			Пометка на удаление		Товары	Х															
sku	Номенклатура	ref_skus	Ссылка на товар		РеализацияТоваровУслуг.Товары.Номенклатура																
unit	ЕдиницаПоКлассификатору	*ref_units	Ссылка на единицу измерения																		
pricetype		*ref_pricetypes	Ссылка на тип цены																		
factor	Коэффициент		Коэффициент пересчета в базовую единицу измерения																		
quantity	Количество		Количество в выбранной единице измерения																		
extrarate			Процент наценки / скидки																		
vatrate	СтавкаНДС		Процент ставки НДС																		
price	Цена		Цена за выбранную единицу измерения без учета скидок / наценок																		
																					
																					
Заявки																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке	Доп. после загрузки												
					Х	Х		"// шапка
лОбъект.УчитыватьНДС = Истина;
лОбъект.СуммаВключаетНДС = лОбъект.ТипЦен.ЦенаВключаетНДС;

Если лПеременные.Свойство(""ТТ_КИ"") Тогда
	лВидАдреса = XMLЗначение(Тип(""СправочникСсылка.ВидыКонтактнойИнформации""),СтрПолучитьСтроку(СтрЗаменить(лПеременные.ТТ_КИ,""***"",Символы.ПС),2));
	лОбъект.АдресДоставки = ПолучитьКИ_10(лОбъект.Контрагент, лВидАдреса);
КонецЕсли;

лОбъект.СкладГруппа = лПеременные.СкладГруппа;

лОбъект.ВалютаДокумента = Константы.ВалютаРегламентированногоУчета.Получить();
СтруктураКурсаВзаиморасчетов = МодульВалютногоУчета.ПолучитьКурсВалюты(лОбъект.ВалютаДокумента, лОбъект.Дата);
лОбъект.КурсВзаиморасчетов = СтруктураКурсаВзаиморасчетов.Курс;
лОбъект.КратностьВзаиморасчетов = СтруктураКурсаВзаиморасчетов.Кратность;

//Если лПеременные.paytype=""Нал"" Тогда
//	лОбъект.НаличнаяОплата = Истина;
//КонецЕсли;

лОбъект.СтруктурнаяЕдиница = лОбъект.Организация.ОсновнойБанковскийСчет;

//лОбъект.ОтражатьВУправленческомУчете = Истина;
//лОбъект.ОтражатьВБухгалтерскомУчете = Истина;
//лОбъект.ОтражатьВНалоговомУчете = Истина;

лОбъект.Комментарий = ""#Mobicom# "" + лОбъект.Комментарий;

//лАтрибут = ПолучитьДопАтрибут(ДокXML, лИмяРаздела, sid, ""DOC_PREORDERS#ДокументыСразу"", Тип(""Булево""));
//Если НЕ лАтрибут=Неопределено Тогда
//	лОбъект.Комментарий = лОбъект.Комментарий + "" # ДокументыСразу - ""+лАтрибут;
//КонецЕсли;

лОбъект.УстановитьВремя(РежимАвтоВремя.ТекущееИлиПоследним);
//лОбъект.УстановитьНовыйНомер(лОбъект.Организация.Префикс);"	"// расчет авт.скидок
лОбъект.ПересчитатьАвтоматическиеСкидки();

// пересчитываем ручн.скидки с учетом автоматических
Для Каждого стрДоп Из лОбъект.Товары Цикл
	стрДоп.ПроцентСкидкиНаценки = стрДоп.ПроцентСкидкиНаценки-стрДоп.ПроцентАвтоматическихСкидок;
КонецЦикла;

лОбъект.ПересчитатьАвтоматическиеСкидки();

лКонстанты.СкидкаПоДокументу = 0; // на всякий случай"												
datetime	Дата		Дата и время документа																*		"// шапка
лОбъект.ВидОперации = Перечисления.ВидыОперацийРеализацияТоваров.ПродажаКомиссия;
лОбъект.ВидПередачи = Перечисления.ВидыПередачиТоваров.СоСклада;

лОбъект.УчитыватьНДС = Истина;
лОбъект.СуммаВключаетНДС = лОбъект.ТипЦен.ЦенаВключаетНДС;

Если лПеременные.Свойство(""ТТ_КИ"") Тогда
	лВидАдреса = XMLЗначение(Тип(""СправочникСсылка.ВидыКонтактнойИнформации""),СтрПолучитьСтроку(СтрЗаменить(лПеременные.ТТ_КИ,""***"",Символы.ПС),2));
	лОбъект.АдресДоставки = ПолучитьКИ_10(лОбъект.Контрагент, лВидАдреса);
КонецЕсли;

//лОбъект.СкладГруппа = лПеременные.СкладГруппа;

лОбъект.ВалютаДокумента = Константы.ВалютаРегламентированногоУчета.Получить();
СтруктураКурсаВзаиморасчетов = МодульВалютногоУчета.ПолучитьКурсВалюты(лОбъект.ВалютаДокумента, лОбъект.Дата);
лОбъект.КурсВзаиморасчетов = СтруктураКурсаВзаиморасчетов.Курс;
лОбъект.КратностьВзаиморасчетов = СтруктураКурсаВзаиморасчетов.Кратность;

лОбъект.БанковскийСчетОрганизации = лОбъект.Организация.ОсновнойБанковскийСчет;

лОбъект.ОтражатьВУправленческомУчете = Истина;
лОбъект.ОтражатьВБухгалтерскомУчете = Истина;
лОбъект.ОтражатьВНалоговомУчете = Истина;

лОбъект.Комментарий = ""#Mobicom# "" + лОбъект.Комментарий;

лОбъект.УстановитьВремя(РежимАвтоВремя.ТекущееИлиПоследним);
//лОбъект.УстановитьНовыйНомер(лОбъект.Организация.Префикс);"
printcode			Код объекта																		
deleted	ПометкаУдаления		Пометка на удаление																		
docstate		ref_docstates	Ссылка на статус состояния документа																		
pricetype	ТипЦен	ref_pricetypes	Ссылка на тип цены																		
employee	Ответственный	ref_employees	Ссылка на сотрудника																		
firm	Организация	ref_firms	Ссылка на собственную фирму																		
store	СкладГруппа	ref_stores	Ссылка на склад					лПеременные.Вставить("СкладГруппа",XMLЗначение(Тип(элТЗЭ.Представление),лЗначение));											Склад	*	
buyer	Контрагент	ref_buyers	Ссылка на владельца / покупателя																		
buypoint		ref_buypoints	Ссылка на торговую точку													Комментарий	лПеременные.Вставить("ТТ_КИ", лЗначение);				
counteragent		ref_counteragents	Ссылка на контрагента / юр. лицо / плательщика																		
agreement	ДоговорКонтрагента	ref_agreements	Ссылка на договор																		
paytype	*Комментарий	ref_paytypes	Ссылка на тип оплаты					лПеременные.Вставить("paytype",лЗначение);													
deliverydate	ДатаОтгрузки		Планируемая дата доставки																Дата		
deliverytimefrom			Временной интервал доставки, от																		
deliverytimetill			Временной интервал доставки, до																		
comment	Комментарий		Произвольный комментарий																		
extrarate	Комментарий		Процент общей наценки / скидки на документ					лКонстанты.Вставить("СкидкаПоДокументу",лЗначение);													
includevat	*СуммаВключаетНДС		НДС включен в сумму																		
usevat	*УчитыватьНДС		Учитывать НДС																		
amount	СуммаДокумента		Сумма																		
processed			Признак проведения документа																		
status			Х																		
																					
Заявки (ТЧ)																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted			Пометка на удаление		Товары	Х		"// строка ТЧ
стрТЧ.СтавкаНДС = стрТЧ.Номенклатура.СтавкаНДС;
//стрТЧ.Размещение = лОбъект.СкладГруппа;
стрТЧ.ЕдиницаИзмерения = ПолучитьЕдиницуТовара_10(стрТЧ, лПеременные.ЕдиницаПоКлассификатору);
стрТЧ.Количество = стрТЧ.Количество/стрТЧ.Коэффициент;

стрТЧ.ПроцентСкидкиНаценки = -(лПеременные.ПроцентСкидкиНаценки + лКонстанты.СкидкаПоДокументу)*100;

ОбработкаТабличныхЧастей.ПриИзмененииНоменклатурыТабЧасти(стрТЧ, лОбъект);
ОбработкаТабличныхЧастей.ЗаполнитьСтавкуНДСТабЧасти(стрТЧ, лОбъект);
//ОбработкаТабличныхЧастей.ЗаполнитьЕдиницуЦенуПродажиТабЧасти(стрТЧ, лОбъект, Константы.ВалютаРегламентированногоУчета);
ОбработкаТабличныхЧастей.ЗаполнитьЦенуПродажиТабЧасти(стрТЧ, лОбъект, Константы.ВалютаРегламентированногоУчета);
ОбработкаТабличныхЧастей.РассчитатьСуммуТабЧасти(стрТЧ, лОбъект);
ОбработкаТабличныхЧастей.РассчитатьСуммуНДСТабЧасти(стрТЧ, лОбъект);
ОбработкаТабличныхЧастей.РассчитатьПлановуюСебестоимостьВСтрокеТабЧасти(стрТЧ, лОбъект, Константы.ВалютаРегламентированногоУчета);"													
sku	Номенклатура	ref_skus	Ссылка на товар																		"// строка ТЧ
стрТЧ.СтавкаНДС = стрТЧ.Номенклатура.СтавкаНДС;
//стрТЧ.Размещение = лОбъект.СкладГруппа;
стрТЧ.ЕдиницаИзмерения = ПолучитьЕдиницуТовара_10(стрТЧ, лПеременные.ЕдиницаПоКлассификатору);
стрТЧ.Количество = стрТЧ.Количество/стрТЧ.Коэффициент;

стрТЧ.Качество = Справочники.Качество.Новый;

стрТЧ.ПроцентСкидкиНаценки = -(стрТЧ.ПроцентСкидкиНаценки + лКонстанты.СкидкаПоДокументу)*100;

ОбработкаТабличныхЧастей.ПриИзмененииНоменклатурыТабЧасти(стрТЧ, лОбъект);
ОбработкаТабличныхЧастей.ЗаполнитьСпособСписанияОстаткаТоваровТабЧасти(стрТЧ, лОбъект);
ОбработкаТабличныхЧастей.ЗаполнитьСтавкуНДСТабЧасти(стрТЧ, лОбъект);
ОбработкаТабличныхЧастей.ЗаполнитьЕдиницуЦенуПродажиТабЧасти(стрТЧ, лОбъект, Константы.ВалютаРегламентированногоУчета);
ОбработкаТабличныхЧастей.РассчитатьСуммуТабЧасти(стрТЧ, лОбъект);
ОбработкаТабличныхЧастей.РассчитатьСуммуНДСТабЧасти(стрТЧ, лОбъект);
ОбработкаТабличныхЧастей.РассчитатьПлановуюСебестоимостьВСтрокеТабЧасти(стрТЧ, лОбъект, Константы.ВалютаРегламентированногоУчета);"
unit	ЕдиницаИзмерения	ref_units	Ссылка на единицу измерения					лПеременные.Вставить("ЕдиницаПоКлассификатору",XMLЗначение(Тип(элТЗЭ.Представление),лЗначение));													
pricetype		ref_pricetypes	Ссылка на тип цены																		
factor	Коэффициент		Коэффициент пересчета в базовую единицу измерения																		
quantity	Количество		Количество в выбранной единице измерения																		
extrarate	ПроцентСкидкиНаценки		Процент наценки / скидки					лПеременные.Вставить("ПроцентСкидкиНаценки", Число(лЗначение));													
vatrate	*СтавкаНДС		Процент ставки НДС																		
price	Цена		Цена за выбранную единицу измерения без учета скидок / наценок																		
																					
																					
ПКО																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
					Х	Х		"// шапка
лОбъект.Контрагент = лПеременные.Контрагент;

лОбъект.ВалютаДокумента = Константы.ВалютаРегламентированногоУчета.Получить();
лОбъект.ВидОперации = Перечисления.ВидыОперацийПКО.ОплатаПокупателя;
лОбъект.СтатьяДвиженияДенежныхСредств = Справочники.СтатьиДвиженияДенежныхСредств.ОплатаПокупателя;
лОбъект.Касса = ПолучитьКассу(лОбъект.Организация);
лОбъект.ПринятоОт = ?(лОбъект.Контрагент=Неопределено,"""",?(ПустаяСтрока(лОбъект.Контрагент.НаименованиеПолное), лОбъект.Контрагент.Наименование, лОбъект.Контрагент.НаименованиеПолное));
лОбъект.СтавкаНДС = Перечисления.СтавкиНДС.НДС18;

лОбъект.ОтражатьВУправленческомУчете = Истина;
лОбъект.ОтражатьВБухгалтерскомУчете = Истина;
лОбъект.ОтражатьВНалоговомУчете = Истина;
лОбъект.ОтраженоВОперУчете = Истина;

лОбъект.Комментарий = ""#Mobicom# "" + лОбъект.Комментарий;

лОбъект.УстановитьВремя(РежимАвтоВремя.ТекущееИлиПоследним);
//лОбъект.УстановитьНовыйНомер(лОбъект.Организация.Префикс);"													
datetime	Дата		Дата и время документа																		
printcode			Код объекта																		
deleted	ПометкаУдаления		Пометка на удаление																		
docstate		ref_docstates	Ссылка на статус состояния документа																		
employee	Ответственный	ref_employees	Ссылка на сотрудника																		
firm	Организация	ref_firms	Ссылка на собственную фирму																		
cashregister	*Касса	ref_cashregisters	Ссылка на кассу																		
buyer		ref_buyers	Ссылка на владельца / покупателя																		
buypoint	Контрагент	ref_buypoints	Ссылка на торговую точку					лПеременные.Вставить("Контрагент",XMLЗначение(Тип(элТЗЭ.Представление),лЗначение));													
counteragent		ref_counteragents	Ссылка на контрагента / юр. лицо / плательщика																		
agreement	ДоговорКонтрагента	ref_agreements	Ссылка на договор																		
comment	Комментарий		Произвольный комментарий																		
amount	СуммаДокумента		Сумма																		
processed			Признак проведения документа																		
																					
ПКО (ТЧ)																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted			Пометка на удаление		РасшифровкаПлатежа	Х		"// строка ТЧ
СтруктураКурсаВзаиморасчетов = МодульВалютногоУчета.ПолучитьКурсВалюты(лОбъект.ВалютаДокумента, лОбъект.Дата);
стрТЧ.КурсВзаиморасчетов = СтруктураКурсаВзаиморасчетов.Курс;
стрТЧ.КратностьВзаиморасчетов = СтруктураКурсаВзаиморасчетов.Кратность;

стрТЧ.СтатьяДвиженияДенежныхСредств = лОбъект.СтатьяДвиженияДенежныхСредств;
стрТЧ.СуммаВзаиморасчетов = стрТЧ.СуммаПлатежа; 
стрТЧ.ДоговорКонтрагента = лОбъект.ДоговорКонтрагента; 
стрТЧ.СтавкаНДС	= Перечисления.СтавкиНДС.НДС18;

стрТЧ.ДокументРасчетовСКонтрагентом = ПолучитьОснованиеДляПКО(лПеременные.docinfo, лПеременные.invoice, ТипыЗначенийЭлементов);
Если ЗначениеЗаполнено(стрТЧ.ДокументРасчетовСКонтрагентом) Тогда
	стрТЧ.Сделка = стрТЧ.ДокументРасчетовСКонтрагентом.Сделка;
КонецЕсли;

УправлениеДенежнымиСредствами.ПересчитатьСуммуНДС(стрТЧ);"													
buypoint		ref_buypoints	Ссылка на торговую точку																		
firm		ref_firms	Ссылка на собственную фирму																		
counteragent		ref_counteragents	Ссылка на контрагента / юр. лицо / плательщика																		
agreement		ref_agreements	Ссылка на договор																		
docinfo	ДокументРасчетовСКонтрагентом		Описание документа задолженности					лПеременные.Вставить("docinfo",лЗначение);													
invoice_guid	ДокументРасчетовСКонтрагентом	doc_invoices	Ссылка на документ задолженности					лПеременные.Вставить("invoice",лЗначение);													
amount	СуммаПлатежа		Сумма задолженности																		
																					
																					
Возвраты																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
					Х	Х		"// шапка
лОбъект.СкладОрдер = лПеременные.СкладОрдер;

Если лПеременные.Свойство(""ТТ_КИ"") Тогда
	лВидАдреса = XMLЗначение(Тип(""СправочникСсылка.ВидыКонтактнойИнформации""),СтрПолучитьСтроку(СтрЗаменить(лПеременные.ТТ_КИ,""***"",Символы.ПС),2));
	лОбъект.Комментарий = лОбъект.Комментарий +"" # ""+ПолучитьКИ_10(лОбъект.Контрагент, лВидАдреса);
КонецЕсли;

лОбъект.ВалютаДокумента = Константы.ВалютаРегламентированногоУчета.Получить();
СтруктураКурсаВзаиморасчетов = МодульВалютногоУчета.ПолучитьКурсВалюты(лОбъект.ВалютаДокумента, лОбъект.Дата);
лОбъект.КурсВзаиморасчетов = СтруктураКурсаВзаиморасчетов.Курс;
лОбъект.КратностьВзаиморасчетов = СтруктураКурсаВзаиморасчетов.Кратность;

лОбъект.ВидПоступления = Перечисления.ВидыПоступленияТоваров.НаСклад;
лОбъект.ТипЦен = лОбъект.ДоговорКонтрагента.ТипЦен;

лОбъект.ОтражатьВУправленческомУчете = Истина;
лОбъект.ОтражатьВБухгалтерскомУчете = Истина;
лОбъект.ОтражатьВНалоговомУчете = Истина;

лОбъект.Комментарий = ""#Mobicom# "" + лОбъект.Комментарий;

лОбъект.УстановитьВремя(РежимАвтоВремя.ТекущееИлиПоследним);
//лОбъект.УстановитьНовыйНомер(лОбъект.Организация.Префикс);"													
datetime	Дата		Дата и время документа																		
printcode			Код объекта																		
deleted	ПометкаУдаления		Пометка на удаление																		
docstate		ref_docstates	Ссылка на статус состояния документа																		
pricetype	*ТипЦен	ref_pricetypes	Ссылка на тип цены																		
employee	Ответственный	ref_employees	Ссылка на сотрудника																		
firm	Организация	ref_firms	Ссылка на собственную фирму																		
store	СкладОрдер	ref_stores	Ссылка на склад					лПеременные.Вставить("СкладОрдер",XMLЗначение(Тип(элТЗЭ.Представление),лЗначение));													
buyer		ref_buyers	Ссылка на владельца / покупателя																		
buypoint	Контрагент	ref_buypoints	Ссылка на торговую точку													Комментарий	лПеременные.Вставить("ТТ_КИ", лЗначение);				
counteragent		ref_counteragents	Ссылка на контрагента / юр. лицо / плательщика																		
agreement	ДоговорКонтрагента	ref_agreements	Ссылка на договор																		
paytype		ref_paytypes	Ссылка на тип оплаты																		
deliverydate			Планируемая дата доставки																		
deliverytimefrom			Временной интервал доставки, от																		
deliverytimetill			Временной интервал доставки, до																		
comment	Комментарий		Произвольный комментарий																		
extrarate			Процент общей наценки / скидки на документ																		
includevat	СуммаВключаетНДС		НДС включен в сумму																		
usevat	УчитыватьНДС		Учитывать НДС																		
amount	СуммаДокумента		Сумма																		
processed			Признак проведения документа																		
																					
Возвраты (ТЧ)																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted			Пометка на удаление		Товары	Х		"// строка ТЧ
стрТЧ.СтавкаНДС = стрТЧ.Номенклатура.СтавкаНДС;
стрТЧ.ЕдиницаИзмерения = ПолучитьЕдиницуТовара_10(стрТЧ, лПеременные.ЕдиницаПоКлассификатору);
стрТЧ.Количество = стрТЧ.Количество/стрТЧ.Коэффициент;

стрТЧ.Качество = Справочники.Качество.Новый;

ОбработкаТабличныхЧастей.ПриИзмененииНоменклатурыТабЧасти(стрТЧ, лОбъект);
ОбработкаТабличныхЧастей.ЗаполнитьСтавкуНДСТабЧасти(стрТЧ, лОбъект); 
ОбработкаТабличныхЧастей.ЗаполнитьЕдиницуЦенуПродажиТабЧасти(стрТЧ, лОбъект, Константы.ВалютаРегламентированногоУчета); 
ОбработкаТабличныхЧастей.РассчитатьСуммуТабЧасти(стрТЧ, лОбъект);
ОбработкаТабличныхЧастей.РассчитатьСуммуНДСТабЧасти(стрТЧ, лОбъект);"													
sku	Номенклатура	ref_skus	Ссылка на товар																		
unit	ЕдиницаИзмерения	ref_units	Ссылка на единицу измерения					лПеременные.Вставить("ЕдиницаПоКлассификатору",XMLЗначение(Тип(элТЗЭ.Представление),лЗначение));													
pricetype		ref_pricetypes	Ссылка на тип цены																		
factor	Коэффициент		Коэффициент пересчета в базовую единицу измерения																		
quantity	Количество		Количество в выбранной единице измерения																		
extrarate			Процент наценки / скидки																		
vatrate	*СтавкаНДС		Процент ставки НДС																		
price	Цена		Цена за выбранную единицу измерения без учета скидок / наценок																		
overdue			Товар просрочен																		
																					
																					
Значения дополнительных атрибутов																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted			Пометка на удаление		Х	Х		ЗагрузитьЗначениеАтрибута_10(лОбъект, лПеременные, did, ТипыЗначенийЭлементов, ТаблицаПринятыхОбъектов)													
object	Объект		Ссылка на объект принадлежности атрибута					лПеременные.Вставить("object_sid",tag.firstChild.getAttribute("sid")); лПеременные.Вставить("object_ref",pref); лПеременные.Вставить("object",лЗначение);													
attribute	Свойство		Ссылка на дополнительный атрибут					лПеременные.Вставить("attribute",лЗначение); лПеременные.Вставить("attribute_ref",pref);													
value	Значение		Значение					лПеременные.Вставить("value",лЗначение); лПеременные.Вставить("value_ref",pref);													
																					
																					
Перепись (сенсус) владельцев торговых точек																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
					Х	Х		"// заполнение данных
лОбъект.Комментарий = """"+ лПеременные.employee +"" # ""+ лПеременные.comment;

лСенсус = Неопределено;
лКонстанты.Свойство(""Сенсус"",лСенсус);
Если лСенсус=Неопределено Тогда
	лСенсус = Новый ТаблицаЗначений;
	лСенсус.Колонки.Добавить(""buyer"");
	лСенсус.Колонки.Добавить(""Ссылка"");
КонецЕсли;

элТЗЭ = ТипыЗначенийЭлементов.НайтиПоЗначению(""ref_buyers"");
Если ЗначениеЗаполнено(лПеременные.buyer_did) Тогда
	лОбъектСсылка = XMLЗначение(Тип(элТЗЭ.Представление),лПеременные.buyer_did);
	лОбъект = лОбъектСсылка.ПолучитьОбъект();
	СообщитьПодробно(""Обновляем объект ""+лОбъект+"" (""+лПеременные.buyer+"")"", СтатусСообщения.Обычное, Истина, ЗаписьВЖурнал);
Иначе
	стрТПО = ТаблицаПринятыхОбъектов.Найти(лПеременные.buyer, ""did"");
	Если стрТПО=Неопределено Тогда
		лОбъектСсылка = Справочники.Контрагенты.ПолучитьСсылку();
		лОбъект.УстановитьСсылкуНового(лОбъектСсылка);
	Иначе
		лОбъектСсылка = XMLЗначение(Тип(элТЗЭ.Представление), стрТПО.sid);
		лОбъект = лОбъектСсылка.ПолучитьОбъект();
		СообщитьПодробно(""Обновляем объект ""+лОбъект+"" (""+стрТПО.sid+"")"", СтатусСообщения.Обычное, Истина, ЗаписьВЖурнал);
	КонецЕсли;
КонецЕсли;

лОбъект.Наименование = ""#""+лПеременные.name;

Попытка
//	лОбъект.Записать();
//	лОбъектСсылка = лОбъект.Ссылка;

	лСтрСенсус = лСенсус.Добавить();
	лСтрСенсус.buyer = лПеременные.buyer;
	лСтрСенсус.Ссылка =лОбъектСсылка;

	лКонстанты.Вставить(""Сенсус"",лСенсус);

	ДополнительноеПодтверждение(лКонстанты, ""ref_buyers"", лОбъектСсылка, лПеременные.buyer, ТаблицаПринятыхОбъектов);
Исключение
	СообщитьПодробно(ОписаниеОшибки(), СтатусСообщения.Внимание, Истина, ЗаписьВЖурнал);
КонецПопытки;"													
name	Наименование		Наименование					лПеременные.Вставить("name",лЗначение);													
printcode	*Код		Код объекта																		
deleted	*ПометкаУдаления		Пометка на удаление																		
store		ref_stores	Ссылка на склад отгрузки																		
pricetype	*ТипЦен	ref_pricetypes	Ссылка на тип цен																		
address	Комментарий		Адрес					лПеременные.Вставить("address",лЗначение);													
phone	Комментарий		Телефон					лПеременные.Вставить("phone",лЗначение);													
contact	Комментарий		Контактное лицо					лПеременные.Вставить("contact",лЗначение);													
canexceedlimit	*КонтролироватьЧислоДнейЗадолженности		Признак разрешения превышать срок кредита																		
creditlimit	*ДопустимаяСуммаЗадолженности		Ограничение суммы кредита в основной валюте																		
creditdeadline	*ДопустимоеЧислоДнейЗадолженности		Ограничение глубины кредита в днях																		
maxorderamount			Ограничение максимальной сумма заказа																		
minorderamount			Ограничение минимальной сумма заказа																		
maxdiscount			Ограничение максимального процента скидки																		
mindiscount			Ограничение минимального процента скидки																		
censusapproved																					
buyer	Комментарий	ref_buyers						лПеременные.Вставить("buyer",tag.firstChild.getAttribute("sid")); лПеременные.Вставить("buyer_did",tag.firstChild.getAttribute("did"));													
comment	Комментарий							лПеременные.Вставить("comment",лЗначение);													
employee	Комментарий	ref_employees						лПеременные.Вставить("employee",XMLЗначение(Тип(элТЗЭ.Представление),лЗначение));													
																					
																					
Сенсус (перепись) торговых точек																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
					Х	Х		"// заполнение данных
лСенсус = Неопределено;
лКонстанты.Свойство(""Сенсус"",лСенсус);
Если лСенсус=Неопределено Тогда
	лСенсус = Новый ТаблицаЗначений;
	лСенсус.Колонки.Добавить(""buyer"");
	лСенсус.Колонки.Добавить(""Ссылка"");
КонецЕсли;

лСенсусОК = Истина;
Если лПеременные.Свойство(""buyer"") Тогда
	стрСенсус = лСенсус.Найти(лПеременные.buyer,""buyer"");
Иначе
	стрСенсус = Неопределено;
КонецЕсли;
Если стрСенсус<>Неопределено Тогда
	лОбъект1=стрСенсус.Ссылка.ПолучитьОбъект();
	ЗаполнитьЗначенияСвойств(лОбъект1,лОбъект,,""Ссылка,Владелец"");
	лОбъект = лОбъект1;
	лОбъектСсылка = лОбъект.Ссылка;
	//лСенсус.Удалить(стрСенсус); // иначе если несколько новых точек заведены на одного нового владельца - они перезапишутся на одну точку
Иначе
	Попытка
		элТЗЭ = ТипыЗначенийЭлементов.НайтиПоЗначению(""ref_buypoints"");
		Если ЗначениеЗаполнено(лПеременные.buypoint_did) Тогда
			лОбъектСсылка = XMLЗначение(Тип(элТЗЭ.Представление),лПеременные.buypoint_did);
			лОбъект = лОбъектСсылка.ПолучитьОбъект();
			СообщитьПодробно(""Обновляем объект ""+лОбъект+"" (""+лПеременные.buypoint+"")"", СтатусСообщения.Обычное, Истина, ЗаписьВЖурнал);
		Иначе
			стрТПО = ТаблицаПринятыхОбъектов.Найти(лПеременные.buypoint, ""did"");
			Если стрТПО=Неопределено Тогда
				лОбъектСсылка = Справочники.Контрагенты.ПолучитьСсылку();
				лОбъект.УстановитьСсылкуНового(лОбъектСсылка);
				// вообще не красиво, но иначе никак. или КонтактныеЛицаКонтрагентов не заполнять
				лОбъект.Записать();
			Иначе
				лОбъектСсылка = XMLЗначение(Тип(элТЗЭ.Представление), стрТПО.sid);
				лОбъект = лОбъектСсылка.ПолучитьОбъект();
				СообщитьПодробно(""Обновляем объект ""+лОбъект+"" (""+стрТПО.sid+"")"", СтатусСообщения.Обычное, Истина, ЗаписьВЖурнал);
			КонецЕсли;
		КонецЕсли;
	Исключение
		СообщитьПодробно(""Не удалась промежуточная запись объекта ""+sid, СтатусСообщения.Важное, Истина, ЗаписьВЖурнал);
		СообщитьПодробно(ОписаниеОшибки(), СтатусСообщения.Важное, Истина, ЗаписьВЖурнал);
		лСенсусОК = Ложь;
	КонецПопытки;
	лОбъектСсылка = лОбъект.Ссылка; // норм или нет?
КонецЕсли;

лОбъект.Наименование = ""#""+лПеременные.name;
лОбъект.НаименованиеПолное = лПеременные.fullname;
лОбъект.Комментарий = """"+ лПеременные.employee +"" # ""+ лПеременные.comment;

Если лСенсусОК Тогда
	Если ЗначениеЗаполнено(лПеременные.address) Тогда
		лМенеджерЗаписи = РегистрыСведений.КонтактнаяИнформация.СоздатьМенеджерЗаписи();
		лМенеджерЗаписи.Объект = лОбъектСсылка;
		лМенеджерЗаписи.Тип = Перечисления.ТипыКонтактнойИнформации.Адрес;
		лМенеджерЗаписи.Вид = Справочники.ВидыКонтактнойИнформации.ФактАдресКонтрагента;
		лМенеджерЗаписи.Представление = лПеременные.address;
		лМенеджерЗаписи.Записать();
	КонецЕсли;

	Если ЗначениеЗаполнено(лПеременные.phone) Тогда
		лМенеджерЗаписи = РегистрыСведений.КонтактнаяИнформация.СоздатьМенеджерЗаписи();
		лМенеджерЗаписи.Объект = лОбъектСсылка;
		лМенеджерЗаписи.Тип = Перечисления.ТипыКонтактнойИнформации.Телефон;
		лМенеджерЗаписи.Вид = Справочники.ВидыКонтактнойИнформации.ТелефонКонтрагента;
		лМенеджерЗаписи.Представление = лПеременные.phone;
		лМенеджерЗаписи.Записать();
	КонецЕсли;

	Если ЗначениеЗаполнено(лПеременные.contact) Тогда
		лКонтакт = Справочники.КонтактныеЛица.СоздатьЭлемент();
		лКонтакт.Наименование = лПеременные.contact;
		лКонтакт.Записать();
		
		лКонтактКонтрагента = Справочники.КонтактныеЛицаКонтрагентов.СоздатьЭлемент();
		лКонтактКонтрагента.Владелец = лОбъектСсылка;
		лКонтактКонтрагента.КонтактноеЛицо = лКонтакт.Ссылка;
		лКонтактКонтрагента.Наименование = лКонтакт.Наименование;
		лКонтактКонтрагента.Записать();

		лОбъект.ОсновноеКонтактноеЛицо = лКонтактКонтрагента.Ссылка;
	КонецЕсли;
КонецЕсли;

лОбъект.Покупатель = Истина;
лОбъект.ЮрФизЛицо = Перечисления.ЮрФизЛицо.ЮрЛицо;

ДополнительноеПодтверждение(лКонстанты, ""ref_buypoints"", лОбъектСсылка, лПеременные.buypoint, ТаблицаПринятыхОбъектов);"													
name	Наименование		Наименование					лПеременные.Вставить("name",лЗначение);													
printcode	*Код		Код объекта																		
deleted	*ПометкаУдаления		Пометка на удаление																		
buyer	Комментарий	ref_buyers	Ссылка на владельца / покупателя					лПеременные.Вставить("buyer",tag.firstChild.getAttribute("sid"));													
store		ref_stores	Ссылка на склад отгрузки																		
pricetype	*ТипЦен	ref_pricetypes	Ссылка на тип цен																		
buypointtype	Родитель	ref_buypointtypes	Ссылка на тип торговой точки																		
fullname	НаименованиеПолное		Полное наименование					лПеременные.Вставить("fullname",лЗначение);													
address	Комментарий		Адрес					лПеременные.Вставить("address",лЗначение);													
phone	Комментарий		Телефон					лПеременные.Вставить("phone",лЗначение);													
contact	Комментарий		Контактное лицо					лПеременные.Вставить("contact",лЗначение);													
vatstatus			Плательщик НДС																		
canexceedlimit	*КонтролироватьЧислоДнейЗадолженности		Признак разрешения превышать срок кредита																		
creditlimit	*ДопустимаяСуммаЗадолженности		Ограничение суммы кредита в основной валюте																		
creditdeadline	*ДопустимоеЧислоДнейЗадолженности		Ограничение глубины кредита в днях																		
maxorderamount			Ограничение максимальной сумма заказа																		
minorderamount			Ограничение минимальной сумма заказа																		
maxdiscount			Ограничение максимального процента скидки																		
mindiscount			Ограничение минимального процента скидки																		
extrarate			Процент наценки / скидки																		
censusapproved																					
buypoint	Комментарий	ref_buypoints						лПеременные.Вставить("buypoint",tag.firstChild.getAttribute("sid")); лПеременные.Вставить("buypoint_did",tag.firstChild.getAttribute("did"));													
comment	Комментарий							лПеременные.Вставить("comment",лЗначение);													
employee	Комментарий	ref_employees						лПеременные.Вставить("employee",XMLЗначение(Тип(элТЗЭ.Представление),лЗначение));													
																					
																					
Скидки																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted			Пометка на удаление		"ВЫБРАТЬ
	СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки,
	СкидкиНаценкиНоменклатурыСрезПоследних.Номенклатура,
	ВЫБОР
		КОГДА СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки ССЫЛКА Справочник.ДоговорыКонтрагентов
			ТОГДА 2
		КОГДА СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки ССЫЛКА Справочник.Контрагенты
			ТОГДА 3
		КОГДА СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки = ЗНАЧЕНИЕ(Справочник.Склады.ПустаяСсылка)
			ТОГДА 3
		ИНАЧЕ 9
	КОНЕЦ КАК ТипСкидки,
	ВЫБОР
		КОГДА СкидкиНаценкиНоменклатурыСрезПоследних.Период >= &ДатаФормирования
			ТОГДА СкидкиНаценкиНоменклатурыСрезПоследних.Период
		ИНАЧЕ ДОБАВИТЬКДАТЕ(&ДатаФормирования, ДЕНЬ, -1)
	КОНЕЦ КАК ДатаНачала,
	СкидкиНаценкиНоменклатурыСрезПоследних.ДатаОкончания КАК ДатаОкончания,
	ВЫБОР
		КОГДА СкидкиНаценкиНоменклатурыСрезПоследних.ЗначениеУсловия = 0
			ТОГДА 2
		КОГДА СкидкиНаценкиНоменклатурыСрезПоследних.Условие = ЗНАЧЕНИЕ(Перечисление.УсловияСкидкиНаценки.ПоКоличествуТовара)
			ТОГДА 0
		КОГДА СкидкиНаценкиНоменклатурыСрезПоследних.Условие = ЗНАЧЕНИЕ(Перечисление.УсловияСкидкиНаценки.ПоСуммеДокумента)
			ТОГДА 1
		ИНАЧЕ 9
	КОНЕЦ КАК Условие,
	СкидкиНаценкиНоменклатурыСрезПоследних.ЗначениеУсловия КАК ЗначениеУсловия,
	ВЫБОР
		КОГДА СкидкиНаценкиНоменклатурыСрезПоследних.ПроцентСкидкиНаценки > 0
			ТОГДА СкидкиНаценкиНоменклатурыСрезПоследних.ПроцентСкидкиНаценки
		ИНАЧЕ 0
	КОНЕЦ КАК ПроцентСкидки,
	ВЫБОР
		КОГДА СкидкиНаценкиНоменклатурыСрезПоследних.ПроцентСкидкиНаценки < 0
			ТОГДА -СкидкиНаценкиНоменклатурыСрезПоследних.ПроцентСкидкиНаценки
		ИНАЧЕ 0
	КОНЕЦ КАК ПроцентНаценки,
	СкидкиНаценкиНоменклатурыСрезПоследних.ОграничениеСкидкиНаценки КАК ОграничениеСкидкиНаценки,
	СкидкиНаценкиНоменклатурыСрезПоследних.Валюта КАК Валюта
ИЗ
	РегистрСведений.СкидкиНаценкиНоменклатуры.СрезПоследних(&КонецПериода, ) КАК СкидкиНаценкиНоменклатурыСрезПоследних
ГДЕ
	(СкидкиНаценкиНоменклатурыСрезПоследних.Условие = ЗНАЧЕНИЕ(Перечисление.УсловияСкидкиНаценки.ПоСуммеДокумента)
			ИЛИ СкидкиНаценкиНоменклатурыСрезПоследних.Условие = ЗНАЧЕНИЕ(Перечисление.УсловияСкидкиНаценки.ПоКоличествуТовара))
	И (СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки ССЫЛКА Справочник.ДоговорыКонтрагентов
			ИЛИ СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки ССЫЛКА Справочник.Контрагенты)
	И (СкидкиНаценкиНоменклатурыСрезПоследних.Номенклатура В (&Отбор_ref_skus)
			И СкидкиНаценкиНоменклатурыСрезПоследних.Номенклатура.ПометкаУдаления = ЛОЖЬ
			ИЛИ СкидкиНаценкиНоменклатурыСрезПоследних.Номенклатура = ЗНАЧЕНИЕ(Справочник.Номенклатура.ПустаяСсылка))
	И (СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки В (&Отбор_ref_buyers)
			И СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки.ПометкаУдаления = ЛОЖЬ
			ИЛИ СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки В (&Отбор_ref_agreements)
			И СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки.ПометкаУдаления = ЛОЖЬ
			И (ПолучательСкидки.СрокДействия = ДАТАВРЕМЯ(1, 1, 1)
				ИЛИ ПолучательСкидки.СрокДействия >= &КонецПериода)
			ИЛИ СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки = ЗНАЧЕНИЕ(Справочник.Контрагенты.ПустаяСсылка)
			ИЛИ СкидкиНаценкиНоменклатурыСрезПоследних.ПолучательСкидки = ЗНАЧЕНИЕ(Справочник.ДоговорыКонтрагентов.ПустаяСсылка))
	И (СкидкиНаценкиНоменклатурыСрезПоследних.ДатаОкончания = ДАТАВРЕМЯ(1, 1, 1)
			ИЛИ СкидкиНаценкиНоменклатурыСрезПоследних.ДатаОкончания > &КонецПериода)
	И СкидкиНаценкиНоменклатурыСрезПоследних.ПроцентСкидкиНаценки <> 0

УПОРЯДОЧИТЬ ПО
	ДатаНачала,
	ДатаОкончания,
	ТипСкидки,
	Условие,
	ЗначениеУсловия,
	ПроцентСкидки,
	ОграничениеСкидкиНаценки,
	Валюта"	0	"// заполняем подборы
лОбъекты.Колонки.Добавить(""ПоДоговорам"");
лОбъекты.Колонки.Добавить(""ПоВладельцам"");
лОбъекты.Колонки.Добавить(""ПоТочкам"");
лОбъекты.Колонки.Добавить(""ПоТипамТочек"");
лОбъекты.Колонки.Добавить(""Ссылка"");
лОбъекты.Добавить(); // добавляем пустую строку в конец
//лОбъекты.Вставить(0); // добавляем в начало пустую строку (т.к. обход с конца)

лТЗ_ПоДоговорам=Новый ТаблицаЗначений;
лТЗ_ПоДоговорам.Колонки.Добавить(""Сотрудник""); // employee
лТЗ_ПоДоговорам.Колонки.Добавить(""Элемент""); // item
лТЗ_ПоДоговорам.Колонки.Добавить(""Номенклатура""); // sku

лТЗ_ПоВладельцам = лТЗ_ПоДоговорам.Скопировать();
лТЗ_ПоТочкам = лТЗ_ПоДоговорам.Скопировать();
лТЗ_ПоТипамТочек = лТЗ_ПоДоговорам.Скопировать();

лКлюч = """";
лКлючТ = """";
лПерваяСтрокаГруппы = 0;
мстрУдалить = Новый Массив;
//Для Инд=лОбъекты.Количество()-1 По 0 Цикл
Для лИндСтр=0 По лОбъекты.Количество()-1 Цикл
	стрДоп = лОбъекты[лИндСтр];
//Для Каждого стрДоп Из лОбъекты Цикл
	лКлючТ = XMLСтрока(стрДоп.ДатаНачала)+""*""+XMLСтрока(стрДоп.ДатаОкончания)+""*""+XMLСтрока(стрДоп.ТипСкидки)+
		""*""+XMLСтрока(стрДоп.Условие)+""*""+XMLСтрока(стрДоп.ЗначениеУсловия)+
		""*""+XMLСтрока(стрДоп.ПроцентСкидки)+""*""+XMLСтрока(стрДоп.ОграничениеСкидкиНаценки)+""*""+XMLСтрока(стрДоп.Валюта);
		
	Если лКлючТ=лКлюч Тогда
		мстрУдалить.Добавить(стрДоп);
	Иначе
		Если лКлюч<>"""" Тогда
			лОбъекты[лПерваяСтрокаГруппы].Ссылка = лКлюч;
			лОбъекты[лПерваяСтрокаГруппы].ПоДоговорам = лТЗ_ПоДоговорам.Скопировать();
			лОбъекты[лПерваяСтрокаГруппы].ПоВладельцам = лТЗ_ПоВладельцам.Скопировать();
			лОбъекты[лПерваяСтрокаГруппы].ПоТочкам = лТЗ_ПоТочкам.Скопировать();
			лОбъекты[лПерваяСтрокаГруппы].ПоТипамТочек = лТЗ_ПоТипамТочек.Скопировать();
		КонецЕсли;
		лКлюч = лКлючТ;
		
		лТЗ_ПоДоговорам.Очистить();
		лТЗ_ПоВладельцам.Очистить();
		//лТЗ_ПоТочкам.Очистить();
		//лТЗ_ПоТипамТочек.Очистить();
		
		лПерваяСтрокаГруппы = лИндСтр;
	КонецЕсли;
	
	Если стрДоп.ТипСкидки=2 Тогда // ПоДоговорам
		стрТЗ = лТЗ_ПоДоговорам.Добавить();
		стрТЗ.Элемент = стрДоп.ПолучательСкидки;
		стрТЗ.Номенклатура = стрДоп.Номенклатура;
	ИначеЕсли стрДоп.ТипСкидки=3 Тогда // ПоВладельцам
		стрТЗ = лТЗ_ПоВладельцам.Добавить();
		стрТЗ.Элемент = стрДоп.ПолучательСкидки;
		стрТЗ.Номенклатура = стрДоп.Номенклатура;
	КонецЕсли;
КонецЦикла;

// удаляем лишние строки
Для Каждого стрДоп Из мстрУдалить Цикл
	лОбъекты.Удалить(стрДоп);
КонецЦикла;
лОбъекты.Удалить(лОбъекты.Количество()-1);"				"// заполняем подборы
лОбъекты.Колонки.Добавить(""ПоДоговорам"");
лОбъекты.Колонки.Добавить(""ПоВладельцам"");
лОбъекты.Колонки.Добавить(""ПоТочкам"");
лОбъекты.Колонки.Добавить(""ПоТипамТочек"");
лОбъекты.Колонки.Добавить(""Ссылка"");

лТЗ_ПоДоговорам=Новый ТаблицаЗначений;
лТЗ_ПоДоговорам.Колонки.Добавить(""Сотрудник""); // employee
лТЗ_ПоДоговорам.Колонки.Добавить(""Элемент""); // item
лТЗ_ПоДоговорам.Колонки.Добавить(""Номенклатура""); // sku

лТЗ_ПоВладельцам = лТЗ_ПоДоговорам.Скопировать();
лТЗ_ПоТочкам = лТЗ_ПоДоговорам.Скопировать();
лТЗ_ПоТипамТочек = лТЗ_ПоДоговорам.Скопировать();

Для Каждого стрДоп Из лОбъекты Цикл
	лТЗ_ПоДоговорам.Очистить();
	лТЗ_ПоВладельцам.Очистить();
	//лТЗ_ПоТочкам.Очистить();
	//лТЗ_ПоТипамТочек.Очистить();
	
	Если НЕ ЗначениеЗаполнено(стрДоп.ПолучательСкидки) Тогда
		стрТЗ = лТЗ_ПоВладельцам.Добавить();
		стрТЗ.Номенклатура = стрДоп.Номенклатура;
		стрДоп.ТипСкидки = 3;
	ИначеЕсли стрДоп.ТипСкидки=2 Тогда // ПоДоговорам
		стрТЗ = лТЗ_ПоДоговорам.Добавить();
		стрТЗ.Элемент = стрДоп.ПолучательСкидки;
		стрТЗ.Номенклатура = стрДоп.Номенклатура;
	ИначеЕсли стрДоп.ТипСкидки=3 Тогда // ПоВладельцам
		стрТЗ = лТЗ_ПоВладельцам.Добавить();
		стрТЗ.Элемент = стрДоп.ПолучательСкидки;
		стрТЗ.Номенклатура = стрДоп.Номенклатура;
	КонецЕсли;
	
	стрДоп.ПоДоговорам = лТЗ_ПоДоговорам.Скопировать();
	стрДоп.ПоВладельцам = лТЗ_ПоВладельцам.Скопировать();
	стрДоп.ПоТочкам = лТЗ_ПоТочкам.Скопировать();
	стрДоп.ПоТипамТочек = лТЗ_ПоТипамТочек.Скопировать();

	стрДоп.Ссылка = XMLСтрока(стрДоп.Номенклатура)+""*""+стрДоп.Условие+""*""+стрДоп.ЗначениеУсловия+""*""+XMLСтрока(стрДоп.ПолучательСкидки);
КонецЦикла;"										
itemtype	ТипСкидки		Тип объекта скидки (0 - ТТ, 1 - тип ТТ, 2 - Договор, 3 - Владелец)																		
datestart	ДатаНачала		Дата начала действия скидки																		
dateend	ДатаОкончания		Дата окончания действия скидки																		
conditiontype	Условие		Тип условия скидки (0 - количество, 1 - сумма, 2 - не определено)																		
conditionvalue	ЗначениеУсловия		Значение условия скидки																		
discountrate	ПроцентСкидки		Процент скидки																		
extrarate	ПроцентНаценки		Процент наценки																		
discountlimit	ОграничениеСкидкиНаценки		Максимальное ограничение суммы скидки																		
currencytype			Тип валюты																		
priority			Приоритет																		
	#	ref_skus			ПАРАМЕТР																
	#	ref_agreements			ПАРАМЕТР																
	#	ref_buyers			ПАРАМЕТР																
	*#	ref_buypoints			ПАРАМЕТР																
	*#	ref_buypointtypes			ПАРАМЕТР																
																					
																					
Подбор договоров под скидку																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted			Пометка на удаление		ПоДоговорам	Х															
discount	*ставится от родителя	ref_discounts	Ссылка на скидку																		
employee	*Сотрудник	*ref_employees	Ссылка на сотрудника																		
item	Элемент	*ref_agreements	Ссылка на договор																		
sku	Номенклатура	*ref_skus	Ссылка на товар																		
skuclassifiervalue			Ссылка на классификатор																		
																					
																					
Подбор владельцев под скидку																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted			Пометка на удаление		ПоВладельцам	Х															
discount	*ставится от родителя	ref_discounts	Ссылка на скидку																		
employee	*Сотрудник	*ref_employees	Ссылка на сотрудника																		
item	Элемент	*ref_buyers	Ссылка на владельца																		
classifier			Ссылка на классификатор																		
sku	Номенклатура	*ref_skus	Ссылка на товар																		
skuclassifiervalue			Ссылка на классификатор																		
																					
																					
Подбор торговых точек под скидку																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted			Пометка на удаление		ПоТочкам	Х															
discount	*ставится от родителя	ref_discounts	Ссылка на скидку																		
employee	*Сотрудник	*ref_employees	Ссылка на сотрудника																		
item	Элемент	*ref_buypoints	Ссылка на ТТ																		
classifier			Ссылка на классификатор																		
sku	Номенклатура	*ref_skus	Ссылка на товар																		
skuclassifiervalue			Ссылка на классификатор																		
																					
																					
Подбор типов торговых точек под скидку																					
Мобиком	Источник	Ссылка	Описание		Запрос	Есть условие	Доп. при выгрузке	Доп. при загрузке													
deleted			Пометка на удаление		ПоТипамТочек	Х															
discount	*ставится от родителя	ref_discounts	Ссылка на скидку																		
employee	*Сотрудник	*ref_employees	Ссылка на сотрудника																		
item	Элемент	*ref_buypointtypes	Ссылка на тип ТТ																		
classifier			Ссылка на классификатор																		
sku	Номенклатура	*ref_skus	Ссылка на товар																		
skuclassifiervalue			Ссылка на классификатор																		